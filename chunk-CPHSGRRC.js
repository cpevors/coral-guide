import{a as G,b as O}from"./chunk-5BCV2XAA.js";import{a as z}from"./chunk-7XMK33P5.js";import{a as U}from"./chunk-PD5FG3A7.js";import{a as A}from"./chunk-3TR4XKFQ.js";import"./chunk-PRWEW5VH.js";import{a as q}from"./chunk-7JQJEV7G.js";import"./chunk-2K3GEZZY.js";import"./chunk-7A5ZJ3YN.js";import"./chunk-2A7PSW7O.js";import{a as B,c as M}from"./chunk-5NO5LL4W.js";import"./chunk-VO65IASJ.js";import{a as V}from"./chunk-C53QTWVW.js";import"./chunk-GLYGKSTO.js";import{b as k}from"./chunk-PIL2IJC4.js";import"./chunk-OOBQPUIX.js";import"./chunk-OM3WRHFD.js";import"./chunk-JSGVWV7K.js";import{b as X}from"./chunk-VYOS5CGL.js";import"./chunk-RZQ3UNDK.js";import"./chunk-DKARO4CX.js";import{i as j,l as d}from"./chunk-DHAI4KFY.js";import"./chunk-5MLMU7SK.js";import"./chunk-GEWE6M22.js";import{c as F}from"./chunk-SJRCRC22.js";import"./chunk-X3TMHFY3.js";import"./chunk-EE6A4D3O.js";import"./chunk-2CFRUPNI.js";import"./chunk-F6RS7OIB.js";import"./chunk-KW5235UB.js";import{g as D,j as S}from"./chunk-7JOAVXDE.js";import"./chunk-7SDYZQX7.js";import"./chunk-KUYOE2KN.js";import"./chunk-AJOFB37Q.js";import{$b as x,Ba as I,Gc as W,Hc as J,Ib as r,Kb as L,Ob as h,Qb as w,Rb as b,Sb as T,Tb as l,Ub as p,Vb as _,Wc as P,Zb as y,ac as s,db as c,ld as R,ma as f,na as g,sb as C,wb as v,wc as E,xc as N,yb as m,yc as $}from"./chunk-GYX7HZX3.js";import"./chunk-4CLCTAJ7.js";function Y(e,a){if(e&1&&_(0,"app-fish",2),e&2){let t=s().$implicit;r("fish",t.fish)}}function Z(e,a){if(e&1&&_(0,"app-insect",3),e&2){let t=s().$implicit;r("critter",t.insect)}}function tt(e,a){if(e&1&&_(0,"app-insect",3),e&2){let t=s().$implicit;r("critter",t.oceanCritter)}}function et(e,a){if(e&1&&m(0,Y,1,1,"app-fish",2)(1,Z,1,1,"app-insect",3)(2,tt,1,1,"app-insect",3),e&2){let t=a.$implicit;h(t.fish?0:t.insect?1:t.oceanCritter?2:-1)}}var H=(()=>{class e{constructor(){this.critter=I.required(),P(()=>{this.critter(),this.#t()})}#t(){let t=this.critter();this.toDoContext="fishName"in t?"journal_fish":t.item.inventoryCategory.toLocaleLowerCase()==="bug"?"journal_insects":"journal_critter"}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-caught-details"]],inputs:{critter:[1,"critter"]},decls:2,vars:2,consts:[[3,"context","itemId"],["appDatabaseItemDetails",""],[3,"fish"],[3,"critter"]],template:function(i,n){i&1&&(l(0,"app-database-item-details",0),m(1,et,3,1,"ng-template",1),p()),i&2&&r("context",n.toDoContext)("itemId",n.critter().item.id)},dependencies:[G,O,q,U],encapsulation:2})}}return e})();function it(e,a){if(e&1&&_(0,"app-caught-details",1),e&2){let t=s();r("critter",t.selectedEntity)}}function nt(e,a){if(e&1){let t=y();l(0,"app-item-icon",8),x("click",function(){let n=f(t).$implicit,o=s(4);return g(o.showDetails(n))}),p()}if(e&2){let t=a.$implicit,i=s(4);L("selected-icon",(i.selectedEntity==null||i.selectedEntity.item==null?null:i.selectedEntity.item.id)===t.item.id),r("itemName",t.item.iconName)}}function at(e,a){if(e&1&&(l(0,"div",5),b(1,nt,1,3,"app-item-icon",7,w),p()),e&2){let t=s();c(),T(t)}}function ot(e,a){if(e&1&&_(0,"app-caught-table",6),e&2){let t=s();r("dataSource",t)}}function rt(e,a){if(e&1){let t=y();l(0,"app-data-filter",4),$("showTableChange",function(n){f(t);let o=s(2);return N(o.showTable,n)||(o.showTable=n),g(n)}),p(),m(1,at,3,0,"div",5)(2,ot,1,1,"app-caught-table",6)}if(e&2){let t=s(2);E("showTable",t.showTable),r("parentFormGroup",t.formControl)("locations",t.getLocations(a)),c(),h(t.showTable?-1:1),c(),h(t.showTable?2:-1)}}function st(e,a){if(e&1&&(l(0,"mat-tab",3),m(1,rt,3,5),W(2,"async"),p()),e&2){let t,i=a.$implicit;r("label",i.title),c(),h((t=J(2,2,i.data))?1:-1,t)}}var Ft=(()=>{class e extends A{constructor(){super(new j({season:new d([...D],{nonNullable:!0}),weather:new d([...S],{nonNullable:!0}),location:new d(null),showTable:new d(!1,{nonNullable:!0})})),this.SEA_CRITTERS_INDEX=2,this.tabs=[{title:"Fish",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-fish"),this._database.fetchFish$(),0)},{title:"Insects",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-insects"),this._database.fetchBugsAndInsects$(),1)},{title:"Sea Critters",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-sea-critters"),this._database.fetchOceanCritters$(),this.SEA_CRITTERS_INDEX)}],this.activateTabFromRoute(this.tabs.map(t=>t.title))}filterPredicate(t,i,n){return!i.season?.length||!i.weather?.length?!1:"spawnSettings"in t?t.spawnSettings?.some(o=>this.matchLocation(o.spawnLocation,i.location)&&this.matchSeason(o.spawnSeason,i.season)&&this.matchWeather(o.spawnWeather,n,i.weather)):this.matchLocation(t.spawnLocation,i.location)&&this.matchSeason(t.spawnSeason,i.season)&&this.matchWeather(t.spawnWeather,n,i.weather)}matchLocation(t,i){return!i||t.includes(i)}matchWeather(t,i,n){let o=F(t).toLowerCase();return i===this.SEA_CRITTERS_INDEX||o==="any"||n?.length===S.length||!!n?.some(K=>o.includes((""+K).toLowerCase()))}matchSeason(t,i){let n=F(t).toLowerCase();return n==="any"||i?.length===D.length||!!i?.some(u=>n.includes((""+u).toLowerCase()))}getLocations(t){return t.length?[...new Set(t.map(i=>"fishName"in i?i.spawnSettings.map(n=>n.spawnLocation):i.spawnLocation).flat(2))].sort():[]}resetLocationFilter(){this.formControl.get("location")?.setValue(null)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-caught"]],features:[v],decls:5,vars:3,consts:[[3,"removePlaceholder"],["listDetail","",3,"critter"],[3,"selectedTabChange","selectedIndex"],[3,"label"],[3,"showTableChange","showTable","parentFormGroup","locations"],[1,"icon-grid"],[3,"dataSource"],[1,"icon-grid-item",3,"itemName","selected-icon"],[1,"icon-grid-item",3,"click","itemName"]],template:function(i,n){i&1&&(l(0,"app-list-detail-container",0),m(1,it,1,1,"app-caught-details",1),l(2,"mat-tab-group",2),x("selectedTabChange",function(u){return n.updateUrl(u),n.resetLocationFilter()}),b(3,st,3,4,"mat-tab",3,w),p()()),i&2&&(r("removePlaceholder",n.showTable),c(),h(n.selectedEntity?1:-1),c(),r("selectedIndex",n.selectedTabIndex()),c(),T(n.tabs))},dependencies:[k,H,M,B,V,X,z,R],encapsulation:2})}}return e})();export{Ft as CaughtComponent};
