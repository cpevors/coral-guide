import{a as Bt,b as Pt,c as Ht,d as kt,e as K,f as zt}from"./chunk-MAPCV5WJ.js";import{a as At,b as Nt,c as Ot,d as jt,e as Lt,f as $t}from"./chunk-AOZA2FFG.js";import{a as Vt,b as qt,c as Gt,d as Ut}from"./chunk-TAGED6M3.js";import{a as Zt}from"./chunk-YFIS4XOU.js";import{a as nt,b as at}from"./chunk-LHFBWDNO.js";import"./chunk-GVL7J5HO.js";import{Aa as c,Ad as It,Ba as ae,Bb as Ze,Bd as Et,Ca as oe,Cc as Z,Cd as St,D as X,Da as He,Dd as Ft,Ea as ge,Ed as wt,F as Se,Fa as ke,Fb as U,Fc as me,Fd as Tt,G as A,Ga as O,Gb as $,H as Fe,Ha as f,Hc as ot,I as de,Ia as Ae,J as we,Ja as Ne,K as b,Kb as Ke,L as N,Lb as We,M as ce,N as Te,Na as C,O as fe,Oa as d,P as ue,Pa as re,Pb as Qe,Qa as be,Qb as L,Rc as rt,S as y,Sb as se,Sc as st,Ta as Oe,Tc as pt,Td as Mt,Uc as Y,W as Me,Wb as Ye,Xa as G,Xc as mt,Ya as je,Yc as lt,Za as Le,Zb as Je,Zc as dt,_c as ct,a as w,ac as Ce,b as T,bc as Xe,ca as he,cc as z,cd as ft,da as o,dd as ut,ea as E,ec as _e,f as Q,fc as pe,fd as ht,g as De,gb as Ve,gc as xe,gd as gt,hc as et,he as v,id as bt,j as le,ja as ee,ka as _,kb as qe,l as Ie,lb as Ge,ma as te,na as s,nb as Ue,ne as Rt,pa as H,qa as Re,ra as Be,sc as ye,t as Ee,ta as g,tb as $e,u as J,ua as u,uc as tt,ud as Ct,va as Pe,vc as it,vd as _t,wa as ie,wd as xt,xa as ne,xd as yt,ya as m,yb as ze,yd as vt,za as p,zd as Dt}from"./chunk-IDSY5RWV.js";var x=(()=>{let t=class t{constructor(){this.database=we(se)}getGenericItems(e){return this.database.getTagBasedItems().filter(i=>i.tags.some(a=>e.tags?.includes(a)))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],inputs:{item:"item"},decls:0,vars:0,template:function(i,a){},encapsulation:2});let n=t;return n})();var _i=["*"],D=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=b({type:t,selectors:[["app-database-header-button"]],inputs:{templateRef:"templateRef"},ngContentSelectors:_i,decls:4,vars:6,consts:[["mat-button","",1,"hover:bg-black/10",3,"click"],[1,"flex","gap-x-2","items-center"],[1,"arrow"]],template:function(i,a){i&1&&(Ae(),m(0,"button",0),O("click",function(){return a.templateRef.toggle()}),m(1,"div",1),Ne(2),c(3,"i",2),p()()),i&2&&(o(3),H("down",!a.templateRef.open)("translate-y-[-3px]",a.templateRef.open)("up",a.templateRef.open))},dependencies:[Pt],encapsulation:2});let n=t;return n})();var xi=n=>[n];function yi(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Fishing"),p()(),c(5,"app-caught-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",G(2,xi,e.fish))}}var Wt=(()=>{let t=class t extends x{ngOnInit(){this.item&&(this.fish=this.database.getFish().find(e=>e.item.id===this.item?.id))}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-fishing"]],features:[_],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,yi,6,4,"app-expandable",0),i&2&&u(0,a.fish?0:-1)},dependencies:[v,K,D],encapsulation:2});let n=t;return n})();var Di=n=>[n];function Ii(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Bugs and insects"),p()(),c(5,"app-caught-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",G(2,Di,e.critter))}}var Qt=(()=>{let t=class t extends x{ngOnInit(){this.item&&(this.critter=this.database.getBugsAndInsects().find(e=>e.item.id===this.item?.id))}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-insects"]],features:[_],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,Ii,6,4,"app-expandable",0),i&2&&u(0,a.critter?0:-1)},dependencies:[v,K,D],encapsulation:2});let n=t;return n})();var Si=n=>[n];function Fi(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Ocean critters"),p()(),c(5,"app-caught-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",G(2,Si,e.critter))}}var Yt=(()=>{let t=class t extends x{ngOnInit(){this.item&&(this.critter=this.database.getOceanCritters().find(e=>e.item.id===this.item?.id))}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-sea-critters"]],features:[_],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,Fi,6,4,"app-expandable",0),i&2&&u(0,a.critter?0:-1)},dependencies:[v,K,D],encapsulation:2});let n=t;return n})();function Ti(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Seed for"),p()(),c(5,"app-crop-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.comesFromSeed)}}function Mi(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"From seed"),p()(),c(5,"app-crop-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.isSeedFor)}}var Jt=(()=>{let t=class t extends x{constructor(){super(...arguments),this.isSeedFor=[],this.comesFromSeed=[]}ngOnInit(){if(!this.item)return;let e=[...this.database.getCrops(),...this.database.getFruitTrees(),...this.database.getFruitPlants()];this.isSeedFor=e.filter(i=>this.item&&this.isIngredient(this.item,i)),this.comesFromSeed=e.filter(i=>i.item?.id===this.item?.id)}isIngredient(e,i){return i.dropData.some(a=>a.item?.id===e?.id)}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-crops"]],features:[_],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,Ti,6,2,"app-expandable",0)(1,Mi,6,2,"app-expandable",0),i&2&&(u(0,a.comesFromSeed.length?0:-1),o(1),u(1,a.isSeedFor.length?1:-1))},dependencies:[v,Bt,D],encapsulation:2});let n=t;return n})();function Bi(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Usage in processing"),p()(),c(5,"app-processor-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.usedIn)}}function Pi(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Processing"),p()(),c(5,"app-processor-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.craftedFrom)}}var Xt=(()=>{let t=class t extends x{constructor(){super(...arguments),this.craftedFrom=[],this.usedIn=[]}ngOnInit(){if(!this.item)return;let e=this.database.getItemProcessingRecipes(),i=[],a=[];Object.keys(e).forEach(l=>{i.push(...e[l].filter(h=>h.output.item.id===this.item?.id)),a.push(...e[l].filter(h=>this.item&&this.isIngredient(this.item,h)))}),this.usedIn=a,this.craftedFrom=i}isIngredient(e,i){let a=this.getGenericItems(e);return i.input.item.id===e?.id||i.additionalInput.some(l=>l.item.id===e.id)||!!a.find(l=>l.key===i.genericInput?.genericItem?.key)}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-artisan"]],features:[_],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showProcessor","",3,"dataSource"]],template:function(i,a){i&1&&g(0,Bi,6,2,"app-expandable",0)(1,Pi,6,2,"app-expandable",0),i&2&&(u(0,a.usedIn.length?0:-1),o(1),u(1,a.craftedFrom.length?1:-1))},dependencies:[v,qt,D],encapsulation:2});let n=t;return n})();function ki(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Used to craft"),p()(),c(5,"app-inventory-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.usedIn)}}function Ai(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Crafting recipe"),p()(),c(5,"app-inventory-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.craftedFrom)}}var ei=(()=>{let t=class t extends x{constructor(){super(...arguments),this.craftedFrom=[],this.usedIn=[]}ngOnInit(){if(!this.item)return;let e=this.database.getCraftingRecipes();this.craftedFrom=e.filter(i=>i.item?.id===this.item?.id),this.usedIn=e.filter(i=>this.item&&this.isIngredient(this.item,i))}isIngredient(e,i){let a=this.getGenericItems(e);return i.ingredients.some(l=>l.item?.id===e?.id)||i.genericIngredients.some(l=>a.find(h=>h.key===l.key))}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-crafting"]],features:[_],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,ki,6,2,"app-expandable",0)(1,Ai,6,2,"app-expandable",0),i&2&&(u(0,a.usedIn.length?0:-1),o(1),u(1,a.craftedFrom.length?1:-1))},dependencies:[v,Vt,D],encapsulation:2});let n=t;return n})();function Oi(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Usage in cooking"),p()(),c(5,"app-cooking-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.usedIn)}}function ji(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Cooking recipe"),p()(),c(5,"app-cooking-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.craftedFrom)}}var ti=(()=>{let t=class t extends x{constructor(){super(...arguments),this.craftedFrom=[],this.usedIn=[]}ngOnInit(){if(!this.item)return;let e=this.database.getCookingRecipes(),i=[],a=[];Object.keys(e).forEach(l=>{i.push(...e[l].filter(h=>h.item?.id===this.item?.id)),a.push(...e[l].filter(h=>this.item&&this.isIngredient(this.item,h)))}),this.usedIn=a,this.craftedFrom=i}isIngredient(e,i){let a=this.getGenericItems(e);return i.ingredients.some(l=>l.item?.id===e?.id)||i.genericIngredients.some(l=>a.find(h=>h.key===l.key))||i.eitherOrIngredients.some(l=>l.some(h=>h.item?.id===e.id))}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-cooking"]],features:[_],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showUtensil","",3,"dataSource"]],template:function(i,a){i&1&&g(0,Oi,6,2,"app-expandable",0)(1,ji,6,2,"app-expandable",0),i&2&&(u(0,a.usedIn.length?0:-1),o(1),u(1,a.craftedFrom.length?1:-1))},dependencies:[v,Gt,D],encapsulation:2});let n=t;return n})();function Vi(n,t){if(n&1&&(m(0,"td",14),c(1,"app-ui-icon",15),p()),n&2){let r=t.$implicit;o(1),s("uiIcon",r.pref.icon)}}function qi(n,t){n&1&&(m(0,"th",16),d(1,"Preference"),p()),n&2&&te("colspan",2)}function Gi(n,t){if(n&1&&(m(0,"td",17),d(1),p()),n&2){let r=t.$implicit;o(1),be(" ",r.pref.label," ")}}function Ui(n,t){n&1&&(m(0,"th",16),d(1,"NPCs"),p())}function $i(n,t){if(n&1&&(m(0,"div",20),c(1,"app-item-icon",21),d(2),p()),n&2){let r=t.$implicit,e=t.$index,i=t.$count;H("mr-4",e!==i-1),o(1),s("itemName",r.iconName),o(1),be(" ",r.characterName," ")}}function zi(n,t){if(n&1&&(m(0,"td",18)(1,"div",19),ie(2,$i,3,4,"div",22,Pe),p()()),n&2){let r=t.$implicit;ne(2,r.npcs)}}function Zi(n,t){n&1&&c(0,"tr",23)}function Ki(n,t){n&1&&c(0,"tr",24)}function Wi(n,t){if(n&1&&(m(0,"table",4),ae(1,5),g(2,Vi,2,1,"td",6),oe(),ae(3,7),g(4,qi,2,1,"th",8)(5,Gi,2,1,"td",9),oe(),ae(6,10),g(7,Ui,2,0,"th",8)(8,zi,4,0,"td",11),oe(),g(9,Zi,1,0,"tr",12)(10,Ki,1,0,"tr",13),p()),n&2){let r=f(2);s("dataSource",r.dataSource),o(9),s("matHeaderRowDef",r.displayedHeaderColumns)("matHeaderRowDefSticky",!0),o(1),s("matRowDefColumns",r.displayedColumns)}}function Qi(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Gifting"),p()(),m(5,"app-responsive-table"),g(6,Wi,11,4,"table",4),p()()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(3),u(6,e.dataSource.length?6:-1)}}var ni=(()=>{let t=class t extends x{constructor(){super(...arguments),this.displayedHeaderColumns=["preference","npcs"],this.displayedColumns=["icon",...this.displayedHeaderColumns],this.favoritePreferences=[],this.lovePreferences=[],this.likePreferences=[],this.neutralPreferences=[],this.dislikePreferences=[],this.hatePreferences=[],this.dataSource=[],this.keys=["favoritePreferences","lovePreferences","likePreferences","neutralPreferences","dislikePreferences","hatePreferences"]}ngOnInit(){let e=this.item;if(!e)return;this.database.getGiftingPreferences().forEach(a=>{this.keys.forEach(l=>{a[l].findIndex(F=>F.type==="item"&&e.id===F.item.id)!==-1&&a.npc&&this[l].push(a.npc)})}),this.keys.forEach(a=>{let l=this[a];l.length&&this.dataSource.push({pref:Zt.find(h=>h.preferenceField===a),npcs:l})})}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-gifts"]],hostVars:2,hostBindings:function(i,a){i&2&&H("database-gifts",a.displayedHeaderColumns)},features:[_],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["mat-table","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 !pt-3 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","preference"],["class","backdrop-blur-xl","mat-header-cell","",4,"matHeaderCellDef"],["class","text-col !pl-0 whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","npcs"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","!pt-3","w-10","text-center","icon-col"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],["mat-header-cell","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","!pl-0","whitespace-nowrap"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"inline-flex","shrink-0","items-center"],[1,"h-12","mr-2","!flex","items-center","shrink-0",3,"itemName"],["class","inline-flex shrink-0 items-center",3,"mr-4"],["mat-header-row",""],["mat-row",""]],template:function(i,a){i&1&&g(0,Qi,7,2,"app-expandable",0),i&2&&u(0,a.favoritePreferences.length||a.lovePreferences.length||a.likePreferences.length||a.neutralPreferences.length||a.dislikePreferences.length||a.hatePreferences.length?0:-1)},dependencies:[Xe,Z,Ct,v,_t,yt,Et,vt,xt,St,Dt,It,Ft,wt,D],styles:[`.database-gifts .app-responsive-table .app-item-icon>img{aspect-ratio:unset;width:auto;max-height:3rem}
`],encapsulation:2});let n=t;return n})();function Ji(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Required for offering "),p()(),c(5,"app-offerings-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.requiredAsOffering)}}function Xi(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Offering reward"),p()(),c(5,"app-offerings-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.isRewardIn)}}var ai=(()=>{let t=class t extends x{constructor(){super(...arguments),this.isRewardIn=[],this.requiredAsOffering=[]}ngOnInit(){if(!this.item)return;let e=this.database.getOfferings();this.isRewardIn=e.map(i=>{let a=i.offerings.filter(l=>l.rewards.items.find(h=>h.item.id===this.item?.id)||l.rewards.recipes.find(h=>h.item.id===this.item?.id));return a.length?T(w({},i),{offerings:a}):null}).filter(L),this.requiredAsOffering=e.map(i=>{let a=i.offerings.filter(l=>l.requiredItems.find(h=>{if("id"in h.item)return h.item.id===this.item?.id;{let F=h.item.key;return this.database.getTagBasedItems().find(S=>F===S.key)?.items?.find(S=>S.id===this.item?.id)}}));return a.length?T(w({},i),{offerings:a}):null}).filter(L)}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-offerings"]],features:[_],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showAltar","",3,"dataSource"]],template:function(i,a){i&1&&g(0,Ji,6,2,"app-expandable",0)(1,Xi,6,2,"app-expandable",0),i&2&&(u(0,a.requiredAsOffering.length?0:-1),o(1),u(1,a.isRewardIn.length?1:-1))},dependencies:[v,Lt,D],encapsulation:2});let n=t;return n})();function tn(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Buy at"),p()(),c(5,"app-shop-item-data-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.toBuyAt)}}var oi=(()=>{let t=class t extends x{constructor(){super(...arguments),this.toBuyAt=[]}ngOnInit(){this.item&&(this.toBuyAt=U.map(e=>this.database.getShopData(e).map(i=>T(w({},i),{shop:{url:e,displayName:$[e]}}))).flat().filter(e=>this.item?.id===e.item.id))}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-shop-data"]],features:[_],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,tn,6,2,"app-expandable",0),i&2&&u(0,a.toBuyAt.length?0:-1)},dependencies:[v,At,D],encapsulation:2});let n=t;return n})();function an(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Chance as processing result "),p()(),c(5,"app-shop-item-process-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.chancetoBeProcessedFrom)}}function on(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Can be processed at"),p()(),c(5,"app-shop-item-process-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.canBeProcessed)}}var ri=(()=>{let t=class t extends x{constructor(){super(...arguments),this.chancetoBeProcessedFrom=[],this.canBeProcessed=[]}ngOnInit(){if(!this.item)return;let e=U.map(i=>this.database.getShopProcessItems(i).map(a=>T(w({},a),{shop:{url:i,displayName:$[i]}}))).flat();this.chancetoBeProcessedFrom=e.map(i=>{let a=i.outputChanges.find(l=>l.item.id===this.item?.id);if(a)return T(w({},i),{outputChanges:[a]})}).filter(L),this.canBeProcessed=e.filter(i=>i.input.id===this.item?.id)}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-shop-item-process"]],features:[_],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,an,6,2,"app-expandable",0)(1,on,6,2,"app-expandable",0),i&2&&(u(0,a.chancetoBeProcessedFrom.length?0:-1),o(1),u(1,a.canBeProcessed.length?1:-1))},dependencies:[v,Nt,D],encapsulation:2});let n=t;return n})();function sn(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Is result of upgrade "),p()(),c(5,"app-item-upgrade-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.isTheResult)}}function pn(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Is used as requirement in "),p()(),c(5,"app-item-upgrade-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.isRequirement)}}var si=(()=>{let t=class t extends x{constructor(){super(...arguments),this.isTheResult=[],this.isRequirement=[]}ngOnInit(){if(!this.item)return;let e=U.map(i=>this.database.getItemUpgradeData(i).map(a=>T(w({},a),{shop:{url:i,displayName:$[i]}}))).flat();this.isTheResult=e.filter(i=>i.item.id===this.item?.id).filter(L),this.isRequirement=e.filter(i=>i.requirements.some(a=>a.item.id===this.item?.id))}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-item-upgrade"]],features:[_],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,sn,6,2,"app-expandable",0)(1,pn,6,2,"app-expandable",0),i&2&&(u(0,a.isTheResult.length?0:-1),o(1),u(1,a.isRequirement.length?1:-1))},dependencies:[v,Ot,D],encapsulation:2});let n=t;return n})();function ln(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Can be dropped from enemies "),p()(),c(5,"app-bestiary-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.enemiesDroppingItem)}}var pi=(()=>{let t=class t extends x{constructor(){super(...arguments),this.enemiesDroppingItem=[]}ngOnInit(){let e=this.item;e&&(this.enemiesDroppingItem=this.database.getBestiary().map(i=>T(w({},i),{dropRates:i.dropRates.filter(a=>a.item.id===e.id)})).filter(i=>i.dropRates.length))}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-bestiary"]],features:[_],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,ln,6,2,"app-expandable",0),i&2&&u(0,a.enemiesDroppingItem.length?0:-1)},dependencies:[v,kt,D],encapsulation:2});let n=t;return n})();function cn(n,t){if(n&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Buy at festival"),p()(),c(5,"app-festival-shop-item-table",4),p()),n&2){let r=C(1),e=f();o(3),s("templateRef",r),o(2),s("dataSource",e.toBuyAt)}}var mi=(()=>{let t=class t extends x{constructor(){super(...arguments),this.toBuyAt=[]}ngOnInit(){this.item&&(this.toBuyAt=Ke.map(e=>(this.database.getFestivalData(e)?.shops.map(i=>i.shop).flat()??[]).map(i=>T(w({},i),{festival:{url:e,displayName:We[e]}}))).flat().filter(e=>this.item?.id===e.item.id))}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=y(t)))(a||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-festival-shop-data"]],features:[_],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,a){i&1&&g(0,cn,6,2,"app-expandable",0),i&2&&u(0,a.toBuyAt.length?0:-1)},dependencies:[v,jt,D],encapsulation:2});let n=t;return n})();function hn(n,t){if(n&1&&(m(0,"app-card")(1,"header",0),c(2,"app-item-icon",1),m(3,"div",2)(4,"h2",3),d(5),p(),m(6,"span"),d(7),p()(),c(8,"div",4)(9,"app-quality-grid",5),p(),m(10,"p",6),d(11),p(),m(12,"div",7),d(13,"There's currently no data for this item. :("),p(),c(14,"app-database-shop-item-process",8)(15,"app-database-shop-data",8)(16,"app-database-offerings",8)(17,"app-database-crops",8)(18,"app-database-fishing",8)(19,"app-database-insects",8)(20,"app-database-sea-critters",8)(21,"app-database-artisan",8)(22,"app-database-cooking",8)(23,"app-database-crafting",8)(24,"app-database-festival-shop-data",8)(25,"app-database-gifts",8)(26,"app-database-item-upgrade",8)(27,"app-database-bestiary",8),p()),n&2){let r=f();o(2),s("itemName",r.item.iconName),o(3),re(r.item.displayName),o(2),re(r.item.id),o(2),s("showOnlyBase",!r.item.qualities.bronze)("item",r.item),o(2),re(r.item.description),o(3),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item),o(1),s("item",r.item)}}var li=(()=>{let t=class t{constructor(){this._classes="col-span-full database-details"}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=b({type:t,selectors:[["app-database-details"]],hostVars:2,hostBindings:function(i,a){i&2&&Re(a._classes)},inputs:{item:"item"},decls:1,vars:1,consts:[[1,"flex","items-center","flex-wrap","mb-5"],[1,"mr-3","w-14",3,"itemName"],[1,"flex","flex-col","gap-0.5"],[1,"!my-0","font-semibold","text-xl","text-black"],[1,"h-0","w-full","md:hidden"],["includePrices","",1,"md:ml-auto","mt-4","md:mt-0","quality-grid","inline-block","w-fit",3,"showOnlyBase","item"],[1,"text-lg"],[1,"empty-details","text-black","my-5","text-lg"],[3,"item"]],template:function(i,a){i&1&&g(0,hn,28,20,"app-card"),i&2&&u(0,a.item?0:-1)},dependencies:[Z,me,ot,Wt,Qt,Yt,Jt,Xt,ei,ti,ni,ai,oi,ri,si,pi,mi],styles:[`.database-details .empty-details{display:none}.database-details:not(:has(.database-header)) .empty-details{display:block}.database-details .expandable-body{transition:none}.quality-grid .app-item-icon>img{height:3.5rem}.database-header{color:#000;font-weight:600;font-size:1.25em;margin-top:1.2em;line-height:1.6}
`],encapsulation:2});let n=t;return n})();var di=et({passive:!0}),ci=(()=>{let t=class t{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return De;let i=_e(e),a=this._monitoredElements.get(i);if(a)return a.subject;let l=new Q,h="cdk-text-field-autofilled",F=B=>{B.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(h)?(i.classList.add(h),this._ngZone.run(()=>l.next({target:B.target,isAutofilled:!0}))):B.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(h)&&(i.classList.remove(h),this._ngZone.run(()=>l.next({target:B.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",F,di),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:l,unlisten:()=>{i.removeEventListener("animationstart",F,di)}}),l}stopMonitoring(e){let i=_e(e),a=this._monitoredElements.get(i);a&&(a.unlisten(),a.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}};t.\u0275fac=function(i){return new(i||t)(de(pe),de(ee))},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var fi=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=N({type:t}),t.\u0275inj=A({});let n=t;return n})();var _n=new Fe("MAT_INPUT_VALUE_ACCESSOR"),xn=["button","checkbox","file","hidden","image","radio","range","reset","submit"],yn=0,vn=tt(class{constructor(n,t,r,e){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=r,this.ngControl=e,this.stateChanges=new Q}}),ui=(()=>{let t=class t extends vn{get disabled(){return this._disabled}set disabled(e){this._disabled=z(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(lt.required)??!1}set required(e){this._required=z(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&xe().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=z(e)}constructor(e,i,a,l,h,F,B,S,k,W){super(F,l,h,a),this._elementRef=e,this._platform=i,this._autofillMonitor=S,this._formField=W,this._uid=`mat-input-${yn++}`,this.focused=!1,this.stateChanges=new Q,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(q=>xe().has(q)),this._iOSKeyupListener=q=>{let P=q.target;!P.value&&P.selectionStart===0&&P.selectionEnd===0&&(P.setSelectionRange(1,1),P.setSelectionRange(0,0))};let j=this._elementRef.nativeElement,V=j.nodeName.toLowerCase();this._inputValueAccessor=B||j,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&k.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect=V==="select",this._isTextarea=V==="textarea",this._isInFormField=!!W,this._isNativeSelect&&(this.controlType=j.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){xn.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}else return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}};t.\u0275fac=function(i){return new(i||t)(E(he),E(pe),E(dt,10),E(ft,8),E(gt,8),E(it),E(_n,10),E(ci),E(ee),E(st,8))},t.\u0275dir=ce({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,a){i&1&&O("focus",function(){return a._focusChanged(!0)})("blur",function(){return a._focusChanged(!1)})("input",function(){return a._onInput()}),i&2&&(ke("id",a.id)("disabled",a.disabled)("required",a.required),te("name",a.name||null)("readonly",a.readonly&&!a._isNativeSelect||null)("aria-invalid",a.empty&&a.required?null:a.errorState)("aria-required",a.required)("id",a.id),H("mat-input-server",a._isServer)("mat-mdc-form-field-textarea-control",a._isInFormField&&a._isTextarea)("mat-mdc-form-field-input-control",a._isInFormField)("mdc-text-field__input",a._isInFormField)("mat-mdc-native-select-inline",a._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Oe([{provide:rt,useExisting:t}]),_,Te]});let n=t;return n})(),hi=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=N({type:t}),t.\u0275inj=A({imports:[ye,Y,Y,fi,ye]});let n=t;return n})();function In(n,t){if(n&1){let r=ge();m(0,"app-card",3)(1,"div",4)(2,"h2"),d(3,"Important note"),p(),m(4,"p"),d(5,"The item list loads a lot of stuff, this may take a while. The list below shows everything, that got not filtered beforehand. Some of those items will never be obtainable as they only provide a technical purpose. The information shown per item are as complete as the rest of this website. When new features get added, the details in here will expand as well."),p(),m(6,"button",5),O("click",function(){fe(r);let i=f();return ue(i.hideImportantNote())}),d(7,"Got it!"),p()()()}}function En(n,t){if(n&1){let r=ge();m(0,"app-item-icon",10),O("click",function(){let i=fe(r),a=i.$implicit,l=i.$index,h=f(3);return ue(h.showDetails(a,l))}),p()}if(n&2){let r=t.$implicit,e=f(3);H("selected-icon",(e.selectedItem==null?null:e.selectedItem.id)===r.id),s("itemName",r.iconName)}}function Sn(n,t){n&1&&He(0)}function Fn(n,t){if(n&1&&(ie(0,En,1,3,"app-item-icon",11,Be().trackById),g(2,Sn,1,0,"ng-container",9)),n&2){let r=f(2);ne(0,r.filteredItems),o(2),s("ngIf",r.initialItemLoad())}}function wn(n,t){if(n&1&&(m(0,"mat-form-field",6),c(1,"input",7),p(),m(2,"div",8),g(3,Fn,3,1,"ng-container"),je(4,"async"),p()),n&2){let r=f();o(1),s("formControl",r.searchTermControl),o(2),u(3,Le(4,2,r.filteredItems$)?3:-1)}}function Tn(n,t){n&1&&c(0,"mat-spinner",12)}var gi=(()=>{let t=class t{constructor(e,i,a,l,h,F){this._route=e,this._router=i,this._database=a,this._appRef=l,this._injector=h,this._title=F,this.searchTermControl=new ut("",{nonNullable:!0}),this.shouldHideImportantNote=!1,this.filteredItems=[],this.allPrefetched=!1,this._localStorageHideNoteKey="databaseHideImportantNote",this._didInitialLoad=!1,this._database.getDatabaseDetails().pipe(X(()=>this.allPrefetched=!0),J(1)).subscribe(),this.shouldHideImportantNote=z(localStorage.getItem(this._localStorageHideNoteKey)),this.items=a.getItems().filter(S=>Qe(S.id)===Ze.BASE);let B=le(S=>{let j=/tag:(?<tag>[a-zA-Z.]+)/gm.exec(S)?.groups?.tag.replace("tag:","").toLocaleLowerCase()??"",V=S.replace("tag:"+j,"").toLocaleLowerCase().trim(),q=this.items.filter(P=>{let ve=!0;return j&&(ve=!!P.tags?.some(Ci=>Ci.toLocaleLowerCase().includes(j))),ve?P.displayName.toLocaleLowerCase().includes(V)||V.startsWith("item_")&&P.id.startsWith(V):!1});return this.filteredItems=q,q});this.filteredItems$=Ie(this._route.queryParams.pipe(le(S=>{let k=S.q??"";return this.searchTermControl.setValue(k,{emitEvent:!1}),k}),B,J(1)),this.searchTermControl.valueChanges.pipe(Ee(300),X(S=>{this.updateQueryParam(S),document.getElementById("database-details")?.remove()}),B))}showDetails(e,i,a=!1){this.updateRouteParam(e.id),this.selectedItem=void 0,document.getElementById("database-details")?.remove();let l=document.getElementById("grid");if(!l)return;let F=window.getComputedStyle(l).getPropertyValue("grid-template-columns").split(" ").length,B=Math.floor(i/F),S=Math.min(this.filteredItems.length,(B+1)*F),k=document.querySelector(`#grid app-item-icon:nth-of-type(${S})`);if(!k)return;let W=this.createComponent(e);this.insertAfter(W,k),this.selectedItem=e,a&&setTimeout(()=>document.getElementById("database-details")?.scrollIntoView(!0),0)}insertAfter(e,i){i.parentNode?.insertBefore(e.location.nativeElement,i.nextSibling),this._appRef.attachView(e.hostView)}createComponent(e){let i=qe(li,{environmentInjector:this._injector});i.setInput("item",e);let a=i.location.nativeElement;return a.id="database-details",i}hideImportantNote(){this.shouldHideImportantNote=!0,localStorage.setItem(this._localStorageHideNoteKey,"true")}updateQueryParam(e){this._router.navigate([],{relativeTo:this._route,queryParams:{q:e},queryParamsHandling:"merge",replaceUrl:!0})}updateRouteParam(e){this._router.navigate(["..",e],{relativeTo:this._route,replaceUrl:!0,queryParamsHandling:"preserve"}).then(()=>!!this.selectedItem&&this.updateTitle(this.selectedItem.displayName))}initialItemLoad(){this._didInitialLoad||this._route.params.pipe(X(e=>{let i=e.itemId;if(this._didInitialLoad=!0,!i)return;let a=this.filteredItems.findIndex(l=>l.id===i);if(a>-1)this.showDetails(this.filteredItems[a],a,!0);else if(this.filteredItems.length===0){let l=this.items.findIndex(h=>h.id===i);if(l>-1){let h=this.items[l];this._setGridContent(h)}}}),J(1)).subscribe()}_setGridContent(e){let i=this.createComponent(e);document.getElementById("grid")?.appendChild(i.location.nativeElement),this._appRef.attachView(i.hostView),this.selectedItem=e}trackById(e,i){return i.id}updateTitle(e){let i=this._title.getTitle();i&&this._title.setTitle(`${e} - ${i}`)}};t.\u0275fac=function(i){return new(i||t)(E(Ye),E(Je),E(se),E(Ve),E(Me),E(ze))},t.\u0275cmp=b({type:t,selectors:[["app-database"]],decls:4,vars:3,consts:[[1,"container","mx-auto","pb-6","database-grid","px-2"],["class","my-3"],["class","text-white mx-auto my-5"],[1,"my-3"],[1,"prose","lg:prose-xl"],[1,"btn","btn-secondary",3,"click"],[1,"btn","my-3"],["matInput","","placeholder","Search term",1,"placeholder:text-white",3,"formControl"],["id","grid",1,"grid","gap-4","icon-grid"],[4,"ngIf"],[1,"icon-grid-item",3,"itemName","click"],["class","icon-grid-item",3,"selected-icon","itemName"],[1,"text-white","mx-auto","my-5"]],template:function(i,a){i&1&&(m(0,"div",0),g(1,In,8,0,"app-card",1)(2,wn,5,4)(3,Tn,1,0,"mat-spinner",2),p()),i&2&&(o(1),u(1,a.shouldHideImportantNote?-1:1),o(1),u(2,a.allPrefetched?2:-1),o(1),u(3,a.allPrefetched?-1:3))},dependencies:[Ge,Z,me,pt,ui,mt,ct,ht,nt,Ue],encapsulation:2});let n=t;return n})();var Mn=[{path:"",component:gi,title:"Database"}],bi=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=N({type:t}),t.\u0275inj=A({imports:[Ce.forChild(Mn),Ce]});let n=t;return n})();var cr=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=N({type:t}),t.\u0275inj=A({imports:[$e,bi,Rt,Y,hi,bt,at,zt,Ut,$t,Ht,Mt,Tt]});let n=t;return n})();export{cr as DatabaseModule};
