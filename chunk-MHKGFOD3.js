import{a as Te}from"./chunk-YFIS4XOU.js";import{a as ne,b as oe}from"./chunk-LHFBWDNO.js";import{a as ye}from"./chunk-GVL7J5HO.js";import{$d as ge,Aa as d,B as O,Cc as re,Dc as ae,Ea as Y,Eb as S,Ec as pe,Fc as H,G as k,Ga as J,Ha as s,J as I,K as C,L as F,La as Q,Lc as ce,Mc as me,Na as B,O as R,Oa as c,Oc as le,P as z,Pa as T,Qa as v,Ra as D,Sb as w,Vb as ee,Xa as X,Xb as te,Ya as h,Za as y,Zb as ie,_b as G,_d as fe,ac as q,bc as $,ce as xe,da as n,de as _e,ea as W,ee as ue,fe as ve,h as A,he as Ce,k as K,md as se,n as U,na as f,nb as P,ne as he,pa as N,pb as M,s as V,ta as g,tb as Z,td as de,ua as l,va as x,wa as _,xa as u,ya as o,za as r}from"./chunk-IDSY5RWV.js";var Ee=(()=>{let t=class t{constructor(){this.uiIcons=S,this.isNPCListActive=!1,this.router=I(ie),this.updateIsNPCListActive(this.router.url),this.router.events.pipe(ye(),V(a=>a instanceof ee)).subscribe({next:a=>{this.updateIsNPCListActive(a.urlAfterRedirects)}})}updateIsNPCListActive(a){this.isNPCListActive=a.startsWith("/npcs/")&&!a.includes("overview")&&!a.includes("gifting")}};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=C({type:t,selectors:[["app-people"]],decls:7,vars:3,consts:[["routerLink","overview",3,"active","uiIcon"],["routerLink","gifting",3,"uiIcon"],[1,"hidden"]],template:function(p,m){p&1&&(o(0,"app-sidebar-container")(1,"app-module-sidebar")(2,"app-module-sidebar-item",0),c(3,"NPC List "),r(),o(4,"app-module-sidebar-item",1),c(5,"Gifting"),r()(),d(6,"router-outlet",2),r()),p&2&&(n(2),f("active",m.isNPCListActive)("uiIcon",m.uiIcons.NEUTRAL),n(2),f("uiIcon",m.uiIcons.GIFTING))},dependencies:[te,G,pe,ae,se],encapsulation:2});let e=t;return e})();function $e(e,t){if(e&1&&d(0,"app-inline-minimal-item",3),e&2){let i=s().$implicit;f("minimalItem",i.item)}}function He(e,t){if(e&1&&(o(0,"span"),c(1),h(2,"addSpacesToPascalCase"),r()),e&2){let i=s().$implicit;n(1),v("All ",y(2,1,i.categoryName),"")}}function Le(e,t){if(e&1&&g(0,$e,1,1,"app-inline-minimal-item",3)(1,He,3,3,"span"),e&2){let i=t.$implicit;l(0,i.type==="item"?0:-1),n(1),l(1,i.type==="category"?1:-1)}}function Be(e,t){if(e&1&&(o(0,"div",0),d(1,"app-ui-icon",1),c(2),r(),o(3,"div",2),_(4,Le,2,2,null,null,x),r()),e&2){let i=s().$implicit,a=s();n(1),f("uiIcon",i.icon),n(1),v(" ",i.label," "),u(4,a.preferences[i.preferenceField])}}function De(e,t){if(e&1&&g(0,Be,6,2),e&2){let i=t.$implicit,a=s();l(0,a.preferences[i.preferenceField].length?0:-1)}}var L=(()=>{let t=class t{constructor(){this.setCssClass=!0,this.preferencesMap=Te}};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=C({type:t,selectors:[["app-gifting-grid"]],hostVars:2,hostBindings:function(p,m){p&2&&N("gifting-preference-grid",m.setCssClass)},inputs:{preferences:"preferences"},decls:2,vars:0,consts:[[1,"font-semibold","flex","items-center","sm:flex-col","sm:pr-10","mb-1","text-black"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],[1,"gifting-gifts-grid"],[3,"minimalItem"]],template:function(p,m){p&1&&_(0,De,1,1,null,null,x),p&2&&u(0,m.preferencesMap)},dependencies:[$,de,le],styles:[`.gifting-preference-grid{margin-bottom:2rem;margin-top:.25rem;display:grid;grid-template-columns:repeat(1,minmax(0,1fr));font-size:1.25rem;line-height:1.75rem}@media (min-width: 640px){.gifting-preference-grid{row-gap:.75rem}}.gifting-gifts-grid{margin-top:.25rem;margin-bottom:1rem;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));align-items:center;gap:.5rem}@media (min-width: 640px){.gifting-preference-grid{grid-template-columns:min-content 1fr}.gifting-gifts-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
`],encapsulation:2});let e=t;return e})();function je(e,t){if(e&1&&d(0,"app-ui-icon",9),e&2){let i=s(2).$implicit,a=s(2);Q("matTooltip","",i.npc==null?null:i.npc.characterName," is dateable"),f("uiIcon",a.uiIcon.LOVE)}}function Ae(e,t){if(e&1&&(o(0,"div",10),d(1,"app-ui-icon",11),c(2),h(3,"ingameDate"),r()),e&2){let i=s(2).$implicit,a=s(2);n(1),f("uiIcon",a.uiIcon.BIRTHDAY),n(1),v(" ",y(3,2,i.npc.birthday)," ")}}function Ke(e,t){if(e&1&&(d(0,"app-item-icon",4),o(1,"div",5)(2,"div",6),c(3),g(4,je,1,2,"app-ui-icon",7),r(),g(5,Ae,4,4,"div",8),r()),e&2){let i=s().$implicit;f("itemName",i.preferences.npc.iconName),n(3),v(" ",i.preferences.npc.characterName," "),n(1),l(4,i.npc!=null&&i.npc.isDateable?4:-1),n(1),l(5,i.npc&&i.npc.birthday?5:-1)}}function Ue(e,t){e&1&&c(0,`
Universal
`)}function Ve(e,t){if(e&1&&(o(0,"div")(1,"div",2),g(2,Ke,6,4)(3,Ue,1,0),r(),d(4,"app-gifting-grid",3),r()),e&2){let i=t.$implicit;n(2),l(2,i.preferences.npc?2:-1),n(1),l(3,i.preferences.mapKey==="ci_universal"?3:-1),n(1),f("preferences",i.preferences)}}function Oe(e,t){e&1&&(o(0,"app-card",1),_(1,Ve,5,3,"div",null,x),r()),e&2&&u(1,t)}var Ie=(()=>{let t=class t{constructor(){this.uiIcon=S,this._database=I(w),this.gifting$=U({gifts:this._database.fetchGiftingPreferences$(),npcs:this._database.fetchNPCs$()}).pipe(O(({gifts:a,npcs:p})=>{let m=a.map(E=>({preferences:E,npc:p.find(Pe=>Pe.key===E.mapKey)}));return A(m)}))}};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=C({type:t,selectors:[["app-gifting"]],decls:2,vars:3,consts:[["class","text-xl gifting-card"],[1,"text-xl","gifting-card"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[3,"preferences"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],["class","!text-gifting !h-6 !w-6",3,"uiIcon","matTooltip"],["class","text-lg flex gap-2"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"!h-6","!w-6",3,"uiIcon"]],template:function(p,m){if(p&1&&(g(0,Oe,3,0,"app-card",0),h(1,"async")),p&2){let E;l(0,(E=y(1,1,m.gifting$))?0:-1,E)}},dependencies:[$,re,H,ce,L,P,fe],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}.gifting-card{max-width:1100px;margin:8px}@screen 2xl{.gifting-card {margin: 60px 40px 60px 60px;}}
`],encapsulation:2});let e=t;return e})();function Re(e,t){e&1&&(o(0,"div",8),c(1,"unofficial head portrait"),r())}var ze=e=>["..",e];function We(e,t){if(e&1&&(o(0,"a",2),d(1,"div",3),o(2,"div",4),d(3,"app-npc-head-portrait",5),r(),o(4,"div",6)(5,"div",7),c(6),r(),g(7,Re,2,0,"div",8),r()()),e&2){let i=t.$implicit;f("routerLink",X(5,ze,i.key)),n(3),f("npcKey",i.key)("portraitName",i.headerPortraitFileName),n(3),T(i.characterName),n(1),l(7,i.customHead?7:-1)}}function Ye(e,t){e&1&&(o(0,"div",1),_(1,We,8,7,"a",9,x),r()),e&2&&u(1,t)}var Se=(()=>{let t=class t{constructor(a){this._database=a,this.npcs$=this._database.fetchNPCs$()}};t.\u0275fac=function(p){return new(p||t)(W(w))},t.\u0275cmp=C({type:t,selectors:[["app-npc-list"]],decls:2,vars:3,consts:[["class","grid npc-list-grid gap-x-4 gap-y-10 px-2 xl:px-[50px] w-full pt-2 pb-6 2xl:pt-[60px]"],[1,"grid","npc-list-grid","gap-x-4","gap-y-10","px-2","xl:px-[50px]","w-full","pt-2","pb-6","2xl:pt-[60px]"],[1,"flex","bg-[#F5F1E6]","rounded-[30px]","npc-list-entry","group","relative",3,"routerLink"],[1,"frame","absolute","inset-0","rounded-[30px]","z-10"],[1,"basis-2/5","aspect-square","bg-[#F1E1CC]","rounded-l-[30px]","group-hover:bg-[#F2DBB7]"],[1,"z-20","flex","h-full","relative","rounded-l-[30px]",3,"npcKey","portraitName"],[1,"basis-3/5","p-2","flex","flex-col"],[1,"text-black","font-semibold","text-2xl","mt-3"],["clasS","mt-auto"],["class","flex bg-[#F5F1E6] rounded-[30px] npc-list-entry group relative ",3,"routerLink"]],template:function(p,m){if(p&1&&(g(0,Ye,3,0,"div",0),h(1,"async")),p&2){let E;l(0,(E=y(1,1,m.npcs$))?0:-1,E)}},dependencies:[G,_e,P],styles:[`.npc-list-entry .npc-head-portrait{display:flex;align-items:flex-end}.npc-list-entry .npc-head-portrait img{object-fit:cover;object-position:bottom;border-top-left-radius:30px;border-bottom-left-radius:30px;height:110%;margin-top:-9.0909090909%}.frame{box-shadow:inset 0 0 1px #e4b383;transition:box-shadow .2s ease-out}.npc-list-entry:hover .frame{box-shadow:inset 0 0 1px 10px #e4b383}.npc-list-entry:hover .npc-head-portrait img{height:120%;margin-top:-18.1818181818%}.npc-list-grid{grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}
`],encapsulation:2});let e=t;return e})();function Je(e,t){if(e&1&&(o(0,"div",1),c(1),r()),e&2){let i=t.$implicit;n(1),D("",i.key," : ",i.value?"Has to be seen":"Has to be unseen","")}}function Qe(e,t){if(e&1&&(_(0,Je,2,2,"div",3,x),h(2,"keyvalue")),e&2){let i=t.$implicit;u(0,y(2,0,i))}}function Xe(e,t){if(e&1&&(o(0,"div"),c(1,"Other cutscenes requirements: "),_(2,Qe,3,2,null,null,x),r()),e&2){let i=s();u(2,i.heartEventTrigger.otherCutscenesState)}}function Ze(e,t){if(e&1&&(o(0,"div"),c(1,"Only on days: "),o(2,"span",1),c(3),r()()),e&2){let i=s();n(3),T(i.heartEventTrigger.specificDay.join(", "))}}function et(e,t){if(e&1&&(o(0,"div"),c(1,"Only in seasons: "),o(2,"span",1),c(3),r()()),e&2){let i=s();n(3),T(i.heartEventTrigger.specificMonth.join(", "))}}function tt(e,t){if(e&1&&(o(0,"div"),c(1,"Only with weather: "),o(2,"span",1),c(3),r()()),e&2){let i=s();n(3),T(i.heartEventTrigger.specificWeather.join(", "))}}function it(e,t){if(e&1&&d(0,"app-effect",7),e&2){let i=t.$implicit;f("effect",i)}}function nt(e,t){if(e&1&&(o(0,"div",4)(1,"span",5),c(2,"Effects when seen"),r(),o(3,"div",6),_(4,it,1,1,"app-effect",7,x),r()()),e&2){let i=s();u(4,i.heartEventTrigger.effects)}}function ot(e,t){if(e&1&&c(0),e&2){let i=s(2);v(" Unlock requirements (",i.heartEventTrigger.requirements.type==="And"?"all":"any"," of them): ")}}function rt(e,t){e&1&&c(0," Unlock requirement: ")}function at(e,t){if(e&1&&d(0,"app-requirements",8),e&2){let i=t.$implicit;f("requirement",i)}}function pt(e,t){if(e&1&&(o(0,"div",4)(1,"span",5),g(2,ot,1,1)(3,rt,1,0),r(),o(4,"div",6),_(5,at,1,1,"app-requirements",8,x),r()()),e&2){let i=s();n(2),l(2,i.heartEventTrigger.requirements.requirements.length>1?2:-1),n(1),l(3,i.heartEventTrigger.requirements.requirements.length<2?3:-1),u(5,i.heartEventTrigger.requirements.requirements)}}var we=(()=>{let t=class t{};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=C({type:t,selectors:[["app-heart-event-trigger"]],inputs:{heartEventTrigger:"heartEventTrigger"},decls:29,vars:17,consts:[[1,"flex","flex-col","text-black","mb-1"],[1,"text-black"],["class","my-4"],["class","text-black"],[1,"my-4"],[1,"text-lg","text-black"],[1,"flex","flex-col","text-black"],[3,"effect"],[3,"requirement"]],template:function(p,m){p&1&&(o(0,"header",0)(1,"h4"),c(2),r(),o(3,"span"),c(4),r()(),o(5,"div"),c(6,"Enabled: "),o(7,"span",1),c(8),r()(),o(9,"div"),c(10,"Location: "),o(11,"span",1),c(12),r()(),o(13,"div"),c(14,"Day Time of day: "),o(15,"span",1),c(16),h(17,"ingameTime"),h(18,"ingameTime"),r()(),o(19,"div"),c(20,"Can trigger on the same day: "),o(21,"span",1),c(22),r()(),g(23,Xe,4,0,"div")(24,Ze,4,1,"div")(25,et,4,1,"div")(26,tt,4,1,"div")(27,nt,6,0,"div",2)(28,pt,7,2,"div",2)),p&2&&(n(2),T(m.heartEventTrigger.cutscene),n(2),v("Id: ",m.heartEventTrigger.id," "),n(4),T(m.heartEventTrigger.enabled?"Yes":"No"),n(4),T(m.heartEventTrigger.location),n(4),D(" ",y(17,13,m.heartEventTrigger.time.fromTime),"-",y(18,15,m.heartEventTrigger.time.toTime),`
`),n(6),T(m.heartEventTrigger.canTriggerSameDay?"Yes":"No"),n(1),l(23,m.heartEventTrigger.otherCutscenesState.length?23:-1),n(1),l(24,m.heartEventTrigger.specificDay.length?24:-1),n(1),l(25,m.heartEventTrigger.specificMonth.length?25:-1),n(1),l(26,m.heartEventTrigger.specificWeather.length?26:-1),n(1),l(27,m.heartEventTrigger.effects&&m.heartEventTrigger.effects.length?27:-1),n(1),l(28,m.heartEventTrigger.requirements&&m.heartEventTrigger.requirements.requirements.length?28:-1))},dependencies:[ue,ve,M,ge],styles:["[_nghost-%COMP%]{display:block}"]});let e=t;return e})();function mt(e,t){e&1&&d(0,"hr",6)}function lt(e,t){if(e&1&&(d(0,"app-heart-event-trigger",4),g(1,mt,1,0,"hr",5)),e&2){let i=t.$implicit,a=t.$index,p=t.$count;N("mb-3",a===p-1),f("heartEventTrigger",i),n(1),l(1,a!==p-1?1:-1)}}function st(e,t){if(e&1){let i=Y();o(0,"app-expandable",0,1)(2,"h3",2),J("click",function(){R(i);let p=B(1);return z(p.toggle())}),c(3),d(4,"i",3),r(),_(5,lt,2,4,null,null,x),r()}if(e&2){let i=t.$implicit,a=B(1);n(3),v(" ",i.heartLevel," hearts event "),n(1),N("down",!a.open)("up",a.open),u(5,i.trigger)}}var Ne=(()=>{let t=class t{};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=C({type:t,selectors:[["app-heart-events"]],inputs:{heartEvents:"heartEvents"},decls:2,vars:0,consts:[[1,"bg-amber-50/70","px-4","rounded-lg","mb-3","shadow-sm"],["expandable",""],["expandableHeader","",1,"text-xl","text-black","flex","items-center","justify-between","cursor-pointer","py-4",3,"click"],[1,"arrow"],[3,"heartEventTrigger"],["class","my-3"],[1,"my-3"],["class","bg-amber-50/70 px-4 rounded-lg mb-3 shadow-sm"]],template:function(p,m){p&1&&_(0,st,7,5,"app-expandable",7,x),p&2&&u(0,m.heartEvents)},dependencies:[Ce,we],encapsulation:2});let e=t;return e})();function ft(e,t){if(e&1&&d(0,"app-gifting-grid",4),e&2){let i=s(2);f("preferences",i.giftingPreferences)}}function gt(e,t){if(e&1&&(o(0,"p",8),c(1),r()),e&2){let i=s(2);n(1),v(" ",i.npc.characterName," has no specialized preferences. ")}}function xt(e,t){if(e&1&&d(0,"app-heart-events",7),e&2){let i=s(2);f("heartEvents",i.heartEvents)}}function _t(e,t){if(e&1&&(o(0,"p",8),c(1),r()),e&2){let i=s(2);n(1),v(" ",i.npc.characterName," has no heart events. ")}}function ut(e,t){if(e&1&&(o(0,"div",12),d(1,"app-npc-portrait",13),o(2,"span",14),c(3),r()()),e&2){let i=t.$implicit,a=s(5);n(1),f("npcKey",a.npc.key)("portraitName",i.value),n(2),T(i.key)}}function vt(e,t){if(e&1&&(o(0,"div",9)(1,"h3",10),c(2),r(),o(3,"div",11),_(4,ut,4,3,"div",15,x),h(6,"keyvalue"),r()()),e&2){let i=t.$implicit;n(2),T(i.key),u(4,y(6,1,i.value))}}function Ct(e,t){if(e&1&&_(0,vt,7,3,"div",16,x),e&2){let i=s();u(0,i)}}function ht(e,t){if(e&1&&(o(0,"p",8),c(1),r()),e&2){let i=s(3);n(1),v(" ",i.npc.characterName," has no appearances. ")}}function yt(e,t){e&1&&g(0,Ct,2,0)(1,ht,2,1,"p",5),e&2&&(l(0,t.length?0:-1),n(1),l(1,t.length?-1:1))}function Tt(e,t){if(e&1&&(o(0,"div",1)(1,"h1",2),c(2),r(),o(3,"app-card")(4,"h2",3),c(5," Gifting "),r(),g(6,ft,1,1,"app-gifting-grid",4)(7,gt,2,1,"p",5),r(),o(8,"app-card",6)(9,"h2",3),c(10," Heart events "),r(),g(11,xt,1,1,"app-heart-events",7)(12,_t,2,1,"p",5),r(),o(13,"app-card",6)(14,"h2",3),c(15," Appearances "),r(),g(16,yt,2,2),h(17,"keyvalue"),r()()),e&2){let i=s(),a;n(2),v(" ",i.npc.characterName," "),n(4),l(6,i.giftingPreferences?6:-1),n(1),l(7,i.giftingPreferences?-1:7),n(4),l(11,i.heartEvents.length?11:-1),n(1),l(12,i.heartEvents.length?-1:12),n(4),l(16,(a=y(17,6,i.npc.appearances))?16:-1,a)}}function Et(e,t){e&1&&(o(0,"app-card",1)(1,"h1",17),c(2," NPC not found. "),r()())}function bt(e,t){e&1&&d(0,"mat-spinner",18)}var ke=(()=>{let t=class t{constructor(){this.npc=null,this.heartEvents=[],this.UiIcon=S,this._database=I(w)}ngOnInit(){K([this._database.fetchNPCs$(),this._database.fetchHeartEvents$(),this._database.fetchGiftingPreferences$()]).subscribe({next:([a,p,m])=>{this.npc=a.find(E=>E.key.toLowerCase()===this.npcKey.toLowerCase()),this.heartEvents=p[this.npcKey.toLowerCase()]??[],this.giftingPreferences=m.find(E=>E.mapKey.toLowerCase()===this.npc?.key.toLowerCase())}})}};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=C({type:t,selectors:[["app-npc"]],inputs:{npcKey:"npcKey"},decls:3,vars:1,consts:[["class","npc-wrapper"],[1,"npc-wrapper"],[1,"mb-4","font-semibold","text-3xl","text-white"],[1,"mb-4","font-semibold","text-2xl","text-black"],[3,"preferences"],["class","text-black text-lg"],[1,"mt-6"],[3,"heartEvents"],[1,"text-black","text-lg"],[1,"font-semibold","text-black","mb-6"],[1,"text-xl"],[1,"grid","portrait-grid","gap-4"],[1,"flex","flex-col","shadow-lg","p-2"],[1,"h-[400px]","flex","items-end","justify-center",3,"npcKey","portraitName"],[1,""],["class","flex flex-col shadow-lg p-2"],["class","font-semibold text-black mb-6"],[1,"mb-4","font-semibold","text-3xl","text-black","flex","items-center","gap-x-4"],[1,"mx-auto"]],template:function(p,m){p&1&&g(0,Tt,18,8,"div",0)(1,Et,3,0)(2,bt,1,0),p&2&&l(0,m.npc?0:m.npc===void 0?1:m.npc===null?2:-1)},dependencies:[H,xe,ne,Ne,L,M],styles:[`.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.portrait-grid .npc-portrait img{max-height:400px}@screen xl{.portrait-grid {grid-template-columns: repeat(auto-fill,minmax(200px,1fr));}}.npc-wrapper{max-width:1160px;margin:8px}@screen 2xl{.npc-wrapper {margin: 60px 40px 60px 60px;}}
`],encapsulation:2});let e=t;return e})();var It=[{path:"",pathMatch:"full",redirectTo:"overview"},{path:"",component:Ee,children:[{path:"gifting",component:Ie,title:"Gifting - NPCs"},{path:"overview",component:Se,title:"Overview - NPCs"},{path:":npcKey",component:ke}]}],Fe=(()=>{let t=class t{};t.\u0275fac=function(p){return new(p||t)},t.\u0275mod=F({type:t}),t.\u0275inj=k({imports:[q.forChild(It),q]});let e=t;return e})();var Bi=(()=>{let t=class t{};t.\u0275fac=function(p){return new(p||t)},t.\u0275mod=F({type:t}),t.\u0275inj=k({imports:[Z,Fe,he,me,oe]});let e=t;return e})();export{Bi as NPCsModule};
