import{a as ot}from"./chunk-UGARK3XH.js";import{a as dt}from"./chunk-CNGTZL5L.js";import{b as ut}from"./chunk-ZTQ5H4AK.js";import{a as v,b as it}from"./chunk-XM5TMCIA.js";import{a as nt,b as ft}from"./chunk-2X4VBXSB.js";import{a as ct}from"./chunk-OSPXUHDU.js";import"./chunk-JGF6KBFK.js";import{b as rt}from"./chunk-6RIBLOFG.js";import{a as lt}from"./chunk-MIYI73V7.js";import{a as st}from"./chunk-CQLB3BS5.js";import{a as pt,b as mt}from"./chunk-WIAGADDS.js";import{a as at}from"./chunk-6GEEHTPV.js";import{a as G}from"./chunk-7XMK33P5.js";import{a as et}from"./chunk-QZ7J64SB.js";import"./chunk-RHRTBMBA.js";import"./chunk-GLL3PL4Q.js";import"./chunk-QEWZLHID.js";import{a as Qe,b as ze}from"./chunk-2K3GEZZY.js";import"./chunk-7A5ZJ3YN.js";import{b as Ke}from"./chunk-2A7PSW7O.js";import"./chunk-VO65IASJ.js";import{a as tt}from"./chunk-3XEJSXH2.js";import"./chunk-6U3KUFDH.js";import"./chunk-OM3WRHFD.js";import{a as ee,b as te,c as ae,d as ne,e as ie,f as oe,g as re,h as pe,i as me,j as se,k as le,l as Ze,m as Je,n as Xe,o as de}from"./chunk-JSGVWV7K.js";import{b as H}from"./chunk-VYOS5CGL.js";import{a as We,e as Ye}from"./chunk-RZQ3UNDK.js";import"./chunk-DKARO4CX.js";import{c as Ne,g as $e,l as Ae,p as Ve,w as Oe}from"./chunk-DHAI4KFY.js";import"./chunk-5MLMU7SK.js";import{b as O}from"./chunk-GEWE6M22.js";import{e as Pe}from"./chunk-SJRCRC22.js";import{a as X}from"./chunk-X3TMHFY3.js";import{c as je}from"./chunk-EE6A4D3O.js";import{a as ke}from"./chunk-2CFRUPNI.js";import{a as Ue}from"./chunk-F6RS7OIB.js";import{c as Ge,g as qe}from"./chunk-KW5235UB.js";import{a as Le}from"./chunk-7JOAVXDE.js";import{c as Be}from"./chunk-7SDYZQX7.js";import{a as He}from"./chunk-KUYOE2KN.js";import"./chunk-AJOFB37Q.js";import{$b as j,Ac as g,Ba as k,Bc as y,E as ge,Eb as De,Ec as V,G as z,Gc as L,Hb as Z,Hc as P,Ib as r,Kb as N,Nb as Ie,Ob as f,Qa as ve,Qb as $,Rb as R,Sb as B,Tb as p,Ub as o,Vb as d,Wb as F,X as ue,Xb as M,Yb as Se,Zb as Ce,_c as Fe,ac as u,bc as Te,cc as Ee,db as n,ea as E,ia as be,ja as ye,jd as Me,ld as J,ma as W,na as Y,nd as Re,p as fe,pc as C,qa as _,rc as l,sb as b,sc as A,t as xe,tc as Q,uc as we,wb as x,yb as c,zc as S}from"./chunk-GYX7HZX3.js";import{a as he,b as _e}from"./chunk-4CLCTAJ7.js";var D=(()=>{class e{constructor(){this.databaseItem=k.required(),this.database=E(O)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=b({type:e,selectors:[["ng-component"]],inputs:{databaseItem:[1,"databaseItem"]},decls:0,vars:0,template:function(a,i){},encapsulation:2})}}return e})();var Bt=["*"],I=(()=>{class e{constructor(){this.templateRef=k.required()}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-database-header-button"]],inputs:{templateRef:[1,"templateRef"]},ngContentSelectors:Bt,decls:4,vars:6,consts:[["mat-button","",1,"hover:bg-black/10",3,"click"],[1,"flex","gap-x-2","items-center"],[1,"arrow"]],template:function(a,i){a&1&&(Te(),p(0,"button",0),j("click",function(){return i.templateRef().toggle()}),p(1,"div",1),Ee(2),d(3,"i",2),o()()),a&2&&(n(3),N("down",!i.templateRef().isOpen())("translate-y-[-3px]",i.templateRef().isOpen())("up",i.templateRef().isOpen()))},encapsulation:2})}}return e})();function Lt(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be dropped from enemies "),o()(),d(5,"app-bestiary-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var bt=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-bestiary"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&(S(0),c(1,Lt,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().fromEnemies);n(),f(s&&s.length?1:-1)}},dependencies:[v,I,tt],encapsulation:2})}}return e})();function Pt(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is result of upgrade "),o()(),d(5,"app-item-upgrade-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}function Ht(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is used as requirement in "),o()(),d(5,"app-item-upgrade-table",4),o()),e&2){let t=C(1);u();let a=y(1);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var Ct=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-item-upgrade"]],features:[x],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&(S(0)(1),c(2,Pt,6,2,"app-expandable",1)(3,Ht,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().isUpgradeResult);n();let h=g(i.databaseItem().isUpgradeRequirement);n(),f(s&&s.length?2:-1),n(),f(h&&h.length?3:-1)}},dependencies:[v,I,nt],encapsulation:2})}}return e})();function Nt(e,m){if(e&1&&(p(0,"td",14),d(1,"app-ui-icon",15),o()),e&2){let t=m.$implicit;n(),r("uiIcon",t.pref.icon)}}function $t(e,m){e&1&&(p(0,"th",16),l(1,"Preference"),o()),e&2&&Z("colspan",2)}function At(e,m){if(e&1&&(p(0,"td",17),l(1),o()),e&2){let t=m.$implicit;n(),Q(" ",t.pref.label," ")}}function Vt(e,m){e&1&&(p(0,"th",16),l(1,"NPCs"),o())}function Ot(e,m){if(e&1&&(p(0,"div",21),d(1,"app-item-icon",22),l(2),o()),e&2){let t=m.$implicit,a=m.$index,i=m.$count;N("mr-4",a!==i-1),n(),r("itemName",t.iconName),n(),Q(" ",t.characterName," ")}}function Gt(e,m){if(e&1&&(p(0,"td",18)(1,"div",19),R(2,Ot,3,4,"div",20,$),o()()),e&2){let t=m.$implicit;n(2),B(t.npcs)}}function qt(e,m){e&1&&d(0,"tr",23)}function Ut(e,m){e&1&&d(0,"tr",24)}function jt(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Gifting"),o()(),p(5,"app-responsive-table")(6,"table",4),F(7,5),c(8,Nt,2,1,"td",6),M(),F(9,7),c(10,$t,2,1,"th",8)(11,At,2,1,"td",9),M(),F(12,10),c(13,Vt,2,0,"th",8)(14,Gt,4,0,"td",11),M(),c(15,qt,1,0,"tr",12)(16,Ut,1,0,"tr",13),o()()()),e&2){let t=C(1),a=u(),i=y(0);n(3),r("templateRef",t),n(3),r("dataSource",i),n(9),r("matHeaderRowDef",a.displayedHeaderColumns)("matHeaderRowDefSticky",!0),n(),r("matRowDefColumns",a.displayedColumns)}}var ht=(()=>{class e extends D{constructor(){super(...arguments),this.displayedHeaderColumns=["preference","npcs"],this.displayedColumns=["icon",...this.displayedHeaderColumns],this.favoritePreferences=[],this.lovePreferences=[],this.likePreferences=[],this.neutralPreferences=[],this.dislikePreferences=[],this.hatePreferences=[],this.dataSource=[],this.keys=["favoritePreferences","lovePreferences","likePreferences","neutralPreferences","dislikePreferences","hatePreferences"]}ngOnInit(){let t=this.databaseItem().item;if(!t)return;this.database.getGiftingPreferences().forEach(i=>{this.keys.forEach(s=>{i[s].findIndex(w=>w.type==="item"&&t.id===w.item.id)!==-1&&i.npc&&this[s].push(i.npc)})}),this.keys.forEach(i=>{let s=this[i];s.length&&this.dataSource.push({pref:it.find(h=>h.preferenceField===i),npcs:s})})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-gifts"]],hostAttrs:[1,"database-gifts"],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["mat-table","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 !pt-3 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","preference"],["class","backdrop-blur-xl","mat-header-cell","",4,"matHeaderCellDef"],["class","text-col !pl-0 whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","npcs"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","!pt-3","w-10","text-center","icon-col"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],["mat-header-cell","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","!pl-0","whitespace-nowrap"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"inline-flex","shrink-0","items-center",3,"mr-4"],[1,"inline-flex","shrink-0","items-center"],[1,"h-12","mr-2","!flex","items-center","shrink-0",3,"itemName"],["mat-header-row",""],["mat-row",""]],template:function(a,i){if(a&1&&(S(0),c(1,jt,17,5,"app-expandable",1)),a&2){let s=g(i.databaseItem().asGift);n(),f(s&&s.length?1:-1)}},dependencies:[v,de,le,ee,ae,re,ne,te,pe,ie,oe,me,se,Ue,H,I],styles:[`.database-gifts .app-responsive-table .app-item-icon>img{aspect-ratio:unset;width:auto;max-height:3rem}
`],encapsulation:2})}}return e})();function Qt(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at festival"),o()(),d(5,"app-festival-shop-item-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var _t=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-festival-shop-data"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&(S(0),c(1,Qt,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().buyAtFestivalShop);n(),f(s&&s.length?1:-1)}},dependencies:[v,I,ot],encapsulation:2})}}return e})();function Kt(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Used to craft"),o()(),d(5,"app-inventory-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}function zt(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Crafting recipe"),o()(),d(5,"app-inventory-table",4),o()),e&2){let t=C(1);u();let a=y(1);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var xt=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-crafting"]],features:[x],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&(S(0)(1),c(2,Kt,6,2,"app-expandable",1)(3,zt,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().usedToCraft);n();let h=g(i.databaseItem().craftedFrom);n(),f(s&&s.length?2:-1),n(),f(h&&h.length?3:-1)}},dependencies:[v,I,rt],encapsulation:2})}}return e})();function Wt(e,m){if(e&1&&(p(0,"td",14),d(1,"app-item-icon",15),o()),e&2){let t=m.$implicit;n(),r("itemName",t.item==null?null:t.item.iconName)}}function Yt(e,m){e&1&&(p(0,"th",16),l(1," Output "),o()),e&2&&Z("colspan",2)}function Zt(e,m){if(e&1&&(p(0,"td",17),l(1),o()),e&2){let t=m.$implicit;n(),we("",t.item==null?null:t.item.displayName," (",t.amount,") ")}}function Jt(e,m){e&1&&(p(0,"th",18),l(1," Ingredients"),o())}function Xt(e,m){e&1&&d(0,"hr",22)}function ea(e,m){if(e&1&&(d(0,"app-table-item-list",20),c(1,Xt,1,0,"hr",22)),e&2){let t=m.$implicit,a=m.$index,i=m.$count;r("itemList",t),n(),f(a!==i-1?1:-1)}}function ta(e,m){if(e&1&&(p(0,"span",21),l(1," Either of the following"),o(),R(2,ea,2,2,null,null,$)),e&2){let t=u().$implicit;n(2),B(t.eitherOrIngredients)}}function aa(e,m){if(e&1&&(p(0,"div",24),d(1,"app-item-icon",26),p(2,"span",27),l(3),o()()),e&2){let t=u().$implicit;n(),r("itemName",t.iconName),n(2),A(t.displayName)}}function na(e,m){if(e&1&&(p(0,"div",23),c(1,aa,4,2,"div",24),p(2,"div",25),l(3),o()()),e&2){let t=m.$implicit,a=u().$implicit;n(),f(t?1:-1),n(2),Q("as ",a.key," ")}}function ia(e,m){if(e&1&&(R(0,na,4,2,"div",23,$),L(2,"castToMinimalItemArray")),e&2){let t=m.$implicit;B(P(2,0,t.value))}}function oa(e,m){if(e&1&&(p(0,"span",21),l(1," The following counting as"),o(),R(2,ia,3,2,null,null,$),L(4,"keyvalue")),e&2){let t=u().$implicit;n(2),B(P(4,0,t.additionsToGenerics))}}function ra(e,m){if(e&1&&(p(0,"td",19),d(1,"app-table-item-list",20),L(2,"cookingRecipeIngredients"),c(3,ta,4,0)(4,oa,5,2),o()),e&2){let t=m.$implicit;n(),r("itemList",P(2,3,t)),n(2),f(t.eitherOrIngredients.length?3:-1),n(),f(t.additionsToGenerics?4:-1)}}function pa(e,m){e&1&&(p(0,"th",28),l(1," Sell price"),o())}function ma(e,m){if(e&1&&(p(0,"td",29),d(1,"app-money",30),o()),e&2){let t=m.$implicit;n(),r("amount",t.item.sellPrice)}}function sa(e,m){e&1&&d(0,"tr",31)}function la(e,m){e&1&&d(0,"tr",32)}function da(e,m){if(e&1&&(p(0,"table",0),F(1,1),c(2,Wt,2,1,"td",2),M(),F(3,3),c(4,Yt,2,1,"th",4)(5,Zt,2,2,"td",5),M(),F(6,6),c(7,Jt,2,0,"th",7)(8,ra,5,5,"td",8),M(),F(9,9),c(10,pa,2,0,"th",10)(11,ma,2,1,"td",11),M(),c(12,sa,1,0,"tr",12)(13,la,1,0,"tr",13),o()),e&2){let t=u();r("dataSource",t.matDataSource),n(12),r("matHeaderRowDef",t.displayHeaderColumns)("matHeaderRowDefSticky",!0),n(),r("matRowDefColumns",t.displayedColumns)}}var gt=(()=>{class e extends Xe{constructor(){super(...arguments),this.BASE_DISPLAY_COLUMNS=["icon","outputName","ingredients","sellPrice"],this.sortingDataAccessor=(t,a)=>{let i=this.sortHelper(t.item,a);return i!==null?i:0}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-mixing-table"]],features:[x],decls:2,vars:1,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0  w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","outputName"],["class","backdrop-blur-xl","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","ingredients"],["mat-header-cell","",4,"matHeaderCellDef"],["class","list-col","mat-cell","",4,"matCellDef"],["matColumnDef","sellPrice"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col !text-right w-[1%]","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","w-10","text-center","icon-col"],[3,"itemName"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","whitespace-nowrap"],["mat-header-cell",""],["mat-cell","",1,"list-col"],[1,"mb-3",3,"itemList"],[1,"text-black","mt-1"],[1,"my-5"],[1,"flex","justify-between","mb-1"],[1,"flex","gap-x-3","items-center"],[1,"ml-2","flex","items-center","whitespace-nowrap"],[1,"!w-7",3,"itemName"],[1,"whitespace-nowrap"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],["mat-cell","",1,"text-col","!text-right","w-[1%]"],[3,"amount"],["mat-header-row",""],["mat-row",""]],template:function(a,i){a&1&&(p(0,"app-responsive-table"),c(1,da,14,4,"table",0),o()),a&2&&(n(),f(i.matDataSource?1:-1))},dependencies:[Re,Ze,Je,de,H,pt,at,Ke,mt,le,ee,ae,re,ne,te,pe,ie,oe,me,se],encapsulation:2})}}return e})();function ca(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in mixing "),o()(),d(5,"app-mixing-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}function fa(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Mixing recipe"),o()(),d(5,"app-mixing-table",4),o()),e&2){let t=C(1);u();let a=y(1);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var yt=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-mixing"]],features:[x],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&(S(0)(1),c(2,ca,6,2,"app-expandable",1)(3,fa,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().usedToMix);n();let h=g(i.databaseItem().mixedFrom);n(),f(s&&s.length?2:-1),n(),f(h&&h.length?3:-1)}},dependencies:[v,I,gt],encapsulation:2})}}return e})();function ua(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in cooking "),o()(),d(5,"app-cooking-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}function ba(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Cooking recipe"),o()(),d(5,"app-cooking-table",4),o()),e&2){let t=C(1);u();let a=y(1);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var vt=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-cooking"]],features:[x],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showUtensil","",3,"dataSource"]],template:function(a,i){if(a&1&&(S(0)(1),c(2,ua,6,2,"app-expandable",1)(3,ba,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().usedToCook);n();let h=g(i.databaseItem().cookedFrom);n(),f(s&&s.length?2:-1),n(),f(h&&h.length?3:-1)}},dependencies:[v,I,st],encapsulation:2})}}return e})();function Ca(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in processing "),o()(),d(5,"app-processor-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}function ha(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Processing"),o()(),d(5,"app-processor-table",4),o()),e&2){let t=C(1);u();let a=y(1);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var Dt=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-artisan"]],features:[x],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showProcessor","",3,"dataSource"]],template:function(a,i){if(a&1&&(S(0)(1),c(2,Ca,6,2,"app-expandable",1)(3,ha,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().artisanIngredient);n();let h=g(i.databaseItem().artisanResult);n(),f(s&&s.length?2:-1),n(),f(h&&h.length?3:-1)}},dependencies:[v,I,lt],encapsulation:2})}}return e})();var _a=e=>[e];function xa(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Ocean critters"),o()(),d(5,"app-caught-table",4),o()),e&2){let t=C(1);n(3),r("templateRef",t),n(2),r("dataSource",V(2,_a,m))}}var It=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-sea-critters"]],features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&c(0,xa,6,4,"app-expandable",1),a&2){let s;f((s=i.databaseItem().oceanCritter)?0:-1,s)}},dependencies:[v,I,G],encapsulation:2})}}return e})();var ga=e=>[e];function ya(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Bugs and insects "),o()(),d(5,"app-caught-table",4),o()),e&2){let t=C(1);n(3),r("templateRef",t),n(2),r("dataSource",V(2,ga,m))}}var St=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-insects"]],features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&c(0,ya,6,4,"app-expandable",1),a&2){let s;f((s=i.databaseItem().insect)?0:-1,s)}},dependencies:[v,I,G],encapsulation:2})}}return e})();var va=e=>[e];function Da(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Fishing"),o()(),d(5,"app-caught-table",4),o()),e&2){let t=C(1),a=u();n(3),r("templateRef",t),n(2),r("dataSource",V(2,va,a.fish))}}var Tt=(()=>{class e extends D{ngOnInit(){let t=this.databaseItem().fish;t&&(this.fish=_e(he({},t),{item:this.databaseItem().item}))}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-fishing"]],features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){a&1&&c(0,Da,6,4,"app-expandable",1),a&2&&f(i.fish?0:-1)},dependencies:[G,I,v],encapsulation:2})}}return e})();function Ia(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Seed for"),o()(),d(5,"app-crop-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}function Sa(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"From seed"),o()(),d(5,"app-crop-table",4),o()),e&2){let t=C(1);u();let a=y(1);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var Et=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-crops"]],features:[x],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&(S(0)(1),c(2,Ia,6,2,"app-expandable",1)(3,Sa,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().comesFromSeed);n();let h=g(i.databaseItem().isSeedFor);n(),f(s&&s.length?2:-1),n(),f(h&&h.length?3:-1)}},dependencies:[v,I,et],encapsulation:2})}}return e})();function Ta(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Required for offering "),o()(),d(5,"app-offerings-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}function Ea(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Offering reward"),o()(),d(5,"app-offerings-table",4),o()),e&2){let t=C(1);u();let a=y(1);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var wt=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-offerings"]],features:[x],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showAltar","",3,"dataSource"]],template:function(a,i){if(a&1&&(S(0)(1),c(2,Ta,6,2,"app-expandable",1)(3,Ea,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().requiredAsOffering);n();let h=g(i.databaseItem().isBundleRewardIn);n(),f(s&&s.length?2:-1),n(),f(h&&h.length?3:-1)}},dependencies:[v,I,dt],encapsulation:2})}}return e})();function wa(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at"),o()(),d(5,"app-shop-item-data-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var Ft=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-shop-data"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&(S(0),c(1,wa,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().buyAt);n(),f(s&&s.length?1:-1)}},dependencies:[v,I,ct],encapsulation:2})}}return e})();function Fa(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Chance as processing result "),o()(),d(5,"app-shop-item-process-table",4),o()),e&2){let t=C(1);u();let a=y(1);n(3),r("templateRef",t),n(2),r("dataSource",a)}}function Ma(e,m){if(e&1&&(p(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be processed at "),o()(),d(5,"app-shop-item-process-table",4),o()),e&2){let t=C(1);u();let a=y(0);n(3),r("templateRef",t),n(2),r("dataSource",a)}}var Mt=(()=>{class e extends D{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_(e)))(i||e)}})()}static{this.\u0275cmp=b({type:e,selectors:[["app-database-shop-item-process"]],features:[x],decls:4,vars:4,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(a,i){if(a&1&&(S(0)(1),c(2,Fa,6,2,"app-expandable",1)(3,Ma,6,2,"app-expandable",1)),a&2){let s=g(i.databaseItem().asProcessInput);n();let h=g(i.databaseItem().chanceAsProcessResult);n(),f(h&&h.length?2:-1),n(),f(s&&s.length?3:-1)}},dependencies:[v,I,ft],encapsulation:2})}}return e})();function Ra(e,m){if(e&1&&(p(0,"app-card")(1,"header",0),d(2,"app-item-icon",1),p(3,"div",2)(4,"h2",3),l(5),o(),p(6,"span"),l(7),o()(),p(8,"div",4),d(9,"app-to-do-toggle",5),o(),d(10,"div",6)(11,"app-quality-grid",7),o(),p(12,"p",8),l(13),o(),p(14,"div",9),l(15,"There's currently no data for this item. :("),o(),d(16,"app-database-shop-item-process",10)(17,"app-database-shop-data",10)(18,"app-database-offerings",10)(19,"app-database-crops",10)(20,"app-database-fishing",10)(21,"app-database-insects",10)(22,"app-database-sea-critters",10)(23,"app-database-artisan",10)(24,"app-database-cooking",10)(25,"app-database-mixing",10)(26,"app-database-crafting",10)(27,"app-database-festival-shop-data",10)(28,"app-database-gifts",10)(29,"app-database-item-upgrade",10)(30,"app-database-bestiary",10),o()),e&2){let t=m;n(2),r("itemName",t.item.iconName),n(3),A(t.item.displayName),n(2),A(t.item.id),n(2),r("item",t.item),n(2),r("showOnlyBase",!t.item.qualities.bronze)("item",t.item),n(2),A(t.item.description),n(3),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t),n(),r("databaseItem",t)}}function Ba(e,m){e&1&&(p(0,"app-card"),d(1,"mat-spinner",11),o())}function La(e,m){if(e&1&&(c(0,Ra,31,22,"app-card"),L(1,"async"),c(2,Ba,2,0,"app-card")),e&2){let t,a=u();f((t=P(1,1,a.databaseItem$))?0:2,t)}}var Rt=(()=>{class e{constructor(){this.item=k.required(),this.#e=E(O)}#e;ngOnInit(){this.databaseItem$=this.#e.fetchDatabaseItem$(this.item().id)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-database-details"]],hostAttrs:[1,"col-span-full","database-details"],inputs:{item:[1,"item"]},decls:1,vars:1,consts:[[1,"flex","items-center","flex-wrap","mb-5"],[1,"mr-3","w-14",3,"itemName"],[1,"flex","flex-col","gap-0.5"],[1,"!my-0","font-semibold","text-xl","text-black"],[1,"card-actions","ml-4"],["context","database",3,"item"],[1,"h-0","w-full","md:hidden"],["includePrices","",1,"md:ml-auto","mt-4","md:mt-0","quality-grid","inline-block","w-fit",3,"showOnlyBase","item"],[1,"text-lg"],[1,"empty-details","text-black","my-5","text-lg"],[3,"databaseItem"],[1,"mx-auto"]],template:function(a,i){a&1&&c(0,La,3,3),a&2&&f(i.databaseItem$?0:-1)},dependencies:[bt,Ct,ht,_t,xt,yt,vt,Dt,It,St,Tt,Et,wt,Ft,Mt,ze,Qe,H,X,J,je],styles:[`.database-details .empty-details{display:none}.database-details:not(:has(.database-header)) .empty-details{display:block}.database-details .expandable-body{transition:none}.quality-grid .app-item-icon>img{height:3.5rem}.database-header{color:#000;font-weight:600;font-size:1.25em;margin-top:1.2em;line-height:1.6}
`],encapsulation:2})}}return e})();function Pa(e,m){if(e&1){let t=Ce();p(0,"app-card",1)(1,"div",5)(2,"h2"),l(3,"Important note"),o(),p(4,"p"),l(5,"The item list loads a lot of stuff, this may take a while. The list below shows everything, that got not filtered beforehand. Some of those items will never be obtainable as they only provide a technical purpose. The information shown per item are as complete as the rest of this website. When new features get added, the details in here will expand as well."),o(),p(6,"button",6),j("click",function(){W(t);let i=u();return Y(i.hideImportantNote())}),l(7,"Got it!"),o()()()}}function Ha(e,m){if(e&1){let t=Ce();p(0,"app-item-icon",9),j("mouseenter",function(){let i=W(t).$implicit,s=u(2);return Y(s.prefetchItem(i))})("click",function(){let i=W(t),s=i.$implicit,h=i.$index,w=u(2);return Y(w.showDetails(s,h))}),o()}if(e&2){let t=m.$implicit,a=u(2);N("selected-icon",(a.selectedItem==null?null:a.selectedItem.id)===t.id),r("itemName",t.iconName)}}function ka(e,m){e&1&&Se(0)}function Na(e,m){if(e&1&&(R(0,Ha,1,3,"app-item-icon",7,Ie().trackById,!0),c(2,ka,1,0,"ng-container",8)),e&2){let t=u();B(t.filteredItems),n(2),r("ngIf",t.initialItemLoad())}}var go=(()=>{class e{constructor(){this.localStorage=E(He),this.searchTermControl=new Ae("",{nonNullable:!0}),this.shouldHideImportantNote=!1,this.filteredItems=[],this.environmentInjector=E(be),this._route=E(Ge),this._router=E(qe),this._database=E(O),this._appRef=E(De),this._injector=E(be),this._title=E(Be),this._localStorageHideNoteKey="databaseHideImportantNote",this._didInitialLoad=!1,this.shouldHideImportantNote=ke(this.localStorage.getItem(this._localStorageHideNoteKey)),this.items=this._database.getItems().filter(a=>Pe(a.id)===Le.BASE);let t=fe(a=>{let h=/tag:(?<tag>[a-zA-Z.]+)/gm.exec(a)?.groups?.tag.replace("tag:","").toLocaleLowerCase()??"",w=a.replace("tag:"+h,"").toLocaleLowerCase().trim(),K=this.items.filter(q=>{let U=!0;return h&&(U=!!q.tags?.some(ce=>ce.toLocaleLowerCase().includes(h))),U?q.displayName.toLocaleLowerCase().includes(w)||w.startsWith("item_")&&q.id.startsWith(w):!1});return this.filteredItems=K,K});this.filteredItems$=xe(this._route.queryParams.pipe(fe(a=>{let i=a.q??"";return this.searchTermControl.setValue(i,{emitEvent:!1}),i}),t,z(1)),this.searchTermControl.valueChanges.pipe(ge(300),ue(a=>{this.updateQueryParam(a),document.getElementById("database-details")?.remove()}),t))}showDetails(t,a,i=!1){this.updateRouteParam(t.id),this.selectedItem=void 0,document.getElementById("database-details")?.remove();let s=document.getElementById("grid");if(!s)return;let w=window.getComputedStyle(s).getPropertyValue("grid-template-columns").split(" ").length,K=Math.floor(a/w),q=Math.min(this.filteredItems.length,(K+1)*w),U=document.querySelector(`#grid app-item-icon:nth-of-type(${q})`);if(!U)return;let ce=this.createComponent(t);this.insertAfter(ce,U),this.selectedItem=t,i&&setTimeout(()=>document.getElementById("database-details")?.scrollIntoView(!0),0)}insertAfter(t,a){a.parentNode?.insertBefore(t.location.nativeElement,a.nextSibling),this._appRef.attachView(t.hostView)}createComponent(t){let a=Fe(Rt,{environmentInjector:this._injector});a.setInput("item",t);let i=a.location.nativeElement;return i.id="database-details",a}hideImportantNote(){this.shouldHideImportantNote=!0,this.localStorage.setItem(this._localStorageHideNoteKey,"true")}updateQueryParam(t){this._router.navigate([],{relativeTo:this._route,queryParams:{q:t},queryParamsHandling:"merge",replaceUrl:!0})}updateRouteParam(t){this._router.navigate(["/database",t],{relativeTo:this._route,replaceUrl:!0,queryParamsHandling:"preserve"}).then(()=>!!this.selectedItem&&this.updateTitle(this.selectedItem.displayName))}initialItemLoad(){this._didInitialLoad||this._route.params.pipe(ue(t=>{let a=t.itemId;if(this._didInitialLoad=!0,!a)return;let i=this.filteredItems.findIndex(s=>s.id===a);if(i>-1)ye(this.environmentInjector,()=>{ve(()=>this.showDetails(this.filteredItems[i],i,!0))});else if(this.filteredItems.length===0){let s=this.items.findIndex(h=>h.id===a);if(s>-1){let h=this.items[s];this._setGridContent(h)}}}),z(1)).subscribe()}trackById(t,a){return a.id}prefetchItem(t){this._database.fetchDatabaseItem$(t.id).pipe(z(1)).subscribe()}updateTitle(t){let a=this._title.getTitle();a&&this._title.setTitle(`${t} - ${a}`)}_setGridContent(t){let a=this.createComponent(t);document.getElementById("grid")?.appendChild(a.location.nativeElement),this._appRef.attachView(a.hostView),this.selectedItem=t}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-database"]],decls:9,vars:5,consts:[[1,"container","mx-auto","pb-6","database-grid","px-2"],[1,"my-3"],[1,"semi-transparent-form-field","my-3"],["matInput","",3,"formControl"],["id","grid",1,"icon-grid"],[1,"prose","lg:prose-xl"],[1,"btn","btn-secondary",3,"click"],[1,"icon-grid-item",3,"selected-icon","itemName"],[4,"ngIf"],[1,"icon-grid-item",3,"mouseenter","click","itemName"]],template:function(a,i){a&1&&(p(0,"div",0),c(1,Pa,8,0,"app-card",1),p(2,"mat-form-field",2)(3,"mat-label"),l(4,"Search term"),o(),d(5,"input",3),o(),p(6,"div",4),c(7,Na,3,1),L(8,"async"),o()()),a&2&&(n(),f(i.shouldHideImportantNote?-1:1),n(4),r("formControl",i.searchTermControl),n(2),f(P(8,3,i.filteredItems$)?7:-1))},dependencies:[We,Ye,X,Oe,Ne,$e,Ve,J,H,Me,ut],encapsulation:2})}}return e})();export{go as DatabaseComponent};
