import{a as dt}from"./chunk-JR3OWFSB.js";import"./chunk-DJJM56ZO.js";import"./chunk-BXTOJMVQ.js";import{a as lt}from"./chunk-J6FEW64S.js";import{a as st}from"./chunk-QPFAQETZ.js";import{f as mt}from"./chunk-Q77MVE3N.js";import{a as le}from"./chunk-GFZ3GXV4.js";import{q as Q,r as W}from"./chunk-P2CUJNKY.js";import{a as ve}from"./chunk-SXAGLLPG.js";import{a as de,b as Qe}from"./chunk-XQPE2UHH.js";import{Aa as d,Ab as O,Bd as me,Ca as q,E as Me,Ed as Ue,Fa as s,Fb as Oe,Ga as g,Gd as Re,Ha as C,Ia as h,Ib as Ae,Id as ze,Ja as a,Jd as se,K as X,Ka as r,Kb as oe,La as f,Ld as be,Md as A,N as B,Ob as re,Od as fe,P as b,Pa as $,Pd as We,Q as Z,Qd as Ye,Ra as M,Rd as ue,Sa as l,Te as it,Ue as R,V as L,Vc as pe,Vd as U,Ve as he,W as V,Wa as j,Wd as Je,Ye as z,Z as Pe,Zb as G,Ze as nt,_d as Xe,ab as ie,af as ot,bb as ne,be as Ze,bf as rt,ca as Le,cb as K,cf as at,d as E,db as m,df as pt,e as F,ea as Ve,eb as T,ee as _e,f as k,fb as x,ff as xe,gb as Te,ge,id as qe,j as J,je as et,ka as n,le as Ce,lf as ct,m as we,mb as He,md as je,ob as Be,p as Fe,pb as $e,pc as ae,qb as I,qe as tt,ra as Ge,rb as N,rd as ce,sa as ee,ta as te,u as ke,ud as Ke,v as De,wa as u}from"./chunk-7OO4UOQI.js";var ft=(()=>{let i=class i{constructor(){this.uiIcons=G,this.isNPCListActive=!1,this.router=B(ze),this.updateIsNPCListActive(this.router.url),this.router.events.pipe(it(),ke(o=>o instanceof Ue)).subscribe({next:o=>{this.updateIsNPCListActive(o.urlAfterRedirects)}})}updateIsNPCListActive(o){this.isNPCListActive=o.startsWith("/npcs/")&&!o.includes("overview")&&!o.includes("gifting")}};i.\u0275fac=function(p){return new(p||i)},i.\u0275cmp=b({type:i,selectors:[["app-people"]],decls:7,vars:3,consts:[["routerLink","overview",3,"active","uiIcon"],["routerLink","gifting",3,"uiIcon"],[1,"hidden"]],template:function(p,c){p&1&&(a(0,"app-sidebar-container")(1,"app-module-sidebar")(2,"app-module-sidebar-item",0),m(3,"NPC List "),r(),a(4,"app-module-sidebar-item",1),m(5,"Gifting"),r()(),f(6,"router-outlet",2),r()),p&2&&(n(2),d("active",c.isNPCListActive)("uiIcon",c.uiIcons.NEUTRAL),n(2),d("uiIcon",c.uiIcons.GIFTING))},dependencies:[Re,se,Ye,We,et],encapsulation:2});let e=i;return e})();var Ie=[{displayName:"Default",value:"default"},{displayName:"Alphabetical",value:"alphabetical"},{displayName:"Birthdate",value:"birthdate"}],Yi=Ie.map(e=>e.value);function St(e,i){if(e&1&&(a(0,"mat-option",4),m(1),r()),e&2){let t=i.$implicit;d("value",t.value),n(),T(t.displayName)}}var D=(()=>{let i=class i{constructor(){this.searchControl=new ce("",{nonNullable:!0}),this.sortControl=new ce("default",{nonNullable:!0}),this.sortOrderControl=new ce("asc",{nonNullable:!0}),this.searchValueChanges=R(this.searchControl.valueChanges,{initialValue:""}),this.sortValueChanges=R(this.sortControl.valueChanges,{initialValue:"default"}),this.sortOrderValueChanges=R(this.sortOrderControl.valueChanges,{initialValue:"asc"}),this.npcSortOptions=Ie}};i.\u0275fac=function(p){return new(p||i)},i.\u0275cmp=b({type:i,selectors:[["app-npc-filter"]],standalone:!0,features:[He],decls:11,vars:2,consts:[[1,"mb-5","flex","gap-x-3","gap-y-4","flex-wrap"],[1,"semi-transparent-form-field","grow","lg:grow-0","shrink-0","basis-auto"],["matInput","",3,"formControl"],["disableOptionCentering","",3,"formControl"],[3,"value"]],template:function(p,c){p&1&&(a(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),m(3,"Search term"),r(),f(4,"input",2),r(),a(5,"mat-form-field",1)(6,"mat-label"),m(7,"Sorting"),r(),a(8,"mat-select",3),C(9,St,2,2,"mat-option",4,g),r()()()),p&2&&(n(4),d("formControl",c.searchControl),n(4),d("formControl",c.sortControl),n(),h(c.npcSortOptions))},dependencies:[re,_e,st,Ze,pe,ge,me,qe,je,Ke],encapsulation:2});let e=i;return e})();var _t=new Map([["Spring",100],["Summer",200],["Fall",300],["Winter",400]]);function ye(e,i,t){switch(t){case"alphabetical":e=[...e].sort((o,p)=>{let c="characterName"in o?o.characterName:o.npc?.characterName??"",_="characterName"in p?p.characterName:p.npc?.characterName??"";return c.toLowerCase()==="universal"?1:_.toLowerCase()==="universal"?-1:c.localeCompare(_)});break;case"birthdate":e=[...e].sort((o,p)=>{let c="characterName"in o?o.characterName:o.npc?.characterName??"",_="characterName"in p?p.characterName:p.npc?.characterName??"";if(c.toLowerCase()==="universal")return 1;if(_.toLowerCase()==="universal")return-1;let P="npc"in o?o.npc?.birthday:o.birthday,S="npc"in p?p.npc?.birthday:p.birthday;if(!P&&S)return 1;if(P&&!S)return-1;if(!P&&!S)return 0;P=P,S=S;let v=(_t.get(P.season)??0)+P.day,y=(_t.get(S.season)??0)+S.day;return v-y});break}return i?e.filter(o=>("characterName"in o?o.characterName:o.npc?.characterName??"").toLowerCase().includes(i)):e}function wt(e,i){if(e&1){let t=$();a(0,"app-inline-minimal-item",4),M("click",function(){L(t);let p=l().$implicit,c=l(3);return V(c.itemClicked.emit(p.item))}),r()}if(e&2){let t=l().$implicit;d("minimalItem",t.item)}}function Ft(e,i){if(e&1&&(a(0,"span"),m(1),I(2,"addSpacesToPascalCase"),r()),e&2){let t=l().$implicit;n(),x("All ",N(2,1,t.categoryName),"")}}function kt(e,i){if(e&1&&u(0,wt,1,1,"app-inline-minimal-item",3)(1,Ft,3,3,"span"),e&2){let t=i.$implicit;s(t.type==="item"?0:-1),n(),s(t.type==="category"?1:-1)}}function Dt(e,i){if(e&1&&(a(0,"div",0),f(1,"app-ui-icon",1),m(2),r(),a(3,"div",2),C(4,kt,2,2,null,null,g),r()),e&2){let t=l().$implicit,o=l();n(),d("uiIcon",t.icon),n(),x(" ",t.label," "),n(2),h(o.preferences[t.preferenceField])}}function Mt(e,i){if(e&1&&u(0,Dt,6,2),e&2){let t=i.$implicit,o=l();s(o.preferences[t.preferenceField].length?0:-1)}}var Ee=(()=>{let i=class i{constructor(){this.setCssClass=!0,this.itemClicked=new Ve,this.preferencesMap=lt}};i.\u0275fac=function(p){return new(p||i)},i.\u0275cmp=b({type:i,selectors:[["app-gifting-grid"]],hostVars:2,hostBindings:function(p,c){p&2&&q("gifting-preference-grid",c.setCssClass)},inputs:{preferences:"preferences"},outputs:{itemClicked:"itemClicked"},decls:2,vars:0,consts:[[1,"font-semibold","flex","items-center","sm:flex-col","sm:pr-10","mb-1","text-black"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],[1,"gifting-gifts-grid"],[1,"cursor-pointer",3,"minimalItem"],[1,"cursor-pointer",3,"click","minimalItem"]],template:function(p,c){p&1&&C(0,Mt,1,1,null,null,g),p&2&&h(c.preferencesMap)},dependencies:[tt,A,Xe],styles:[`.gifting-preference-grid{margin-top:.25rem;display:grid;grid-template-columns:repeat(1,minmax(0,1fr));font-size:1.25rem;line-height:1.75rem}@media (min-width: 640px){.gifting-preference-grid{row-gap:.75rem}}.gifting-gifts-grid{margin-top:.25rem;margin-bottom:1rem;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));align-items:center;gap:.5rem}@media (min-width: 640px){.gifting-preference-grid{grid-template-columns:min-content 1fr}.gifting-gifts-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
`],encapsulation:2});let e=i;return e})();function Ot(e,i){if(e&1&&f(0,"app-offering",4),e&2){let t=i.$implicit;d("details",t)}}function At(e,i){if(e&1&&(a(0,"app-item-card-switch",1),u(1,Ot,1,1,"ng-template",3),r()),e&2){let t=l();d("item",t.selectedEntity)}}function qt(e,i){if(e&1&&f(0,"app-ui-icon",13),e&2){let t=l(2).$implicit,o=l(2);j("matTooltip","",t.npc==null?null:t.npc.characterName," is dateable"),d("uiIcon",o.uiIcon.LOVE)}}function jt(e,i){if(e&1&&(a(0,"div",14),f(1,"app-ui-icon",15),m(2),I(3,"ingameDate"),r()),e&2){let t=l(2).$implicit,o=l(2);n(),d("uiIcon",o.uiIcon.BIRTHDAY),n(),x(" ",N(3,2,t.npc.birthday)," ")}}function Kt(e,i){if(e&1&&(f(0,"app-item-icon",10),a(1,"div",11)(2,"div",12),m(3),u(4,qt,1,3,"app-ui-icon",13),r(),u(5,jt,4,4,"div",14),r()),e&2){let t=l().$implicit;d("itemName",t.preferences.npc.iconName),n(3),x(" ",t.preferences.npc.characterName," "),n(),s(t.npc!=null&&t.npc.isDateable?4:-1),n(),s(t.npc&&t.npc.birthday?5:-1)}}function Ut(e,i){e&1&&m(0," Universal ")}function Rt(e,i){if(e&1){let t=$();a(0,"app-expandable",5,0)(2,"div",6),M("click",function(){L(t);let p=K(1);return V(p.toggle())}),a(3,"div",7),u(4,Kt,6,4)(5,Ut,1,0),r(),f(6,"i",8),r(),a(7,"app-gifting-grid",9),M("itemClicked",function(p){L(t);let c=l(2);return V(c.showDetails(p))}),r()()}if(e&2){let t=i.$implicit,o=K(1);n(4),s(t.preferences.npc?4:-1),n(),s(t.preferences.mapKey==="ci_universal"?5:-1),n(),q("down",!o.open)("translate-y-[-3px]",o.open)("up",o.open),n(),d("preferences",t.preferences)}}function zt(e,i){if(e&1&&(a(0,"app-card",2),C(1,Rt,8,9,"app-expandable",5,g),r()),e&2){let t=l();n(),h(t.filteredAndSortedNpcs())}}var xt=(()=>{var i,t,o,p,c;let _=class _ extends he{constructor(){super();F(this,i);F(this,t);F(this,o);F(this,p);F(this,c);this.npcFilter=ee(D),this.uiIcon=G,k(this,i,O(()=>this.npcFilter()?.searchValueChanges()??"")),k(this,t,O(()=>this.npcFilter()?.sortValueChanges()??"default")),k(this,o,ye),k(this,p,Ge(void 0)),this.filteredAndSortedNpcs=O(()=>{let v=E(this,p).call(this)??[];if(!E(this,i)||!E(this,t))return v;let y=E(this,i).call(this).toLowerCase(),w=E(this,t).call(this);return E(this,o).call(this,v,y,w)}),k(this,c,B(ae)),this.gifting$=Fe({gifts:E(this,c).fetchGiftingPreferences$(),npcs:E(this,c).fetchNPCs$()}).pipe(Me(({gifts:v,npcs:y})=>{let w=v.map(Y=>({preferences:Y,npc:y.find(It=>It.key===Y.mapKey)}));return E(this,p)?.set(w),J(w)}))}};i=new WeakMap,t=new WeakMap,o=new WeakMap,p=new WeakMap,c=new WeakMap,_.\u0275fac=function(y){return new(y||_)},_.\u0275cmp=b({type:_,selectors:[["app-gifting"]],viewQuery:function(y,w){y&1&&ie(w.npcFilter,D,5),y&2&&ne()},features:[te],decls:5,vars:4,consts:[["expandableComponent",""],["listDetail","",3,"item"],[1,"text-xl"],["appDatabaseItemDetails",""],[3,"details"],["open","",1,"mb-8"],["expandableHeader","",1,"flex","justify-between","items-center","cursor-pointer",3,"click"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[1,"arrow"],[3,"itemClicked","preferences"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"!h-6","!w-6",3,"uiIcon"]],template:function(y,w){if(y&1&&(a(0,"app-list-detail-container"),u(1,At,2,1,"app-item-card-switch",1),f(2,"app-npc-filter"),u(3,zt,3,0,"app-card",2),I(4,"async"),r()),y&2){let Y;n(),s(w.selectedEntity?1:-1),n(2),s((Y=N(4,2,w.gifting$))?3:-1,Y)}},dependencies:[fe,ue,Ce,xe,U,D,ve,Q,W,A,Ee,Ae,z],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}
`],encapsulation:2});let e=_;return e})();var Wt=e=>["..",e],Yt=(e,i)=>({"line-clamp-2":e,"line-clamp-1":i});function Jt(e,i){if(e&1&&f(0,"app-ui-icon",11),e&2){let t=l().$implicit,o=l(2);j("matTooltip","",t.characterName," is dateable"),d("uiIcon",o.uiIcon.LOVE)}}function Xt(e,i){if(e&1&&(a(0,"div",12),f(1,"app-ui-icon",15),m(2),I(3,"ingameDate"),r()),e&2){let t=l().$implicit,o=l(2);n(),d("uiIcon",o.uiIcon.BIRTHDAY),n(),x(" ",N(3,2,t.birthday)," ")}}function Zt(e,i){e&1&&(a(0,"div",14),m(1,"unofficial head portrait"),r())}function ei(e,i){if(e&1&&(a(0,"a",4),f(1,"div",5),a(2,"div",6),f(3,"app-npc-head-portrait",7),r(),a(4,"div",8)(5,"div",9)(6,"span",10),m(7),r(),u(8,Jt,1,3,"app-ui-icon",11),r(),u(9,Xt,4,4,"div",12),a(10,"div",13),m(11),r(),u(12,Zt,2,0,"div",14),r()()),e&2){let t=i.$implicit;d("routerLink",Be(9,Wt,t.key)),n(3),d("npcKey",t.key)("portraitName",t.headerPortraitFileName),n(4),T(t.characterName),n(),s(t.isDateable?8:-1),n(),s(t.birthday?9:-1),n(),d("ngClass",$e(11,Yt,!t.customHead,t.customHead)),n(),T(t.description),n(),s(t.customHead?12:-1)}}function ti(e,i){e&1&&(a(0,"div",2),C(1,ei,13,14,"a",4,g),r()),e&2&&(n(),h(i))}function ii(e,i){e&1&&f(0,"mat-spinner",3)}var vt=(()=>{var i,t,o,p,c;let _=class _{constructor(){F(this,i);F(this,t);F(this,o);F(this,p);F(this,c);this.npcFilter=ee(D),this.uiIcon=G,k(this,i,O(()=>this.npcFilter()?.searchValueChanges()??"")),k(this,t,O(()=>this.npcFilter()?.sortValueChanges()??"default")),k(this,o,ye),this.filteredAndSortedNpcs=O(()=>{let S=E(this,p).call(this)??[];if(!E(this,i)||!E(this,t))return S;let v=E(this,i).call(this).toLowerCase(),y=E(this,t).call(this);return E(this,o).call(this,S,v,y)}),k(this,c,B(ae)),k(this,p,R(E(this,c).fetchNPCs$().pipe(De(()=>J([])))))}};i=new WeakMap,t=new WeakMap,o=new WeakMap,p=new WeakMap,c=new WeakMap,_.\u0275fac=function(v){return new(v||_)},_.\u0275cmp=b({type:_,selectors:[["app-npc-list"]],viewQuery:function(v,y){v&1&&ie(y.npcFilter,D,5),v&2&&ne()},decls:4,vars:1,consts:[[1,"px-main-hz","py-main-vt"],[1,"z-30","relative"],[1,"grid","npc-list-grid","gap-x-4","gap-y-10"],[1,"mx-auto"],[1,"flex","bg-[#F5F1E6]","rounded-[30px]","npc-list-entry","group","relative",3,"routerLink"],[1,"frame","absolute","inset-0","rounded-[30px]","z-10","pointer-events-none"],[1,"basis-2/5","aspect-square","bg-[#F1E1CC]","rounded-l-[30px]","group-hover:bg-[#F2DBB7]"],[1,"z-20","flex","h-full","relative","rounded-l-[30px]",3,"npcKey","portraitName"],[1,"basis-3/5","p-2","flex","flex-col"],[1,"inline-flex","gap-2","mt-3","items-center"],[1,"text-black","font-semibold","text-2xl"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2","items-center"],[3,"ngClass"],["clasS","mt-auto"],[1,"!w-5","!h-5",3,"uiIcon"]],template:function(v,y){if(v&1&&(a(0,"div",0),f(1,"app-npc-filter",1),u(2,ti,3,0,"div",2)(3,ii,1,0,"mat-spinner",3),r()),v&2){let w;n(2),s((w=y.filteredAndSortedNpcs())?2:3,w)}},dependencies:[Oe,se,rt,U,de,D,A,z],styles:[`.npc-list-entry .npc-head-portrait{display:flex;align-items:flex-end}.npc-list-entry .npc-head-portrait img{object-fit:cover;object-position:bottom;border-top-left-radius:30px;border-bottom-left-radius:30px;height:110%;margin-top:-9.0909090909%}.frame{box-shadow:inset 0 0 1px #e4b383;transition:box-shadow .2s ease-out}.npc-list-entry:hover .frame{box-shadow:inset 0 0 1px 10px #e4b383}.npc-list-entry:hover .npc-head-portrait img{height:120%;margin-top:-18.1818181818%}.npc-list-grid{grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}
`],encapsulation:2});let e=_;return e})();function ni(e,i){if(e&1&&(a(0,"div",3),m(1),r()),e&2){let t=i.$implicit;n(),Te("",t.key," : ",t.value?"Has to be seen":"Has to be unseen"," ")}}function oi(e,i){if(e&1&&(C(0,ni,2,2,"div",3,g),I(2,"keyvalue")),e&2){let t=i.$implicit;h(N(2,0,t))}}function ri(e,i){if(e&1&&(a(0,"div"),m(1,"Other cutscenes requirements: "),C(2,oi,3,2,null,null,g),r()),e&2){let t=l();n(2),h(t.heartEventTrigger.otherCutscenesState)}}function ai(e,i){if(e&1&&(a(0,"div"),m(1,"Only on days: "),a(2,"span",3),m(3),r()()),e&2){let t=l();n(3),T(t.heartEventTrigger.specificDay.join(", "))}}function pi(e,i){if(e&1&&(a(0,"div"),m(1,"Only in seasons: "),a(2,"span",3),m(3),r()()),e&2){let t=l();n(3),T(t.heartEventTrigger.specificMonth.join(", "))}}function ci(e,i){if(e&1&&(a(0,"div"),m(1,"Only with weather: "),a(2,"span",3),m(3),r()()),e&2){let t=l();n(3),T(t.heartEventTrigger.specificWeather.join(", "))}}function mi(e,i){if(e&1&&f(0,"app-effect",7),e&2){let t=i.$implicit;d("effect",t)}}function li(e,i){if(e&1&&(a(0,"div",4)(1,"span",5),m(2,"Effects when seen"),r(),a(3,"div",6),C(4,mi,1,1,"app-effect",7,g),r()()),e&2){let t=l();n(4),h(t.heartEventTrigger.effects)}}function si(e,i){if(e&1&&m(0),e&2){let t=l(2);x(" Unlock requirements (",t.heartEventTrigger.requirements.type==="And"?"all":"any"," of them): ")}}function di(e,i){e&1&&m(0," Unlock requirement: ")}function fi(e,i){if(e&1&&f(0,"app-requirements",8),e&2){let t=i.$implicit;d("requirement",t)}}function ui(e,i){if(e&1&&(a(0,"div",4)(1,"span",5),u(2,si,1,1)(3,di,1,0),r(),a(4,"div",6),C(5,fi,1,1,"app-requirements",8,g),r()()),e&2){let t=l();n(2),s(t.heartEventTrigger.requirements.requirements.length>1?2:-1),n(),s(t.heartEventTrigger.requirements.requirements.length<2?3:-1),n(2),h(t.heartEventTrigger.requirements.requirements)}}var yt=(()=>{let i=class i{constructor(){this.heartEventChecklist=B(dt)}toggleHeartEvent(o){o?this.heartEventChecklist.add(this.heartEventTrigger.cutscene):this.heartEventChecklist.remove(this.heartEventTrigger.cutscene)}};i.\u0275fac=function(p){return new(p||i)},i.\u0275cmp=b({type:i,selectors:[["app-heart-event-trigger"]],inputs:{heartEventTrigger:"heartEventTrigger"},decls:32,vars:18,consts:[[1,"flex","justify-between","text-black","mb-1"],[1,"flex","flex-col"],[3,"change","checked"],[1,"text-black"],[1,"my-4"],[1,"text-lg","text-black"],[1,"flex","flex-col","text-black"],[3,"effect"],[3,"requirement"]],template:function(p,c){p&1&&(a(0,"header",0)(1,"div",1)(2,"h4"),m(3),r(),a(4,"span"),m(5),r()(),a(6,"mat-checkbox",2),M("change",function(P){return c.toggleHeartEvent(P.checked)}),m(7,"Cutscene seen "),r()(),a(8,"div"),m(9,"Enabled: "),a(10,"span",3),m(11),r()(),a(12,"div"),m(13,"Location: "),a(14,"span",3),m(15),r()(),a(16,"div"),m(17,"Day Time of day: "),a(18,"span",3),m(19),I(20,"ingameTime"),I(21,"ingameTime"),r()(),a(22,"div"),m(23,"Can trigger on the same day: "),a(24,"span",3),m(25),r()(),u(26,ri,4,0,"div")(27,ai,4,1,"div")(28,pi,4,1,"div")(29,ci,4,1,"div")(30,li,6,0,"div",4)(31,ui,7,2,"div",4)),p&2&&(n(3),T(c.heartEventTrigger.cutscene),n(2),x("Id: ",c.heartEventTrigger.id," "),n(),d("checked",c.heartEventChecklist.isChecked(c.heartEventTrigger.cutscene)),n(5),T(c.heartEventTrigger.enabled?"Yes":"No"),n(4),T(c.heartEventTrigger.location),n(4),Te(" ",N(20,14,c.heartEventTrigger.time.fromTime),"-",N(21,16,c.heartEventTrigger.time.toTime),`
`),n(6),T(c.heartEventTrigger.canTriggerSameDay?"Yes":"No"),n(),s(c.heartEventTrigger.otherCutscenesState.length?26:-1),n(),s(c.heartEventTrigger.specificDay.length?27:-1),n(),s(c.heartEventTrigger.specificMonth.length?28:-1),n(),s(c.heartEventTrigger.specificWeather.length?29:-1),n(),s(c.heartEventTrigger.effects&&c.heartEventTrigger.effects.length?30:-1),n(),s(c.heartEventTrigger.requirements&&c.heartEventTrigger.requirements.requirements.length?31:-1))},dependencies:[at,pt,le,oe,nt],styles:["[_nghost-%COMP%]{display:block}"]});let e=i;return e})();function gi(e,i){e&1&&f(0,"hr",5)}function Ci(e,i){if(e&1&&(f(0,"app-heart-event-trigger",4),u(1,gi,1,0,"hr",5)),e&2){let t=i.$implicit,o=i.$index,p=i.$count;q("mb-3",o===p-1),d("heartEventTrigger",t),n(),s(o!==p-1?1:-1)}}function hi(e,i){if(e&1){let t=$();a(0,"app-expandable",1,0)(2,"h3",2),M("click",function(){L(t);let p=K(1);return V(p.toggle())}),m(3),f(4,"i",3),r(),C(5,Ci,2,4,null,null,g),r()}if(e&2){let t=i.$implicit,o=K(1);n(3),x(" ",t.heartLevel," hearts event "),n(),q("down",!o.open)("up",o.open),n(),h(t.trigger)}}var Et=(()=>{let i=class i{};i.\u0275fac=function(p){return new(p||i)},i.\u0275cmp=b({type:i,selectors:[["app-heart-events"]],inputs:{heartEvents:"heartEvents"},decls:2,vars:0,consts:[["expandable",""],[1,"bg-amber-50/70","px-4","rounded-lg","mb-3","shadow-sm"],["expandableHeader","",1,"text-xl","text-black","flex","items-center","justify-between","cursor-pointer","py-4",3,"click"],[1,"arrow"],[3,"heartEventTrigger"],[1,"my-3"]],template:function(p,c){p&1&&C(0,hi,7,5,"app-expandable",1,g),p&2&&h(c.heartEvents)},dependencies:[xe,yt],encapsulation:2});let e=i;return e})();function vi(e,i){if(e&1&&f(0,"app-offering",3),e&2){let t=i.$implicit;d("details",t)}}function yi(e,i){if(e&1&&(a(0,"app-item-card-switch",0),u(1,vi,1,1,"ng-template",2),r()),e&2){let t=l();d("item",t.selectedEntity)}}function Ei(e,i){if(e&1&&f(0,"app-ui-icon",8),e&2){let t=l(2);j("matTooltip","",t.npc.characterName," is dateable"),d("uiIcon",t.uiIcon.LOVE)}}function Ti(e,i){if(e&1&&(a(0,"div",9),f(1,"app-ui-icon",16),m(2),I(3,"ingameDate"),r()),e&2){let t=l(2);n(),d("uiIcon",t.uiIcon.BIRTHDAY),n(),x(" ",N(3,2,t.npc.birthday)," ")}}function bi(e,i){if(e&1&&(a(0,"p",10),m(1),r()),e&2){let t=l(2);n(),T(t.npc.description)}}function Ii(e,i){if(e&1){let t=$();a(0,"app-gifting-grid",17),M("itemClicked",function(p){L(t);let c=l(2);return V(c.showDetails(p))}),r()}if(e&2){let t=l(2);d("preferences",t.giftingPreferences)}}function Ni(e,i){if(e&1&&(a(0,"p",14),m(1),r()),e&2){let t=l(2);n(),x(" ",t.npc.characterName," has no specialized preferences. ")}}function Si(e,i){if(e&1&&f(0,"app-heart-events",15),e&2){let t=l(2);d("heartEvents",t.heartEvents)}}function wi(e,i){if(e&1&&(a(0,"p",14),m(1),r()),e&2){let t=l(2);n(),x(" ",t.npc.characterName," has no heart events. ")}}function Fi(e,i){if(e&1&&(a(0,"h3",18),m(1),r()),e&2){let t=l().$implicit;n(),x(" ",t.appearanceCategory," ")}}function ki(e,i){if(e&1&&(a(0,"div",22),f(1,"app-npc-portrait",23),a(2,"span",24),m(3),r()()),e&2){let t=i.$implicit,o=l(6);n(),d("npcKey",o.npc.key)("portraitName",t.value),n(2),T(t.key)}}function Di(e,i){if(e&1&&(a(0,"div",19)(1,"h4",20),m(2),r(),a(3,"div",21),C(4,ki,4,3,"div",22,g),I(6,"keyvalue"),r()()),e&2){let t=i.$implicit;n(2),T(t.key),n(2),h(N(6,1,t.value))}}function Mi(e,i){if(e&1&&C(0,Di,7,3,"div",19,g),e&2){let t=l();h(t)}}function Pi(e,i){if(e&1&&(a(0,"p",14),m(1),r()),e&2){let t=l(4);n(),x(" ",t.npc.characterName," has no appearances. ")}}function Li(e,i){if(e&1&&u(0,Mi,2,0)(1,Pi,2,1,"p",14),e&2){let t=i;s(t.length?0:-1),n(),s(t.length?-1:1)}}function Vi(e,i){if(e&1&&(u(0,Fi,2,1,"h3",18)(1,Li,2,2),I(2,"keyvalue")),e&2){let t,o=i.$implicit;s(o.appearanceCategory?0:-1),n(),s((t=N(2,2,o.appearances))?1:-1,t)}}function Gi(e,i){if(e&1&&(a(0,"app-card")(1,"div",4),f(2,"app-item-icon",5),a(3,"div",6)(4,"div",7),m(5),u(6,Ei,1,3,"app-ui-icon",8),r(),u(7,Ti,4,4,"div",9),r()(),u(8,bi,2,1,"p",10),r(),a(9,"app-card",11)(10,"h2",12),m(11," Gifting "),r(),u(12,Ii,1,1,"app-gifting-grid",13)(13,Ni,2,1,"p",14),r(),a(14,"app-card",11)(15,"h2",12),m(16," Heart events "),r(),u(17,Si,1,1,"app-heart-events",15)(18,wi,2,1,"p",14),r(),a(19,"app-card",11)(20,"h2",12),m(21," Appearances "),r(),C(22,Vi,3,4,null,null,g),r()),e&2){let t=l();n(2),d("itemName",t.npc.iconName),n(3),x(" ",t.npc.characterName," "),n(),s(t.npc.isDateable?6:-1),n(),s(t.npc.birthday?7:-1),n(),s(t.npc.description?8:-1),n(4),s(t.giftingPreferences?12:-1),n(),s(t.giftingPreferences?-1:13),n(4),s(t.heartEvents.length?17:-1),n(),s(t.heartEvents.length?-1:18),n(4),h(t.npc.appearances)}}function Hi(e,i){e&1&&(a(0,"app-card")(1,"h1",25),m(2," NPC not found. "),r()())}function Bi(e,i){e&1&&f(0,"mat-spinner",1)}var Tt=(()=>{let i=class i extends he{constructor(){super(...arguments),this.npcKey=Le.required(),this.npc=null,this.heartEvents=[],this.UiIcon=G,this.uiIcon=G}ngOnInit(){we([this._database.fetchNPCs$(),this._database.fetchHeartEvents$(),this._database.fetchGiftingPreferences$()]).subscribe({next:([o,p,c])=>{this.npc=o.find(_=>_.key.toLowerCase()===this.npcKey().toLowerCase()),this.heartEvents=p[this.npcKey().toLowerCase()]??[],this.giftingPreferences=c.find(_=>_.mapKey.toLowerCase()===this.npc?.key.toLowerCase())}})}};i.\u0275fac=(()=>{let o;return function(c){return(o||(o=Pe(i)))(c||i)}})(),i.\u0275cmp=b({type:i,selectors:[["app-npc"]],inputs:{npcKey:[1,"npcKey"]},features:[te],decls:5,vars:2,consts:[["listDetail","",3,"item"],[1,"mx-auto"],["appDatabaseItemDetails",""],[3,"details"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"mt-2"],[1,"mt-6"],[1,"mb-4","font-semibold","text-2xl","text-black"],[3,"preferences"],[1,"text-black","text-lg"],[3,"heartEvents"],[1,"!h-6","!w-6",3,"uiIcon"],[3,"itemClicked","preferences"],[1,"mb-4","font-semibold","text-xl","text-black"],[1,"font-semibold","text-black","mb-6"],[1,"text-lg"],[1,"grid","portrait-grid","gap-4"],[1,"flex","flex-col","shadow-lg","p-2"],[1,"h-[400px]","flex","items-end","justify-center",3,"npcKey","portraitName"],[1,""],[1,"mb-4","font-semibold","text-3xl","text-black","flex","items-center","gap-x-4"]],template:function(p,c){p&1&&(a(0,"app-list-detail-container"),u(1,yi,2,1,"app-item-card-switch",0)(2,Gi,24,9)(3,Hi,3,0,"app-card")(4,Bi,1,0,"mat-spinner",1),r()),p&2&&(n(),s(c.selectedEntity?1:-1),n(),s(c.npc?2:c.npc===void 0?3:c.npc===null?4:-1))},dependencies:[fe,ue,Ce,ot,U,de,ve,Q,W,A,Et,Ee,oe,z],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.portrait-grid .npc-portrait img{max-height:400px}@media (min-width: 1280px){.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
`],encapsulation:2});let e=i;return e})();var $i=[{path:"",pathMatch:"full",redirectTo:"overview"},{path:"",component:ft,children:[{path:"gifting",component:xt,title:"Gifting - NPCs"},{path:"overview",component:vt,title:"Overview - NPCs"},{path:":npcKey",component:Tt}]}],bt=(()=>{let i=class i{};i.\u0275fac=function(p){return new(p||i)},i.\u0275mod=Z({type:i}),i.\u0275inj=X({imports:[be.forChild($i),be]});let e=i;return e})();var Uo=(()=>{let i=class i{};i.\u0275fac=function(p){return new(p||i)},i.\u0275mod=Z({type:i}),i.\u0275inj=X({imports:[re,bt,ct,Je,Qe,_e,me,pe,ge,le,D,mt,Q,W]});let e=i;return e})();export{Uo as NPCsModule};
