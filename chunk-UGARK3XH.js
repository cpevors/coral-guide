import{a as q}from"./chunk-JGF6KBFK.js";import{b as F}from"./chunk-2A7PSW7O.js";import{a as g,b as M,c as R,d as k,e as H,f as $,g as L,h as P,i as N,j as B,k as Y,l as A,m as O,n as U,o as j}from"./chunk-JSGVWV7K.js";import{b as y}from"./chunk-VYOS5CGL.js";import{h as E}from"./chunk-KW5235UB.js";import{Ec as D,Gc as S,Hb as I,Hc as v,Ib as c,Ob as d,Tb as n,Ub as a,Vb as s,Wb as p,Xb as r,ac as _,db as o,pd as w,qa as x,rc as l,sb as T,sc as f,tc as C,wb as b,yb as m}from"./chunk-GYX7HZX3.js";var z=t=>["/locations",t];function G(t,i){if(t&1&&(n(0,"td",17),s(1,"app-item-icon",18),a()),t&2){let e=i.$implicit;o(),c("itemName",e.item.iconName)}}function J(t,i){t&1&&(n(0,"th",19),l(1,"Item "),a()),t&2&&I("colspan",2)}function K(t,i){if(t&1&&(n(0,"td",20),l(1),a()),t&2){let e=i.$implicit;o(),C(" ",e.item.displayName," ")}}function Q(t,i){t&1&&(n(0,"th",19),l(1,"Shop "),a())}function V(t,i){if(t&1&&(n(0,"td",20)(1,"a",21),l(2),a()()),t&2){let e=i.$implicit;o(),c("routerLink",D(2,z,e.festival.url)),o(),f(e.festival.displayName)}}function W(t,i){t&1&&(n(0,"th",22),l(1,"Town Rank "),a())}function X(t,i){if(t&1&&(n(0,"td",23),l(1),S(2,"townrank"),a()),t&2){let e=i.$implicit;o(),C(" ",v(2,1,e.townRank)," ")}}function Z(t,i){t&1&&(n(0,"th",22),l(1,"Amount limit "),a())}function tt(t,i){if(t&1&&(n(0,"span"),l(1),a()),t&2){let e=_().$implicit;o(),f(e.festivalSetting.itemLimit)}}function et(t,i){if(t&1&&(n(0,"span"),l(1),a()),t&2){let e=_().$implicit;o(),C("",e.festivalSetting.itemLimitPerYear," per year")}}function it(t,i){t&1&&(n(0,"span"),l(1,"-"),a())}function nt(t,i){if(t&1&&(n(0,"td",24),m(1,tt,2,1,"span")(2,et,2,1,"span")(3,it,2,0,"span"),a()),t&2){let e=i.$implicit;o(),d(e.festivalSetting.isLimitedItem?1:-1),o(),d(e.festivalSetting.hasYearlyLimit?2:-1),o(),d(!e.festivalSetting.isLimitedItem&&!e.festivalSetting.hasYearlyLimit?3:-1)}}function at(t,i){t&1&&(n(0,"th",22),l(1," Discount "),a())}function ot(t,i){if(t&1&&(n(0,"span"),l(1),S(2,"percent"),a()),t&2){let e=_().$implicit;o(),f(v(2,1,e.festivalSetting.discount))}}function lt(t,i){t&1&&(n(0,"span"),l(1,"-"),a())}function mt(t,i){if(t&1&&(n(0,"td",24),m(1,ot,3,3,"span")(2,lt,2,0,"span"),a()),t&2){let e=i.$implicit;o(),d(e.festivalSetting.hasDiscount?1:-1),o(),d(e.festivalSetting.hasDiscount?-1:2)}}function pt(t,i){t&1&&(n(0,"th",22),l(1,"Price "),a())}function rt(t,i){if(t&1&&(n(0,"span",25),l(1),a()),t&2){let e=_().$implicit;o(),f(e.item.price)}}function ct(t,i){if(t&1&&(n(0,"td",24),m(1,rt,2,1,"span",25),s(2,"app-money",26),a()),t&2){let e=i.$implicit;o(),d(e.festivalSetting.hasDiscount?1:-1),o(),c("amount",e.item.price*(1-(e.festivalSetting.hasDiscount?e.festivalSetting.discount:0)))}}function dt(t,i){t&1&&(n(0,"th",22),l(1,"Sell price "),a())}function st(t,i){if(t&1&&(n(0,"td",24),s(1,"app-money",26),a()),t&2){let e=i.$implicit;o(),c("amount",e.item.sellPrice)}}function _t(t,i){t&1&&s(0,"tr",27)}function ft(t,i){t&1&&s(0,"tr",28)}function Ct(t,i){if(t&1&&(n(0,"table",0),p(1,1),m(2,G,2,1,"td",2),r(),p(3,3),m(4,J,2,1,"th",4)(5,K,2,1,"td",5),r(),p(6,6),m(7,Q,2,0,"th",4)(8,V,3,4,"td",5),r(),p(9,7),m(10,W,2,0,"th",8)(11,X,3,3,"td",9),r(),p(12,10),m(13,Z,2,0,"th",8)(14,nt,4,3,"td",11),r(),p(15,12),m(16,at,2,0,"th",8)(17,mt,3,2,"td",11),r(),p(18,13),m(19,pt,2,0,"th",8)(20,ct,3,2,"td",11),r(),p(21,14),m(22,dt,2,0,"th",8)(23,st,2,1,"td",11),r(),m(24,_t,1,0,"tr",15)(25,ft,1,0,"tr",16),a()),t&2){let e=_();c("dataSource",e.matDataSource),o(24),c("matHeaderRowDef",e.displayHeaderColumns)("matHeaderRowDefSticky",!0),o(),c("matRowDefColumns",e.displayedColumns)}}var Ft=(()=>{class t extends U{constructor(){super(...arguments),this.BASE_DISPLAY_COLUMNS=["icon","displayName","townRank","limit","discount","price","sellPrice"]}ngOnInit(){this._dataSource().length&&this._dataSource()[0].festival&&(this.displayedColumns.splice(2,0,"shop"),this.displayHeaderColumns=this.displayedColumns.filter(e=>e!=="icon"))}static{this.\u0275fac=(()=>{let e;return function(u){return(e||(e=x(t)))(u||t)}})()}static{this.\u0275cmp=T({type:t,selectors:[["app-festival-shop-item-table"]],features:[b],decls:2,vars:1,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","displayName"],["class","backdrop-blur-xl","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","shop"],["matColumnDef","townRank"],["class","backdrop-blur-xl whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col w-[1%]","mat-cell","",4,"matCellDef"],["matColumnDef","limit"],["class","text-col !text-right w-[1%]","mat-cell","",4,"matCellDef"],["matColumnDef","discount"],["matColumnDef","price"],["matColumnDef","sellPrice"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","w-10","text-center","icon-col"],[3,"itemName"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"underline",3,"routerLink"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl","whitespace-nowrap"],["mat-cell","",1,"text-col","w-[1%]"],["mat-cell","",1,"text-col","!text-right","w-[1%]"],[1,"line-through","mr-3"],[3,"amount"],["mat-header-row",""],["mat-row",""]],template:function(h,u){h&1&&(n(0,"app-responsive-table"),m(1,Ct,26,4,"table",0),a()),h&2&&(o(),d(u.matDataSource?1:-1))},dependencies:[F,w,q,E,O,y,Y,g,R,L,k,M,P,H,$,N,B,j,A],encapsulation:2})}}return t})();export{Ft as a};
