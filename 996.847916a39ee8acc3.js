"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[996],{4996:(te,u,a)=>{a.r(u),a.d(u,{CraftingModule:()=>ee});var r=a(6895),y=a(1699),l=a(1667),T=a(15),N=a(5583),e=a(4650),d=a(9969),Z=a(2364),b=a(5141),Q=a(973);function D(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"app-module-sidebar-item",2),e._uU(2,"Inventory-Crafting "),e.qZA(),e.TgZ(3,"app-module-sidebar-item",3),e._uU(4,"Processing "),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("uiIcon",t.UI_ICONS.CRAFTING),e.xp6(2),e.Q6J("uiIcon",t.UI_ICONS.ARTISAN)}}let J=(()=>{class n{constructor(t){this._databaseService=t,this.UI_ICONS=T.a,this.addSpacesToPascalCase=N.gA,this.itemProcessingRecipes$=this._databaseService.fetchItemProcessingRecipes$()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-crafting"]],decls:5,vars:3,consts:[[4,"ngIf"],[1,"hidden"],["routerLink","inventory",3,"uiIcon"],["routerLink","artisan",3,"uiIcon"]],template:function(t,i){1&t&&(e.TgZ(0,"app-sidebar-container")(1,"app-module-sidebar"),e.YNc(2,D,5,2,"ng-container",0),e.ALo(3,"async"),e.qZA(),e._UZ(4,"router-outlet",1),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,i.itemProcessingRecipes$)))},dependencies:[r.O5,l.lC,l.rH,Z.R,b.z,Q.L,r.Ov]}),n})();var L=a(9841),I=a(4004),_=a(9813),x=a(9473),g=a(3848),C=a(4175);function w(n,o){if(1&n&&(e.TgZ(0,"div",5),e._UZ(1,"app-item-icon",6),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("itemName",t.item.iconName),e.xp6(2),e.Oqu(t.item.displayName)}}function A(n,o){if(1&n&&(e.ynx(0),e.YNc(1,w,4,2,"div",4),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.item)}}function P(n,o){1&n&&(e.ynx(0),e._uU(1," (all the same)"),e.BQk())}function O(n,o){if(1&n&&(e.TgZ(0,"div",5),e._UZ(1,"app-item-icon",6),e.TgZ(2,"span"),e._uU(3),e.YNc(4,P,2,0,"ng-container",2),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("itemName",t.genericItem.iconName),e.xp6(2),e.hij("",t.genericItem.displayName," "),e.xp6(1),e.Q6J("ngIf",t.shouldBeSameItem)}}function F(n,o){if(1&n&&(e.ynx(0),e.YNc(1,O,5,3,"div",4),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.genericItem)}}function Y(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",1),e.YNc(2,A,2,1,"ng-container",2),e.YNc(3,F,2,1,"ng-container",2),e.TgZ(4,"div",3),e._uU(5),e.qZA()(),e._UZ(6,"hr"),e.BQk()),2&n){const t=o.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngIf",!i.isGenericEntry(t)),e.xp6(1),e.Q6J("ngIf",i.isGenericEntry(t)),e.xp6(2),e.Oqu(t.amount)}}let h=(()=>{class n{isGenericEntry(t){return"shouldBeSameItem"in t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-item-list"]],inputs:{itemList:"itemList"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"flex","justify-between","py-1"],[4,"ngIf"],[1,"flex","items-center"],["class","flex gap-x-3 items-center",4,"ngIf"],[1,"flex","gap-x-3","items-center"],[1,"w-10",3,"itemName"]],template:function(t,i){1&t&&e.YNc(0,Y,7,3,"ng-container",0),2&t&&e.Q6J("ngForOf",i.itemList)},dependencies:[r.sg,r.O5,_.D]}),n})();function U(n,o){if(1&n&&(e.TgZ(0,"app-base-item-card",1),e._UZ(1,"app-item-list",2),e.qZA()),2&n){const t=e.oxw();e.Q6J("item",t.craftingRecipe.item),e.xp6(1),e.Q6J("itemList",t.itemList)}}let $=(()=>{class n{ngOnChanges(t){let i=t.craftingRecipe?.currentValue;i&&(this.itemList=[...i.ingredients,...i.genericIngredients])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-inventory-details"]],inputs:{craftingRecipe:"craftingRecipe"},features:[e.TTD],decls:1,vars:1,consts:[[3,"item",4,"ngIf"],[3,"item"],[1,"mb-3",3,"itemList"]],template:function(t,i){1&t&&e.YNc(0,U,2,2,"app-base-item-card",0),2&t&&e.Q6J("ngIf",i.craftingRecipe&&i.craftingRecipe.item)},dependencies:[r.O5,C.T,h]}),n})();function R(n,o){if(1&n&&e._UZ(0,"app-inventory-details",5),2&n){const t=e.oxw();e.Q6J("craftingRecipe",t.selectedEntity)}}function E(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-item-icon",8),e.NdJ("click",function(){const s=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.showDetails(s))}),e.qZA()}if(2&n){const t=o.$implicit;e.Q6J("itemName",null==t.item?null:t.item.iconName)}}function S(n,o){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,E,1,1,"app-item-icon",7),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}let B=(()=>{class n{constructor(t){this._database=t,this.openDrawer=!1,this.recipes$=(0,L.a)([t.fetchCraftingRecipes$(),t.fetchItems$(),t.fetchTagBasedItems$()]).pipe((0,I.U)(([i,c,s])=>(i.forEach(p=>{p.item=c.find(m=>m.id===p.key.toLowerCase()),p.genericIngredients.forEach(m=>m.genericItem=s.find(f=>f.key===m.key))}),i)))}showDetails(t){this.selectedEntity=t,this.openDrawer=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-inventory"]],decls:6,vars:5,consts:[[3,"openDrawer","openDrawerChange"],["listDetail","",3,"craftingRecipe",4,"ngIf"],["animationDuration","0",1,"px-2","xl:px-[50px]","w-full"],["label","All"],["class","grid gap-4 icon-grid",4,"ngIf"],["listDetail","",3,"craftingRecipe"],[1,"grid","gap-4","icon-grid"],["class","icon-grid-item",3,"itemName","click",4,"ngFor","ngForOf"],[1,"icon-grid-item",3,"itemName","click"]],template:function(t,i){1&t&&(e.TgZ(0,"app-list-detail-container",0),e.NdJ("openDrawerChange",function(s){return i.openDrawer=s}),e.YNc(1,R,1,1,"app-inventory-details",1),e.TgZ(2,"mat-tab-group",2)(3,"mat-tab",3),e.YNc(4,S,2,1,"div",4),e.ALo(5,"async"),e.qZA()()()),2&t&&(e.Q6J("openDrawer",i.openDrawer),e.xp6(1),e.Q6J("ngIf",i.selectedEntity),e.xp6(3),e.Q6J("ngIf",e.lcZ(5,3,i.recipes$)))},dependencies:[r.sg,r.O5,_.D,x.I,g.SP,g.uX,$,r.Ov]}),n})();var M=a(5698),v=a(8505),k=a(6336);function j(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.selectedEntity.day," day(s)")}}function X(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.selectedEntity.time.hours," hour(s)")}}function G(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.selectedEntity.time.minutes," minute(s)")}}function z(n,o){if(1&n&&(e.TgZ(0,"app-base-item-card",4)(1,"div"),e._uU(2,"Processing time: "),e.TgZ(3,"span",5),e.YNc(4,j,2,1,"ng-container",6),e.YNc(5,X,2,1,"ng-container",6),e.YNc(6,G,2,1,"ng-container",6),e.qZA()(),e._UZ(7,"app-item-list",7),e.qZA()),2&n){const t=e.oxw();e.Q6J("item",t.selectedEntity.output.item),e.xp6(4),e.Q6J("ngIf",t.selectedEntity.day),e.xp6(1),e.Q6J("ngIf",t.selectedEntity.time.hours),e.xp6(1),e.Q6J("ngIf",t.selectedEntity.time.minutes),e.xp6(1),e.Q6J("itemList",t.getItemList(t.selectedEntity))}}function H(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-item-icon",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.showDetails(s))}),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(3);let c;e.Q6J("itemName",t.output.item.iconName)("subIconName",i.reusedImages.includes(null!==(c=t.output.item.iconName)&&void 0!==c?c:"")?t.input.item.iconName:void 0)}}function q(n,o){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,H,1,2,"app-item-icon",11),e.qZA()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function K(n,o){if(1&n&&(e.TgZ(0,"mat-tab",8),e.YNc(1,q,2,1,"div",9),e.ALo(2,"async"),e.qZA()),2&n){const t=o.$implicit,i=e.oxw();e.s9C("label",t),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.filteredData$(t)))}}const V=[{path:"",pathMatch:"full",redirectTo:"inventory"},{path:"",component:J,children:[{path:"inventory",component:B},{path:"artisan",redirectTo:"artisan/",pathMatch:"full"},{path:"artisan/:processor",component:(()=>{class n{constructor(t,i,c){this._route=t,this._router=i,this._databaseService=c,this.openDrawer=!1,this.reusedImages=[],this.selectedTabIndex=-1,this.quality=k.n,this.machineNames=[],this._databaseService.fetchItemProcessingRecipes$().pipe((0,M.q)(1)).subscribe({next:s=>{this.machineNames=Object.keys(s),this._route.paramMap.pipe((0,v.b)(p=>{const m=p.get("processor");m&&(this.selectedTabIndex=this.machineNames.map(f=>f.toLowerCase()).indexOf(m))})).subscribe()}})}getItemList(t){return[t.input,...t.additionalInput]}_getMultipleIconNames(t){const i=t.filter((c,s)=>t.indexOf(c)!==s);return[...new Set(i)]}filteredData$(t){return this._databaseService.fetchItemProcessingRecipes$().pipe((0,I.U)(i=>i[t]),(0,v.b)(i=>{this.reusedImages=this._getMultipleIconNames(i.map(c=>c.output.item.iconName??""))}))}l(t){let i=t.tab.textLabel.toLowerCase();console.log(i),this._router.navigate(["..",i],{relativeTo:this._route})}showDetails(t){this.selectedEntity=t,this.openDrawer=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(d.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-processor"]],decls:4,vars:4,consts:[[3,"openDrawer","openDrawerChange"],["listDetail","",3,"item",4,"ngIf"],["animationDuration","0",1,"px-2","xl:px-[50px]","w-full",3,"selectedIndex","selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],["listDetail","",3,"item"],[1,"text-black"],[4,"ngIf"],[1,"mb-3",3,"itemList"],[3,"label"],["class","grid gap-4 icon-grid",4,"ngIf"],[1,"grid","gap-4","icon-grid"],["class","icon-grid-item",3,"itemName","subIconName","click",4,"ngFor","ngForOf"],[1,"icon-grid-item",3,"itemName","subIconName","click"]],template:function(t,i){1&t&&(e.TgZ(0,"app-list-detail-container",0),e.NdJ("openDrawerChange",function(s){return i.openDrawer=s}),e.YNc(1,z,8,5,"app-base-item-card",1),e.TgZ(2,"mat-tab-group",2),e.NdJ("selectedTabChange",function(s){return i.l(s)}),e.YNc(3,K,3,4,"mat-tab",3),e.qZA()()),2&t&&(e.Q6J("openDrawer",i.openDrawer),e.xp6(1),e.Q6J("ngIf",i.selectedEntity),e.xp6(1),e.Q6J("selectedIndex",i.selectedTabIndex),e.xp6(1),e.Q6J("ngForOf",i.machineNames))},dependencies:[r.sg,r.O5,_.D,C.T,h,x.I,g.SP,g.uX,r.Ov]}),n})()}]}];let W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.Bz.forChild(V),l.Bz]}),n})(),ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[r.ez,W,y.m,g.Nh]}),n})()}}]);