import{h as N}from"./chunk-SJRCRC22.js";import{b as R}from"./chunk-KUYOE2KN.js";import{a as f,e as H}from"./chunk-AJOFB37Q.js";import{R as s,X as h,_ as I,ea as S,k as T,p as r,q as $,qa as c,sa as a}from"./chunk-GYX7HZX3.js";import{a as o,b as P}from"./chunk-4CLCTAJ7.js";var g=(()=>{class i{constructor(){this.settings=S(R).getSettings(),this.http=S(f);let t=this.settings.useBeta?"beta":"live",e=this.settings.language??"en";this.BASE_PATH=`assets/${t}/database`,this.BASE_PATH_WITH_LANG=`assets/${t}/database/${e}`}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var l=(()=>{class i extends g{constructor(){super(...arguments),this.#e=S(a),this._ITEMS=[],this._JOURNAL_ORDERS=new Map,this._TAG_BASED_ITEMS=[],this._GIFT_PREFERENCES=[],this._SHOP_ITEMS=new Map,this._FESTIVAL_DATA=new Map,this._SHOP_PROCESS_ITEMS=new Map,this._ITEM_UPGRADE=new Map,this._NPCS=[],this._PROCESSOR_MAPPING={},this._COOKING_UTENSIL_MAPPING={},this._DATABASE_ITEMS=new Map,this.#s=new Map}#e;#s;fetchDatabaseItem$(t){return this._DATABASE_ITEMS.has(t)?T(this._DATABASE_ITEMS.get(t)):this.http.get(`${this.BASE_PATH_WITH_LANG}/items/${t}.json`).pipe(h(e=>this._DATABASE_ITEMS.set(t,e)),s(1))}getItems(){return this._ITEMS}fetchItems$(){return this._ITEMS$||(this._ITEMS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/items.json`).pipe(h(t=>this._ITEMS=t),s(1))),this._ITEMS$}fetchMailData$(){return this._MAIL_DATA$||(this._MAIL_DATA$=this.http.get(`${this.BASE_PATH_WITH_LANG}/mail-data.json`).pipe(s(1))),this._MAIL_DATA$}fetchBestiary(){return this.#t(`${this.BASE_PATH_WITH_LANG}/bestiary.json`)}fetchAnimals(){return this.#t(`${this.BASE_PATH_WITH_LANG}/animal-data.json`)}fetchAnimalMoodData(){return this.#t(`${this.BASE_PATH_WITH_LANG}/animal-mood-size.json`)}fetchAnimalShopData(t){return this.#t(`${this.BASE_PATH_WITH_LANG}/${t}-animal-shop-data.json`)}fetchTornPagesData$(){return this._TORN_PAGES_DATA$||(this._TORN_PAGES_DATA$=this.http.get(`${this.BASE_PATH_WITH_LANG}/torn-pages.json`).pipe(s(1))),this._TORN_PAGES_DATA$}getCookingUtensilMapping(){return this._COOKING_UTENSIL_MAPPING}fetchCookingUtensilMapping$(){return this._COOKING_UTENSIL_MAPPING$||(this._COOKING_UTENSIL_MAPPING$=this.http.get(`${this.BASE_PATH_WITH_LANG}/cooking-utensil-mapping.json`).pipe(r(t=>t[0]),h(t=>this._COOKING_UTENSIL_MAPPING=t),s(1))),this._COOKING_UTENSIL_MAPPING$}getProcessorMapping(){return this._PROCESSOR_MAPPING}fetchProcessorMapping$(){return this._PROCESSOR_MAPPING$||(this._PROCESSOR_MAPPING$=this.http.get(`${this.BASE_PATH_WITH_LANG}/processor-mapping.json`).pipe(r(t=>t[0]),h(t=>this._PROCESSOR_MAPPING=t),s(1))),this._PROCESSOR_MAPPING$}getNPCs(){return this._NPCS}fetchNPCs$(){return this._NPCS$||(this._NPCS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/npcs.json`).pipe(h(t=>this._NPCS=t),s(1))),this._NPCS$}fetchHeartEvents$(){return this._HEART_EVENTS$||(this._HEART_EVENTS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/heart-events.json`).pipe(r(t=>t[0]),s(1))),this._HEART_EVENTS$}fetchMuseumChecklist$(){return this._MUSEUM_CHECKLIST$||(this._MUSEUM_CHECKLIST$=this.http.get(`${this.BASE_PATH_WITH_LANG}/museum-checklist.json`).pipe(r(t=>t[0]),s(1))),this._MUSEUM_CHECKLIST$}fetchCookingRecipesChecklist$(){return this._COOKING_RECIPES_CHECKLIST$||(this._COOKING_RECIPES_CHECKLIST$=this.http.get(`${this.BASE_PATH_WITH_LANG}/cooking-recipes-checklist.json`).pipe(r(t=>t[0]),s(1))),this._COOKING_RECIPES_CHECKLIST$}fetchAchievements(){return this.#t(`${this.BASE_PATH_WITH_LANG}/achievements.json`)}fetchOfferings$(){return this._OFFERINGS$||(this._OFFERINGS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/offerings.json`).pipe(s(1))),this._OFFERINGS$}fetchConsumables$(){return this._CONSUMABLES$||(this._CONSUMABLES$=this.http.get(`${this.BASE_PATH_WITH_LANG}/consumables.json`).pipe(s(1))),this._CONSUMABLES$}fetchItemMixingRecipeData(){return this.#t(`${this.BASE_PATH_WITH_LANG}/underwater-seeds-item-mixing-data.json`)}fetchFish$(){return this._FISH$||(this._FISH$=this.http.get(`${this.BASE_PATH_WITH_LANG}/fish.json`).pipe(s(1))),this._FISH$}fetchCraftingRecipes$(){return this._CRAFTING_RECIPE$||(this._CRAFTING_RECIPE$=$([this.http.get(`${this.BASE_PATH_WITH_LANG}/crafting-recipes.json`),this.fetchItems$(),this.fetchTagBasedItems$()]).pipe(r(([t,e,A])=>(t.forEach(_=>{_.item=e.find(E=>E.id===_.key.toLowerCase()),_.genericIngredients.forEach(E=>E.genericItem=A.find(n=>n.key===E.key))}),t))).pipe(s(1))),this._CRAFTING_RECIPE$}fetchItemProcessingRecipes$(){return this._ITEM_PROCESSING_RECIPE$||(this._ITEM_PROCESSING_RECIPE$=$([this.http.get(`${this.BASE_PATH_WITH_LANG}/item-processing.json`),this.fetchTagBasedItems$(),this.fetchItems$()]).pipe(r(([t,e,A])=>{let _=t[0];return Object.keys(_).forEach(E=>{_[E].forEach(n=>{n.machine=E,n.genericInput&&(n.genericInput.genericItem=e.find(p=>p.key===n.genericInput?.key)),n.output.item.sellPrice=A.find(p=>p.id===n.output.item.id)?.sellPrice})}),_}),s(1))),this._ITEM_PROCESSING_RECIPE$}fetchCookingRecipes$(){return this._COOKING_RECIPE$||(this._COOKING_RECIPE$=this.http.get(`${this.BASE_PATH_WITH_LANG}/cooking-recipes.json`).pipe(r(t=>t[0]),s(1))),this._COOKING_RECIPE$}fetchTreasureHunts$(){return this._TREASURE_HUNTS$||(this._TREASURE_HUNTS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/treasure-hunt-maps.json`).pipe(s(1))),this._TREASURE_HUNTS$}fetchTagBasedItems$(){return this._TAG_BASED_ITEMS$||(this._TAG_BASED_ITEMS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/tag-based-items.json`).pipe(h(t=>this._TAG_BASED_ITEMS=t),s(1))),this._TAG_BASED_ITEMS$}getTagBasedItems(){return this._TAG_BASED_ITEMS}fetchOceanCritters$(){return this._OCEAN_CRITTERS$||(this._OCEAN_CRITTERS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/ocean-critters.json`).pipe(s(1))),this._OCEAN_CRITTERS$}fetchBugsAndInsects$(){return this._BUGS_AND_INSECTS$||(this._BUGS_AND_INSECTS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/bugs-and-insects.json`).pipe(s(1))),this._BUGS_AND_INSECTS$}fetchCrops$(){return this._CROPS$||(this._CROPS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/crops.json`).pipe(s(1))),this._CROPS$}fetchFruitTrees$(){return this._FRUIT_TREES$||(this._FRUIT_TREES$=this.http.get(`${this.BASE_PATH_WITH_LANG}/fruit-trees.json`).pipe(s(1))),this._FRUIT_TREES$}fetchFruitPlants$(){return this._FRUIT_PLANTS$||(this._FRUIT_PLANTS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/fruit-plants.json`).pipe(s(1))),this._FRUIT_PLANTS$}fetchJournalOrder$(t){return this._JOURNAL_ORDERS.get(t)||this._JOURNAL_ORDERS.set(t,this.http.get(`${this.BASE_PATH_WITH_LANG}/${t}.json`).pipe(s(1))),this._JOURNAL_ORDERS.get(t)}fetchGiftingPreferences$(){return this._GIFT_PREFERENCES$||(this._GIFT_PREFERENCES$=this.http.get(`${this.BASE_PATH_WITH_LANG}/gift-preferences.json`).pipe(r(t=>N(t)),h(t=>this._GIFT_PREFERENCES=t),s(1))),this._GIFT_PREFERENCES$}getGiftingPreferences(){return this._GIFT_PREFERENCES}fetchPetShopAdoptions$(){return this._PET_SHOP_ADOPTIONS$||(this._PET_SHOP_ADOPTIONS$=this.http.get(`${this.BASE_PATH_WITH_LANG}/pet-shop-adoptions.json`).pipe(s(1))),this._PET_SHOP_ADOPTIONS$}fetchShopProcessItems$(t){return this._SHOP_PROCESS_ITEMS.has(t)?T(this._SHOP_PROCESS_ITEMS.get(t)):this.http.get(`${this.BASE_PATH_WITH_LANG}/${t}-shop-process-items.json`).pipe(h(e=>this._SHOP_PROCESS_ITEMS.set(t,e)),s(1))}fetchItemUpgradeData$(t){return this._ITEM_UPGRADE.has(t)?T(this._ITEM_UPGRADE.get(t)):this.http.get(`${this.BASE_PATH_WITH_LANG}/${t}-item-upgrade.json`).pipe(h(e=>this._ITEM_UPGRADE.set(t,e)),s(1))}fetchOpeningHours$(t){return this.#t(`${this.BASE_PATH_WITH_LANG}/${t}-opening-hours.json`,{parse:e=>e[0]})}fetchShopItemData$(t){return this._SHOP_ITEMS.has(t)?T(this._SHOP_ITEMS.get(t)):this.http.get(`${this.BASE_PATH_WITH_LANG}/${t}-shop-items.json`).pipe(h(e=>this._SHOP_ITEMS.set(t,e)),s(1))}fetchFestivalData$(t){return this._FESTIVAL_DATA.has(t)?T(this._FESTIVAL_DATA.get(t)):this.http.get(`${this.BASE_PATH_WITH_LANG}/${t}-festival-data.json`).pipe(r(e=>e[0]),h(e=>this._FESTIVAL_DATA.set(t,e)),s(1))}fetchFestivalOpeningHours$(t){return this.#t(`${this.BASE_PATH_WITH_LANG}/${t}-festival-opening-hours.json`,{parse:e=>e[0]})}fetchMeritExchangeShopData$(){return this._MERIT_EXCHANGE_SHOP_DATA$||(this._MERIT_EXCHANGE_SHOP_DATA$=this.http.get(`${this.BASE_PATH_WITH_LANG}/merit-exchange-shop-items.json`).pipe(s(1))),this._MERIT_EXCHANGE_SHOP_DATA$}#t(t,e){let A=typeof t=="string"?t:t();if(!A)throw new Error("Missing URL");let _=this.#s.get(A);return _||(_=H(t,P(o({},e),{injector:this.#e})),this.#s.set(A,_)),_}static{this.\u0275fac=(()=>{let t;return function(A){return(t||(t=c(i)))(A||i)}})()}static{this.\u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{g as a,l as b};
