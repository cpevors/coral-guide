import{a as ut}from"./chunk-266L4GPM.js";import{a as bt,b as Ct}from"./chunk-UNZFRYGV.js";import{a as P,b as Ye,c as et,d as tt,e as at,f as ft}from"./chunk-7M3TM3A7.js";import{h as nt,i as it,m as ot,p as rt,s as pt,t as ct}from"./chunk-NXT6GZDD.js";import{e as st,f as mt,h as dt,i as lt}from"./chunk-M6GVBANO.js";import{a as Pe,b as He}from"./chunk-YTR4EXEU.js";import{Ad as we,Ae as We,Ba as w,Bb as xe,Be as Je,Ca as le,Da as ce,Ea as f,Ed as Be,Fa as fe,Fb as ge,G as ee,Ga as O,Ha as L,Hb as J,Hd as Re,Ia as m,Ja as s,K as $,Ka as l,Kd as ne,La as j,Ld as Me,Ma as Q,N as F,Na as ue,Nb as ye,Nd as M,Oa as te,Oe as Ze,P as b,Q as G,Qa as A,Qd as Z,Ra as c,Sa as be,Sd as ke,T as se,Ta as Ce,Ub as De,V as q,W as U,Xb as Ie,Z as x,a as ie,ae as Ae,b as oe,ba as me,bb as C,cb as d,db as z,de as Ne,eb as ae,ee as Ve,ef as y,hc as _e,hd as Se,ja as o,kf as Xe,l as Y,ld as Ee,n as re,nb as B,oc as R,pb as K,pc as ve,qb as W,qd as Fe,qe as $e,re as Ge,sa as g,se as qe,td as Te,te as Ue,ub as he,ue as Oe,va as u,ve as Le,w as pe,we as je,x as V,xe as Qe,ya as de,ye as ze,za as p,ze as Ke}from"./chunk-2KIP47FU.js";var h=(()=>{let e=class e{constructor(){this.database=F(R)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=b({type:e,selectors:[["ng-component"]],inputs:{databaseItem:"databaseItem"},decls:0,vars:0,template:function(n,i){},encapsulation:2});let t=e;return t})();var At=["*"],D=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=b({type:e,selectors:[["app-database-header-button"]],inputs:{templateRef:"templateRef"},ngContentSelectors:At,decls:4,vars:6,consts:[["mat-button","",1,"hover:bg-black/10",3,"click"],[1,"flex","gap-x-2","items-center"],[1,"arrow"]],template:function(n,i){n&1&&(be(),m(0,"button",0),A("click",function(){return i.templateRef.toggle()}),m(1,"div",1),Ce(2),l(3,"i",2),s()()),n&2&&(o(3),w("down",!i.templateRef.open)("translate-y-[-3px]",i.templateRef.open)("up",i.templateRef.open))},dependencies:[et],encapsulation:2});let t=e;return t})();var Nt=t=>[t];function Vt(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Fishing"),s()(),l(5,"app-caught-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",B(2,Nt,a.fish))}}var xt=(()=>{let e=class e extends h{ngOnInit(){this.databaseItem.fish&&(this.fish=oe(ie({},this.databaseItem.fish),{item:this.databaseItem.item}))}};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-fishing"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Vt,6,4,"app-expandable",1),n&2&&f(i.fish?0:-1)},dependencies:[y,P,D],encapsulation:2});let t=e;return t})();var Gt=t=>[t];function qt(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Bugs and insects "),s()(),l(5,"app-caught-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",B(2,Gt,a.databaseItem.insect))}}var gt=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-insects"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,qt,6,4,"app-expandable",1),n&2&&f(i.databaseItem.insect?0:-1)},dependencies:[y,P,D],encapsulation:2});let t=e;return t})();var Ot=t=>[t];function Lt(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Ocean critters"),s()(),l(5,"app-caught-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",B(2,Ot,a.databaseItem.oceanCritter))}}var yt=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-sea-critters"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Lt,6,4,"app-expandable",1),n&2&&f(i.databaseItem.oceanCritter?0:-1)},dependencies:[y,P,D],encapsulation:2});let t=e;return t})();function Qt(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Seed for"),s()(),l(5,"app-crop-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.comesFromSeed)}}function zt(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"From seed"),s()(),l(5,"app-crop-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.isSeedFor)}}var Dt=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-crops"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Qt,6,2,"app-expandable",1)(1,zt,6,2,"app-expandable",1),n&2&&(f(i.databaseItem.comesFromSeed&&i.databaseItem.comesFromSeed.length?0:-1),o(),f(i.databaseItem.isSeedFor&&i.databaseItem.isSeedFor.length?1:-1))},dependencies:[y,Ye,D],encapsulation:2});let t=e;return t})();function Wt(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Usage in processing "),s()(),l(5,"app-processor-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.artisanIngredient)}}function Jt(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Processing"),s()(),l(5,"app-processor-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.artisanResult)}}var It=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-artisan"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showProcessor","",3,"dataSource"]],template:function(n,i){n&1&&u(0,Wt,6,2,"app-expandable",1)(1,Jt,6,2,"app-expandable",1),n&2&&(f(i.databaseItem.artisanIngredient&&i.databaseItem.artisanIngredient.length?0:-1),o(),f(i.databaseItem.artisanResult&&i.databaseItem.artisanResult.length?1:-1))},dependencies:[y,mt,D],encapsulation:2});let t=e;return t})();function Xt(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Used to craft"),s()(),l(5,"app-inventory-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.usedToCraft)}}function Yt(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Crafting recipe"),s()(),l(5,"app-inventory-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.craftedFrom)}}var _t=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-crafting"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Xt,6,2,"app-expandable",1)(1,Yt,6,2,"app-expandable",1),n&2&&(f(i.databaseItem.usedToCraft&&i.databaseItem.usedToCraft.length?0:-1),o(),f(i.databaseItem.craftedFrom&&i.databaseItem.craftedFrom.length?1:-1))},dependencies:[y,st,D],encapsulation:2});let t=e;return t})();function ta(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Usage in cooking "),s()(),l(5,"app-cooking-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.usedToCook)}}function aa(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Cooking recipe"),s()(),l(5,"app-cooking-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.cookedFrom)}}var vt=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-cooking"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showUtensil","",3,"dataSource"]],template:function(n,i){n&1&&u(0,ta,6,2,"app-expandable",1)(1,aa,6,2,"app-expandable",1),n&2&&(f(i.databaseItem.usedToCook&&i.databaseItem.usedToCook.length?0:-1),o(),f(i.databaseItem.cookedFrom&&i.databaseItem.cookedFrom.length?1:-1))},dependencies:[y,dt,D],encapsulation:2});let t=e;return t})();function ia(t,e){if(t&1&&(m(0,"td",14),l(1,"app-ui-icon",15),s()),t&2){let r=e.$implicit;o(),p("uiIcon",r.pref.icon)}}function oa(t,e){t&1&&(m(0,"th",16),d(1,"Preference"),s()),t&2&&de("colspan",2)}function ra(t,e){if(t&1&&(m(0,"td",17),d(1),s()),t&2){let r=e.$implicit;o(),ae(" ",r.pref.label," ")}}function pa(t,e){t&1&&(m(0,"th",16),d(1,"NPCs"),s())}function sa(t,e){if(t&1&&(m(0,"div",21),l(1,"app-item-icon",22),d(2),s()),t&2){let r=e.$implicit,a=e.$index,n=e.$count;w("mr-4",a!==n-1),o(),p("itemName",r.iconName),o(),ae(" ",r.characterName," ")}}function ma(t,e){if(t&1&&(m(0,"td",18)(1,"div",19),O(2,sa,3,4,"div",20,fe),s()()),t&2){let r=e.$implicit;o(2),L(r.npcs)}}function da(t,e){t&1&&l(0,"tr",23)}function la(t,e){t&1&&l(0,"tr",24)}function ca(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Gifting"),s()(),m(5,"app-responsive-table")(6,"table",4),j(7,5),u(8,ia,2,1,"td",6),Q(),j(9,7),u(10,oa,2,1,"th",8)(11,ra,2,1,"td",9),Q(),j(12,10),u(13,pa,2,0,"th",8)(14,ma,4,0,"td",11),Q(),u(15,da,1,0,"tr",12)(16,la,1,0,"tr",13),s()()()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(3),p("dataSource",a.databaseItem.asGift),o(9),p("matHeaderRowDef",a.displayedHeaderColumns)("matHeaderRowDefSticky",!0),o(),p("matRowDefColumns",a.displayedColumns)}}var Et=(()=>{let e=class e extends h{constructor(){super(...arguments),this.displayedHeaderColumns=["preference","npcs"],this.displayedColumns=["icon",...this.displayedHeaderColumns],this.favoritePreferences=[],this.lovePreferences=[],this.likePreferences=[],this.neutralPreferences=[],this.dislikePreferences=[],this.hatePreferences=[],this.dataSource=[],this.keys=["favoritePreferences","lovePreferences","likePreferences","neutralPreferences","dislikePreferences","hatePreferences"]}ngOnInit(){let a=this.databaseItem.item;if(!a)return;this.database.getGiftingPreferences().forEach(i=>{this.keys.forEach(_=>{i[_].findIndex(T=>T.type==="item"&&a.id===T.item.id)!==-1&&i.npc&&this[_].push(i.npc)})}),this.keys.forEach(i=>{let _=this[i];_.length&&this.dataSource.push({pref:ut.find(S=>S.preferenceField===i),npcs:_})})}};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-gifts"]],hostVars:2,hostBindings:function(n,i){n&2&&w("database-gifts",i.displayedHeaderColumns)},features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["mat-table","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 !pt-3 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","preference"],["class","backdrop-blur-xl","mat-header-cell","",4,"matHeaderCellDef"],["class","text-col !pl-0 whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","npcs"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","!pt-3","w-10","text-center","icon-col"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],["mat-header-cell","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","!pl-0","whitespace-nowrap"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"inline-flex","shrink-0","items-center",3,"mr-4"],[1,"inline-flex","shrink-0","items-center"],[1,"h-12","mr-2","!flex","items-center","shrink-0",3,"itemName"],["mat-header-row",""],["mat-row",""]],template:function(n,i){n&1&&u(0,ca,17,5,"app-expandable",1),n&2&&f(i.databaseItem.asGift&&i.databaseItem.asGift.length?0:-1)},dependencies:[M,$e,y,Ge,Ue,Qe,Oe,qe,ze,Le,je,Ke,We,Me,D],styles:[`.database-gifts .app-responsive-table .app-item-icon>img{aspect-ratio:unset;width:auto;max-height:3rem}
`],encapsulation:2});let t=e;return t})();function ua(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Required for offering "),s()(),l(5,"app-offerings-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.requiredAsOffering)}}function ba(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Offering reward"),s()(),l(5,"app-offerings-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.isBundleRewardIn)}}var Ft=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-offerings"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showAltar","",3,"dataSource"]],template:function(n,i){n&1&&u(0,ua,6,2,"app-expandable",1)(1,ba,6,2,"app-expandable",1),n&2&&(f(i.databaseItem.requiredAsOffering&&i.databaseItem.requiredAsOffering.length?0:-1),o(),f(i.databaseItem.isBundleRewardIn&&i.databaseItem.isBundleRewardIn.length?1:-1))},dependencies:[y,pt,D],encapsulation:2});let t=e;return t})();function ha(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Buy at"),s()(),l(5,"app-shop-item-data-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.buyAt)}}var Tt=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-shop-data"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,ha,6,2,"app-expandable",1),n&2&&f(i.databaseItem.buyAt&&i.databaseItem.buyAt.length?0:-1)},dependencies:[y,nt,D],encapsulation:2});let t=e;return t})();function ga(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Chance as processing result "),s()(),l(5,"app-shop-item-process-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.chanceAsProcessResult)}}function ya(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Can be processed at "),s()(),l(5,"app-shop-item-process-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.asProcessInput)}}var wt=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-shop-item-process"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,ga,6,2,"app-expandable",1)(1,ya,6,2,"app-expandable",1),n&2&&(f(i.databaseItem.chanceAsProcessResult&&i.databaseItem.chanceAsProcessResult.length?0:-1),o(),f(i.databaseItem.asProcessInput&&i.databaseItem.asProcessInput.length?1:-1))},dependencies:[y,it,D],encapsulation:2});let t=e;return t})();function Ia(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Is result of upgrade "),s()(),l(5,"app-item-upgrade-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.isUpgradeResult)}}function _a(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Is used as requirement in "),s()(),l(5,"app-item-upgrade-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.isUpgradeRequirement)}}var Bt=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-item-upgrade"]],features:[g],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Ia,6,2,"app-expandable",1)(1,_a,6,2,"app-expandable",1),n&2&&(f(i.databaseItem.isUpgradeResult&&i.databaseItem.isUpgradeResult.length?0:-1),o(),f(i.databaseItem.isUpgradeRequirement&&i.databaseItem.isUpgradeRequirement.length?1:-1))},dependencies:[y,ot,D],encapsulation:2});let t=e;return t})();function Sa(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Can be dropped from enemies "),s()(),l(5,"app-bestiary-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.fromEnemies)}}var Rt=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-bestiary"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Sa,6,2,"app-expandable",1),n&2&&f(i.databaseItem.fromEnemies&&i.databaseItem.fromEnemies.length?0:-1)},dependencies:[y,at,D],encapsulation:2});let t=e;return t})();function Fa(t,e){if(t&1&&(m(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Buy at festival"),s()(),l(5,"app-festival-shop-item-table",4),s()),t&2){let r=C(1),a=c();o(3),p("templateRef",r),o(2),p("dataSource",a.databaseItem.buyAtFestivalShop)}}var Mt=(()=>{let e=class e extends h{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-festival-shop-data"]],features:[g],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Fa,6,2,"app-expandable",1),n&2&&f(i.databaseItem.buyAtFestivalShop&&i.databaseItem.buyAtFestivalShop.length?0:-1)},dependencies:[y,rt,D],encapsulation:2});let t=e;return t})();function Ra(t,e){if(t&1&&(m(0,"app-card")(1,"header",0),l(2,"app-item-icon",1),m(3,"div",2)(4,"h2",3),d(5),s(),m(6,"span"),d(7),s()(),l(8,"div",4)(9,"app-quality-grid",5),s(),m(10,"p",6),d(11),s(),m(12,"div",7),d(13,"There's currently no data for this item. :("),s(),l(14,"app-database-shop-item-process",8)(15,"app-database-shop-data",8)(16,"app-database-offerings",8)(17,"app-database-crops",8)(18,"app-database-fishing",8)(19,"app-database-insects",8)(20,"app-database-sea-critters",8)(21,"app-database-artisan",8)(22,"app-database-cooking",8)(23,"app-database-crafting",8)(24,"app-database-festival-shop-data",8)(25,"app-database-gifts",8)(26,"app-database-item-upgrade",8)(27,"app-database-bestiary",8),s()),t&2){let r=e;o(2),p("itemName",r.item.iconName),o(3),z(r.item.displayName),o(2),z(r.item.id),o(2),p("showOnlyBase",!r.item.qualities.bronze)("item",r.item),o(2),z(r.item.description),o(3),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r),o(),p("databaseItem",r)}}function Ma(t,e){t&1&&(m(0,"app-card"),l(1,"mat-spinner",9),s())}function Pa(t,e){if(t&1&&(u(0,Ra,28,20,"app-card"),K(1,"async"),u(2,Ma,2,0,"app-card")),t&2){let r,a=c();f((r=W(1,1,a.databaseItem$))?0:2,r)}}var Pt=(()=>{let e=class e{constructor(){this.item=me.required(),this._databaseService=F(R),this._classes="col-span-full database-details"}ngOnInit(){this.databaseItem$=this._databaseService.fetchDatabaseItem$(this.item().id)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=b({type:e,selectors:[["app-database-details"]],hostVars:2,hostBindings:function(n,i){n&2&&le(i._classes)},inputs:{item:[1,"item"]},decls:1,vars:1,consts:[[1,"flex","items-center","flex-wrap","mb-5"],[1,"mr-3","w-14",3,"itemName"],[1,"flex","flex-col","gap-0.5"],[1,"!my-0","font-semibold","text-xl","text-black"],[1,"h-0","w-full","md:hidden"],["includePrices","",1,"md:ml-auto","mt-4","md:mt-0","quality-grid","inline-block","w-fit",3,"showOnlyBase","item"],[1,"text-lg"],[1,"empty-details","text-black","my-5","text-lg"],[3,"databaseItem"],[1,"mx-auto"]],template:function(n,i){n&1&&u(0,Pa,3,3),n&2&&f(i.databaseItem$?0:-1)},dependencies:[M,Z,ke,Pe,xt,gt,yt,Dt,It,_t,vt,Et,Ft,Tt,wt,Bt,Rt,Mt,J],styles:[`.database-details .empty-details{display:none}.database-details:not(:has(.database-header)) .empty-details{display:block}.database-details .expandable-body{transition:none}.quality-grid .app-item-icon>img{height:3.5rem}.database-header{color:#000;font-weight:600;font-size:1.25em;margin-top:1.2em;line-height:1.6}
`],encapsulation:2});let t=e;return t})();function Ha(t,e){if(t&1){let r=te();m(0,"app-card",1)(1,"div",5)(2,"h2"),d(3,"Important note"),s(),m(4,"p"),d(5,"The item list loads a lot of stuff, this may take a while. The list below shows everything, that got not filtered beforehand. Some of those items will never be obtainable as they only provide a technical purpose. The information shown per item are as complete as the rest of this website. When new features get added, the details in here will expand as well."),s(),m(6,"button",6),A("click",function(){q(r);let n=c();return U(n.hideImportantNote())}),d(7,"Got it!"),s()()()}}function ka(t,e){if(t&1){let r=te();m(0,"app-item-icon",9),A("mouseenter",function(){let n=q(r).$implicit,i=c(2);return U(i.prefetchItem(n))})("click",function(){let n=q(r),i=n.$implicit,_=n.$index,S=c(2);return U(S.showDetails(i,_))}),s()}if(t&2){let r=e.$implicit,a=c(2);w("selected-icon",(a.selectedItem==null?null:a.selectedItem.id)===r.id),p("itemName",r.iconName)}}function Aa(t,e){t&1&&ue(0)}function Na(t,e){if(t&1&&(O(0,ka,1,3,"app-item-icon",7,ce().trackById,!0),u(2,Aa,1,0,"ng-container",8)),t&2){let r=c();L(r.filteredItems),o(2),p("ngIf",r.initialItemLoad())}}var Ht=(()=>{let e=class e{constructor(){this.searchTermControl=new Fe("",{nonNullable:!0}),this.shouldHideImportantNote=!1,this.filteredItems=[],this._route=F(Be),this._router=F(Re),this._database=F(R),this._appRef=F(he),this._injector=F(se),this._title=F(De),this._localStorageHideNoteKey="databaseHideImportantNote",this._didInitialLoad=!1,this.shouldHideImportantNote=ve(localStorage.getItem(this._localStorageHideNoteKey)),this.items=this._database.getItems().filter(n=>_e(n.id)===Ie.BASE);let a=Y(n=>{let S=/tag:(?<tag>[a-zA-Z.]+)/gm.exec(n)?.groups?.tag.replace("tag:","").toLocaleLowerCase()??"",T=n.replace("tag:"+S,"").toLocaleLowerCase().trim(),N=this.items.filter(H=>{let k=!0;return S&&(k=!!H.tags?.some(X=>X.toLocaleLowerCase().includes(S))),k?H.displayName.toLocaleLowerCase().includes(T)||T.startsWith("item_")&&H.id.startsWith(T):!1});return this.filteredItems=N,N});this.filteredItems$=re(this._route.queryParams.pipe(Y(n=>{let i=n.q??"";return this.searchTermControl.setValue(i,{emitEvent:!1}),i}),a,V(1)),this.searchTermControl.valueChanges.pipe(pe(300),ee(n=>{this.updateQueryParam(n),document.getElementById("database-details")?.remove()}),a))}showDetails(a,n,i=!1){this.updateRouteParam(a.id),this.selectedItem=void 0,document.getElementById("database-details")?.remove();let _=document.getElementById("grid");if(!_)return;let T=window.getComputedStyle(_).getPropertyValue("grid-template-columns").split(" ").length,N=Math.floor(n/T),H=Math.min(this.filteredItems.length,(N+1)*T),k=document.querySelector(`#grid app-item-icon:nth-of-type(${H})`);if(!k)return;let X=this.createComponent(a);this.insertAfter(X,k),this.selectedItem=a,i&&setTimeout(()=>document.getElementById("database-details")?.scrollIntoView(!0),0)}insertAfter(a,n){n.parentNode?.insertBefore(a.location.nativeElement,n.nextSibling),this._appRef.attachView(a.hostView)}createComponent(a){let n=xe(Pt,{environmentInjector:this._injector});n.setInput("item",a);let i=n.location.nativeElement;return i.id="database-details",n}hideImportantNote(){this.shouldHideImportantNote=!0,localStorage.setItem(this._localStorageHideNoteKey,"true")}updateQueryParam(a){this._router.navigate([],{relativeTo:this._route,queryParams:{q:a},queryParamsHandling:"merge",replaceUrl:!0})}updateRouteParam(a){this._router.navigate(["..",a],{relativeTo:this._route,replaceUrl:!0,queryParamsHandling:"preserve"}).then(()=>!!this.selectedItem&&this.updateTitle(this.selectedItem.displayName))}initialItemLoad(){this._didInitialLoad||this._route.params.pipe(ee(a=>{let n=a.itemId;if(this._didInitialLoad=!0,!n)return;let i=this.filteredItems.findIndex(_=>_.id===n);if(i>-1)this.showDetails(this.filteredItems[i],i,!0);else if(this.filteredItems.length===0){let _=this.items.findIndex(S=>S.id===n);if(_>-1){let S=this.items[_];this._setGridContent(S)}}}),V(1)).subscribe()}trackById(a,n){return n.id}prefetchItem(a){this._database.fetchDatabaseItem$(a.id).pipe(V(1)).subscribe()}updateTitle(a){let n=this._title.getTitle();n&&this._title.setTitle(`${a} - ${n}`)}_setGridContent(a){let n=this.createComponent(a);document.getElementById("grid")?.appendChild(n.location.nativeElement),this._appRef.attachView(n.hostView),this.selectedItem=a}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=b({type:e,selectors:[["app-database"]],decls:9,vars:5,consts:[[1,"container","mx-auto","pb-6","database-grid","px-2"],[1,"my-3"],[1,"semi-transparent-form-field","my-3"],["matInput","",3,"formControl"],["id","grid",1,"icon-grid"],[1,"prose","lg:prose-xl"],[1,"btn","btn-secondary",3,"click"],[1,"icon-grid-item",3,"selected-icon","itemName"],[4,"ngIf"],[1,"icon-grid-item",3,"mouseenter","click","itemName"]],template:function(n,i){n&1&&(m(0,"div",0),u(1,Ha,8,0,"app-card",1),m(2,"mat-form-field",2)(3,"mat-label"),d(4,"Search term"),s(),l(5,"input",3),s(),m(6,"div",4),u(7,Na,3,1,"ng-container"),K(8,"async"),s()()),n&2&&(o(),f(i.shouldHideImportantNote?-1:1),o(4),p("formControl",i.searchTermControl),o(2),f(W(8,3,i.filteredItems$)?7:-1))},dependencies:[ge,M,Z,Ne,Ae,bt,Se,Ee,Te,J],encapsulation:2});let t=e;return t})();var Va=[{path:"",component:Ht,title:"Database"}],kt=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=G({type:e}),e.\u0275inj=$({imports:[ne.forChild(Va),ne]});let t=e;return t})();var Ki=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=G({type:e}),e.\u0275inj=$({imports:[ye,kt,Xe,Ve,Ct,we,He,ft,lt,ct,tt,Ze,Je]});let t=e;return t})();export{Ki as DatabaseModule};
