import{a as G}from"./chunk-D6GVJ3WT.js";import"./chunk-LBSZLZCM.js";import{a as z}from"./chunk-XK52KKFL.js";import"./chunk-IR2VG2X3.js";import{a as V}from"./chunk-DJSJMWKS.js";import{a as j}from"./chunk-JGF6KBFK.js";import"./chunk-QEWZLHID.js";import"./chunk-2K3GEZZY.js";import"./chunk-7A5ZJ3YN.js";import"./chunk-2A7PSW7O.js";import"./chunk-VO65IASJ.js";import{b as N,c as U}from"./chunk-PIL2IJC4.js";import"./chunk-OOBQPUIX.js";import"./chunk-OM3WRHFD.js";import{b as R}from"./chunk-VYOS5CGL.js";import"./chunk-5MLMU7SK.js";import"./chunk-GEWE6M22.js";import"./chunk-SJRCRC22.js";import{a as L}from"./chunk-X3TMHFY3.js";import"./chunk-2CFRUPNI.js";import{a as A}from"./chunk-F6RS7OIB.js";import"./chunk-KW5235UB.js";import{b as O}from"./chunk-7JOAVXDE.js";import"./chunk-7SDYZQX7.js";import"./chunk-KUYOE2KN.js";import"./chunk-AJOFB37Q.js";import{$b as w,Ba as v,Gc as C,Hc as u,Ib as d,Kb as T,Ob as l,Qb as h,Rb as x,Sb as D,Tb as a,Tc as P,Ub as p,Vb as _,Wb as k,Xb as q,Zb as b,ac as c,db as r,ld as F,ma as y,na as M,od as $,rc as m,sb as f,sc as B,tc as S,wb as I,yb as s}from"./chunk-GYX7HZX3.js";import"./chunk-4CLCTAJ7.js";var J=(()=>{class e{constructor(){this.amount=v.required({transform:P})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=f({type:e,selectors:[["app-merit-points"]],inputs:{amount:[1,"amount"]},decls:3,vars:3,consts:[["src","assets/ui/images/icons/T_Icon_Merit.png",1,"app-merit-points-icon"]],template:function(i,o){i&1&&(m(0),C(1,"number"),_(2,"img",0)),i&2&&B(u(1,1,o.amount()))},dependencies:[$],styles:["[_nghost-%COMP%]{white-space:nowrap}.app-merit-points-icon[_ngcontent-%COMP%]{height:1em;display:inline-block;vertical-align:text-top;margin-left:2px}"]})}}return e})();function Q(e,n){if(e&1&&_(0,"app-effect",5),e&2){let t=n.$implicit;d("effect",t)}}function W(e,n){if(e&1&&(a(0,"div",3),m(1,"Effects when bought: "),a(2,"div",4),x(3,Q,1,1,"app-effect",5,h),p()()),e&2){let t=c();r(3),D(t)}}function X(e,n){e&1&&s(0,W,5,0,"div",3),e&2&&l(n.length?0:-1)}function Y(e,n){if(e&1&&m(0),e&2){let t=c(2);S(" Unlock requirements (",t.type==="And"?"all":"any"," of them): ")}}function Z(e,n){e&1&&m(0," Unlock requirement: ")}function ee(e,n){if(e&1&&_(0,"app-requirements",6),e&2){let t=n.$implicit;d("requirement",t)}}function te(e,n){if(e&1&&(a(0,"div",3),s(1,Y,1,1)(2,Z,1,0),a(3,"div",4),x(4,ee,1,1,"app-requirements",6,h),p()()),e&2){let t=c();r(),l(t.requirements.length>1?1:-1),r(),l(t.requirements.length<2?2:-1),r(2),D(t.requirements)}}function ie(e,n){e&1&&s(0,te,6,2,"div",3),e&2&&l(n.requirements.length?0:-1)}var K=(()=>{class e{constructor(){this.meritExchangeData=v.required()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=f({type:e,selectors:[["app-merit-shop-details"]],inputs:{meritExchangeData:[1,"meritExchangeData"]},decls:16,vars:8,consts:[[3,"item"],[1,"text-black"],[3,"amount"],[1,"my-2"],[1,"flex","flex-col","text-black"],[3,"effect"],[3,"requirement"]],template:function(i,o){if(i&1&&(a(0,"app-base-item-card",0)(1,"div"),m(2,"Buy price: "),a(3,"span",1),_(4,"app-merit-points",2),p()(),a(5,"div"),m(6,"Amount Limit: "),a(7,"span",1),m(8),p()(),a(9,"div"),m(10,"Town rank: "),a(11,"span",1),m(12),C(13,"townrank"),p()(),s(14,X,1,1)(15,ie,1,1),p()),i&2){let g,E;d("item",o.meritExchangeData().item),r(4),d("amount",o.meritExchangeData().priceOverride!==0?o.meritExchangeData().priceOverride:o.meritExchangeData().item.price),r(4),S(" ",o.meritExchangeData().isLimitedItem?"x"+o.meritExchangeData().itemLimit:"not limited"," "),r(4),S(" ",u(13,6,o.meritExchangeData().townRank)," "),r(2),l((g=o.meritExchangeData().effects)?14:-1,g),r(),l((E=o.meritExchangeData().requirements)?15:-1,E)}},dependencies:[J,z,j,V,G],encapsulation:2})}}return e})();function ne(e,n){if(e&1&&_(0,"app-merit-shop-details",1),e&2){let t=c();d("meritExchangeData",t.selectedEntity)}}function oe(e,n){if(e&1){let t=b();a(0,"app-item-icon",7),w("click",function(){let o=y(t).$implicit,g=c(4);return M(g.showDetails(o))}),p()}if(e&2){let t=n.$implicit,i=c(4);T("selected-icon",(i.selectedEntity==null||i.selectedEntity.item==null?null:i.selectedEntity.item.id)===t.item.id),d("itemName",t.item.iconName)}}function ae(e,n){if(e&1&&(a(0,"div",5),x(1,oe,1,3,"app-item-icon",6,h),p()),e&2){let t=c();r(),D(t)}}function re(e,n){if(e&1&&s(0,ae,3,0,"div",5),e&2){let t=c(2);l(t.showTable?-1:0)}}function me(e,n){if(e&1&&(a(0,"h2",4),m(1,"Stock list"),p(),s(2,re,1,1),C(3,"async")),e&2){let t,i=c();r(2),l((t=u(3,1,i.shopItemData$))?2:-1,t)}}var ke=(()=>{class e extends U{constructor(){super(),this.uiIcon=O,this.shopItemData$=this._database.fetchMeritExchangeShopData$()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=f({type:e,selectors:[["app-merit-shop"]],features:[I],decls:8,vars:3,consts:[["listDetail",""],[3,"meritExchangeData"],[1,"mb-4","font-semibold","text-3xl","text-black","flex","items-center","gap-x-4"],[3,"uiIcon"],[1,"mt-6","mb-3","font-semibold","text-2xl","text-white"],[1,"icon-grid"],[1,"icon-grid-item",3,"selected-icon","itemName"],[1,"icon-grid-item",3,"click","itemName"]],template:function(i,o){i&1&&(a(0,"app-list-detail-container"),k(1,0),s(2,ne,1,1,"app-merit-shop-details",1),q(),a(3,"app-card")(4,"h1",2),_(5,"app-ui-icon",3),m(6," Merit Exchange "),p()(),s(7,me,4,3),p()),i&2&&(r(2),l(o.selectedEntity?2:-1),r(3),d("uiIcon",o.uiIcon.STORE),r(2),l(o.shopItemData$?7:-1))},dependencies:[A,L,K,N,R,F],encapsulation:2})}}return e})();export{ke as MeritShopComponent};
