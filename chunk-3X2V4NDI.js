import{a as pe}from"./chunk-BBGCMQI3.js";import"./chunk-HB6QOK6I.js";import{a as me}from"./chunk-P6Q462AG.js";import{a as ne}from"./chunk-ASRLPB3X.js";import{a as ae,b as re}from"./chunk-4ABN5UX5.js";import{a as le}from"./chunk-HAQCTNSN.js";import{a as ce}from"./chunk-GVD6I65I.js";import"./chunk-J5YIE2TK.js";import"./chunk-7R6UEU2W.js";import{a as oe}from"./chunk-VSL7YAPH.js";import{a as te}from"./chunk-3HO42MXC.js";import{a as ie}from"./chunk-Z5UBBEAD.js";import"./chunk-EKZGRJW6.js";import"./chunk-CXV365G5.js";import{a as A}from"./chunk-62SYQGLQ.js";import"./chunk-WQWM5V3T.js";import"./chunk-FGYBINTK.js";import"./chunk-OBPRYC72.js";import"./chunk-EKOP5NP3.js";import"./chunk-N2KJDITY.js";import"./chunk-NGYDMITL.js";import"./chunk-YQVLGDGS.js";import"./chunk-6Q5ZQTY6.js";import{a as ee}from"./chunk-5C6YMBLV.js";import"./chunk-VXQBK2DC.js";import"./chunk-XZWLFQMH.js";import"./chunk-XSV5HIP5.js";import"./chunk-VJUOC7OS.js";import"./chunk-EIGW5THG.js";import{c as R}from"./chunk-FKRWSLGD.js";import{b as J,c as Q}from"./chunk-4RPGNDDY.js";import"./chunk-O3BKA2PM.js";import{a as X}from"./chunk-U7G2FOHA.js";import{b as Z}from"./chunk-EV4S2XUE.js";import"./chunk-VA7RNGDO.js";import"./chunk-IIRYQ5NI.js";import"./chunk-HU7WFQWJ.js";import"./chunk-JCTEBOW5.js";import"./chunk-SJRCRC22.js";import{a as W}from"./chunk-JL222CZ7.js";import"./chunk-YRO5LM32.js";import{a as z}from"./chunk-TIIEJEUC.js";import"./chunk-PS3FMX3M.js";import{b as P}from"./chunk-7JOAVXDE.js";import"./chunk-KLZCJ54W.js";import{b as U,c as Y}from"./chunk-PYPF6S35.js";import"./chunk-FJWSANLQ.js";import{Ac as O,Ba as b,Bc as j,Cc as q,Hc as u,Ic as E,Jb as d,Jc as G,Lb as H,Pb as l,Rb as f,Sb as g,Tb as v,Ub as a,Vb as r,Wb as s,_b as S,ac as k,bb as L,bc as m,db as i,ea as N,fc as M,ic as K,ma as T,md as w,na as y,q as B,qa as $,qc as F,sb as I,sc as o,tc as x,uc as C,vc as D,wb as V,zb as _}from"./chunk-J7WD3OMO.js";import"./chunk-4CLCTAJ7.js";function ge(e,n){if(e&1&&(a(0,"div",3),o(1),r()),e&2){let t=n.$implicit;i(),D("",t.key," : ",t.value?"Has to be seen":"Has to be unseen"," ")}}function ve(e,n){if(e&1&&(g(0,ge,2,2,"div",3,f),u(2,"keyvalue")),e&2){let t=n.$implicit;v(E(2,0,t))}}function xe(e,n){if(e&1&&(a(0,"div"),o(1,"Other cutscenes requirements: "),g(2,ve,3,2,null,null,f),r()),e&2){let t=m();i(2),v(t.heartEventTrigger().otherCutscenesState)}}function Ce(e,n){if(e&1&&(a(0,"div"),o(1,"Only on days: "),a(2,"span",3),o(3),r()()),e&2){let t=m();i(3),x(t.heartEventTrigger().specificDay.join(", "))}}function he(e,n){if(e&1&&(a(0,"div"),o(1,"Only in seasons: "),a(2,"span",3),o(3),r()()),e&2){let t=m();i(3),x(t.heartEventTrigger().specificMonth.join(", "))}}function ue(e,n){if(e&1&&(a(0,"div"),o(1,"Only with weather: "),a(2,"span",3),o(3),r()()),e&2){let t=m();i(3),x(t.heartEventTrigger().specificWeather.join(", "))}}function Ee(e,n){if(e&1&&s(0,"app-effect",7),e&2){let t=n.$implicit;d("effect",t)}}function Te(e,n){if(e&1&&(a(0,"div",4)(1,"span",5),o(2,"Effects when seen"),r(),a(3,"div",6),g(4,Ee,1,1,"app-effect",7,f),r()()),e&2){let t=m();i(4),v(t.heartEventTrigger().effects)}}function ye(e,n){if(e&1&&o(0),e&2){m(2);let t=q(0);C(" Unlock requirements (",t.type==="And"?"all":"any"," of them): ")}}function be(e,n){e&1&&o(0," Unlock requirement: ")}function Ie(e,n){if(e&1&&s(0,"app-requirements",8),e&2){let t=n.$implicit;d("requirement",t)}}function Se(e,n){if(e&1&&(a(0,"div",4)(1,"span",5),_(2,ye,1,1)(3,be,1,0),r(),a(4,"div",6),g(5,Ie,1,1,"app-requirements",8,f),r()()),e&2){m();let t=q(0);i(2),l(t.requirements.length>1?2:-1),i(),l(t.requirements.length<2?3:-1),i(2),v(t.requirements)}}var se=(()=>{class e{constructor(){this.heartEventTrigger=b.required(),this.heartEventChecklist=N(pe)}toggleHeartEvent(t){t?this.heartEventChecklist.add(this.heartEventTrigger().cutscene):this.heartEventChecklist.remove(this.heartEventTrigger().cutscene)}static{this.\u0275fac=function(c){return new(c||e)}}static{this.\u0275cmp=I({type:e,selectors:[["app-heart-event-trigger"]],inputs:{heartEventTrigger:[1,"heartEventTrigger"]},decls:33,vars:19,consts:[[1,"flex","justify-between","text-black","mb-1"],[1,"flex","flex-col"],[3,"change","checked"],[1,"text-black"],[1,"my-4"],[1,"text-lg","text-black"],[1,"flex","flex-col","text-black"],[3,"effect"],[3,"requirement"]],template:function(c,p){if(c&1){let h=S();O(0),a(1,"header",0)(2,"div",1)(3,"h4"),o(4),r(),a(5,"span"),o(6),r()(),a(7,"mat-checkbox",2),k("change",function(fe){return T(h),y(p.toggleHeartEvent(fe.checked))}),o(8,"Cutscene seen "),r()(),a(9,"div"),o(10,"Enabled: "),a(11,"span",3),o(12),r()(),a(13,"div"),o(14,"Location: "),a(15,"span",3),o(16),r()(),a(17,"div"),o(18,"Day Time of day: "),a(19,"span",3),o(20),u(21,"ingameTime"),u(22,"ingameTime"),r()(),a(23,"div"),o(24,"Can trigger on the same day: "),a(25,"span",3),o(26),r()(),_(27,xe,4,0,"div")(28,Ce,4,1,"div")(29,he,4,1,"div")(30,ue,4,1,"div")(31,Te,6,0,"div",4)(32,Se,7,2,"div",4)}if(c&2){let h=j(p.heartEventTrigger().requirements);i(4),x(p.heartEventTrigger().cutscene),i(2),C("Id: ",p.heartEventTrigger().id," "),i(),d("checked",p.heartEventChecklist.isChecked(p.heartEventTrigger().cutscene)),i(5),x(p.heartEventTrigger().enabled?"Yes":"No"),i(4),x(p.heartEventTrigger().location),i(4),D(" ",E(21,15,p.heartEventTrigger().time.fromTime),"-",E(22,17,p.heartEventTrigger().time.toTime),`
`),i(6),x(p.heartEventTrigger().canTriggerSameDay?"Yes":"No"),i(),l(p.heartEventTrigger().otherCutscenesState.length?27:-1),i(),l(p.heartEventTrigger().specificDay.length?28:-1),i(),l(p.heartEventTrigger().specificMonth.length?29:-1),i(),l(p.heartEventTrigger().specificWeather.length?30:-1),i(),l(p.heartEventTrigger().effects&&p.heartEventTrigger().effects.length?31:-1),i(),l(h&&h.requirements.length?32:-1)}},dependencies:[ce,te,w,le,A],styles:["[_nghost-%COMP%]{display:block}"]})}}return e})();function ke(e,n){e&1&&s(0,"hr",5)}function Ne(e,n){if(e&1&&(s(0,"app-heart-event-trigger",4),_(1,ke,1,0,"hr",5)),e&2){let t=n.$implicit,c=n.$index,p=n.$count;H("mb-3",c===p-1),d("heartEventTrigger",t),i(),l(c!==p-1?1:-1)}}function we(e,n){if(e&1){let t=S();a(0,"app-expandable",1,0)(2,"h3",2),k("click",function(){T(t);let p=F(1);return y(p.toggle())}),o(3),s(4,"i",3),r(),g(5,Ne,2,4,null,null,f),r()}if(e&2){let t=n.$implicit,c=F(1);i(3),C(" ",t.heartLevel," hearts event "),i(),H("down",!c.isOpen())("up",c.isOpen()),i(),v(t.trigger)}}var _e=(()=>{class e{constructor(){this.heartEvents=b.required()}static{this.\u0275fac=function(c){return new(c||e)}}static{this.\u0275cmp=I({type:e,selectors:[["app-heart-events"]],inputs:{heartEvents:[1,"heartEvents"]},decls:2,vars:0,consts:[["expandable",""],[1,"bg-amber-50/70","px-4","rounded-lg","mb-3","shadow-sm"],["expandableHeader","",1,"text-xl","text-black","flex","items-center","justify-between","cursor-pointer","py-4",3,"click"],[1,"arrow"],[3,"heartEventTrigger"],[1,"my-3"]],template:function(c,p){c&1&&g(0,we,7,5,"app-expandable",1,f),c&2&&v(p.heartEvents())},dependencies:[se,ie],encapsulation:2})}}return e})();function He(e,n){if(e&1&&s(0,"app-offering",3),e&2){let t=n.$implicit;d("details",t)}}function Fe(e,n){if(e&1&&(a(0,"app-item-card-switch",0),_(1,He,1,1,"ng-template",2),r()),e&2){let t=m();d("item",t.selectedEntity)}}function De(e,n){if(e&1&&s(0,"app-ui-icon",8),e&2){let t=m(2);M("matTooltip","",t.npc.characterName," is dateable"),d("uiIcon",t.uiIcon.LOVE)}}function qe(e,n){if(e&1&&(a(0,"div",9),s(1,"app-ui-icon",16),o(2),u(3,"ingameDate"),r()),e&2){let t=m(2);i(),d("uiIcon",t.uiIcon.BIRTHDAY),i(),C(" ",E(3,2,t.npc.birthday)," ")}}function Pe(e,n){if(e&1&&(a(0,"p",10),o(1),r()),e&2){let t=m(2);i(),x(t.npc.description)}}function Be(e,n){if(e&1){let t=S();a(0,"app-gifting-grid",17),k("itemClicked",function(p){T(t);let h=m(2);return y(h.showDetails(p))}),r()}if(e&2){let t=m(2);d("preferences",t.giftingPreferences)}}function $e(e,n){if(e&1&&(a(0,"p",14),o(1),r()),e&2){let t=m(2);i(),C(" ",t.npc.characterName," has no specialized preferences. ")}}function Le(e,n){if(e&1&&s(0,"app-heart-events",15),e&2){let t=m(2);d("heartEvents",t.heartEvents)}}function Ve(e,n){if(e&1&&(a(0,"p",14),o(1),r()),e&2){let t=m(2);i(),C(" ",t.npc.characterName," has no heart events. ")}}function Me(e,n){if(e&1&&(a(0,"h3",18),o(1),r()),e&2){let t=m().$implicit;i(),C(" ",t.appearanceCategory," ")}}function Ke(e,n){if(e&1&&(a(0,"div",22)(1,"a",23),s(2,"app-ui-icon",24),r(),s(3,"app-npc-portrait",25),a(4,"span",26),o(5),r()()),e&2){let t=n.$implicit,c=m(6);i(),K("href","assets/",c.environment,"/portraits/",c.npc.key,"/",t.value,".webp?v=",c.version,"",L),i(),d("uiIcon",c.UiIcon.MAGNIFYING_GLASS),i(),d("npcKey",c.npc.key)("portraitName",t.value),i(2),x(t.key)}}function Oe(e,n){if(e&1&&(a(0,"div",19)(1,"h4",20),o(2),r(),a(3,"div",21),g(4,Ke,6,9,"div",22,f),u(6,"keyvalue"),r()()),e&2){let t=n.$implicit;i(2),x(t.key),i(2),v(E(6,1,t.value))}}function je(e,n){if(e&1&&g(0,Oe,7,3,"div",19,f),e&2){let t=m();v(t)}}function Ge(e,n){if(e&1&&(a(0,"p",14),o(1),r()),e&2){let t=m(4);i(),C(" ",t.npc.characterName," has no appearances. ")}}function Ue(e,n){if(e&1&&_(0,je,2,0)(1,Ge,2,1,"p",14),e&2){let t=n;l(t.length?0:-1),i(),l(t.length?-1:1)}}function Ae(e,n){if(e&1&&(_(0,Me,2,1,"h3",18)(1,Ue,2,2),u(2,"keyvalue")),e&2){let t,c=n.$implicit;l(c.appearanceCategory?0:-1),i(),l((t=G(2,2,c.appearances,null))?1:-1,t)}}function Ye(e,n){if(e&1&&(a(0,"app-card")(1,"div",4),s(2,"app-item-icon",5),a(3,"div",6)(4,"div",7),o(5),_(6,De,1,3,"app-ui-icon",8),r(),_(7,qe,4,4,"div",9),r()(),_(8,Pe,2,1,"p",10),r(),a(9,"app-card",11)(10,"h2",12),o(11," Gifting "),r(),_(12,Be,1,1,"app-gifting-grid",13)(13,$e,2,1,"p",14),r(),a(14,"app-card",11)(15,"h2",12),o(16," Heart events "),r(),_(17,Le,1,1,"app-heart-events",15)(18,Ve,2,1,"p",14),r(),a(19,"app-card",11)(20,"h2",12),o(21," Appearances "),r(),g(22,Ae,3,5,null,null,f),r()),e&2){let t=m();i(2),d("itemName",t.npc.iconName),i(3),C(" ",t.npc.characterName," "),i(),l(t.npc.isDateable?6:-1),i(),l(t.npc.birthday?7:-1),i(),l(t.npc.description?8:-1),i(4),l(t.giftingPreferences?12:-1),i(),l(t.giftingPreferences?-1:13),i(4),l(t.heartEvents.length?17:-1),i(),l(t.heartEvents.length?-1:18),i(4),v(t.npc.appearances)}}function ze(e,n){e&1&&(a(0,"app-card")(1,"h1",27),o(2," NPC not found. "),r()())}function Re(e,n){e&1&&s(0,"mat-spinner",1)}var Dt=(()=>{class e extends Q{constructor(){super(...arguments),this.npcKey=b.required(),this.npc=null,this.heartEvents=[],this.UiIcon=P,this.uiIcon=P,this.environment=N(U).getSettings().useBeta?"beta":"live",this.version=N(Y).value()}ngOnInit(){B([this._database.fetchNPCs$(),this._database.fetchHeartEvents$(),this._database.fetchGiftingPreferences$()]).subscribe({next:([t,c,p])=>{this.npc=t.find(h=>h.key.toLowerCase()===this.npcKey().toLowerCase()),this.heartEvents=c[this.npcKey().toLowerCase()]??[],this.giftingPreferences=p.find(h=>h.mapKey.toLowerCase()===this.npc?.key.toLowerCase())}})}static{this.\u0275fac=(()=>{let t;return function(p){return(t||(t=$(e)))(p||e)}})()}static{this.\u0275cmp=I({type:e,selectors:[["app-npc"]],inputs:{npcKey:[1,"npcKey"]},features:[V],decls:5,vars:2,consts:[["listDetail","",3,"item"],[1,"mx-auto","text-white"],["appDatabaseItemDetails",""],[3,"details"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"mt-2"],[1,"mt-6"],[1,"mb-4","font-semibold","text-2xl","text-black"],[3,"preferences"],[1,"text-black","text-lg"],[3,"heartEvents"],[1,"!h-6","!w-6",3,"uiIcon"],[3,"itemClicked","preferences"],[1,"mb-4","font-semibold","text-xl","text-black"],[1,"font-semibold","text-black","mb-6"],[1,"text-lg"],[1,"grid","portrait-grid","gap-4"],[1,"flex","flex-col","shadow-lg","p-2","relative","group"],["target","_blank",1,"hidden","group-focus-visible:block","group-hover:block","absolute","top-2.5","right-2.5",3,"href"],[3,"uiIcon"],[1,"h-[400px]","flex","items-end","justify-center",3,"npcKey","portraitName"],[1,""],[1,"mb-4","font-semibold","text-3xl","text-black","flex","items-center","gap-x-4"]],template:function(c,p){c&1&&(a(0,"app-list-detail-container"),_(1,Fe,2,1,"app-item-card-switch",0)(2,Ye,24,9)(3,ze,3,0,"app-card")(4,Re,1,0,"mat-spinner",1),r()),c&2&&(i(),l(p.selectedEntity?1:-1),i(),l(p.npc?2:p.npc===void 0?3:p.npc===null?4:-1))},dependencies:[J,re,ae,Z,W,z,oe,ne,_e,w,me,R,ee,X],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.portrait-grid .npc-portrait img{max-height:400px}@media (min-width: 1280px){.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
`],encapsulation:2})}}return e})();export{Dt as NpcComponent};
