"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[996],{4996:(it,T,a)=>{a.r(T),a.d(T,{CraftingModule:()=>I});var r=a(6895),J=a(1699),m=a(1667),w=a(15),L=a(5583),t=a(4650),y=a(9969),D=a(2364),A=a(5141),U=a(973);function O(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"app-module-sidebar-item",2),t._uU(2,"Inventory-Crafting "),t.qZA(),t.TgZ(3,"app-module-sidebar-item",3),t._uU(4,"Processing "),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("uiIcon",e.UI_ICONS.CRAFTING),t.xp6(2),t.Q6J("uiIcon",e.UI_ICONS.ARTISAN)}}class _{constructor(n){this._databaseService=n,this.UI_ICONS=w.a,this.addSpacesToPascalCase=L.gA,this.itemProcessingRecipes$=this._databaseService.fetchItemProcessingRecipes$()}static#t=this.\u0275fac=function(e){return new(e||_)(t.Y36(y.k))};static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-crafting"]],decls:5,vars:3,consts:[[4,"ngIf"],[1,"hidden"],["routerLink","inventory",3,"uiIcon"],["routerLink","artisan",3,"uiIcon"]],template:function(e,c){1&e&&(t.TgZ(0,"app-sidebar-container")(1,"app-module-sidebar"),t.YNc(2,O,5,2,"ng-container",0),t.ALo(3,"async"),t.qZA(),t._UZ(4,"router-outlet",1),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,c.itemProcessingRecipes$)))},dependencies:[r.O5,m.lC,m.rH,D.R,A.z,U.L,r.Ov]})}var C=a(9841),N=a(4004),v=a(9813),Z=a(9473),l=a(3848),b=a(4175);function Y(i,n){if(1&i&&(t.TgZ(0,"div",5),t._UZ(1,"app-item-icon",6),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("itemName",e.item.iconName),t.xp6(2),t.Oqu(e.item.displayName)}}function F(i,n){if(1&i&&(t.ynx(0),t.YNc(1,Y,4,2,"div",4),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.item)}}function P(i,n){1&i&&(t.ynx(0),t._uU(1," (all the same)"),t.BQk())}function $(i,n){if(1&i&&(t.TgZ(0,"div",5),t._UZ(1,"app-item-icon",6),t.TgZ(2,"span"),t._uU(3),t.YNc(4,P,2,0,"ng-container",2),t.qZA()()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("itemName",e.genericItem.iconName),t.xp6(2),t.hij("",e.genericItem.displayName," "),t.xp6(1),t.Q6J("ngIf",e.shouldBeSameItem)}}function E(i,n){if(1&i&&(t.ynx(0),t.YNc(1,$,5,3,"div",4),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.genericItem)}}function R(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,F,2,1,"ng-container",2),t.YNc(3,E,2,1,"ng-container",2),t.TgZ(4,"div",3),t._uU(5),t.qZA()(),t._UZ(6,"hr"),t.BQk()),2&i){const e=n.$implicit,c=t.oxw();t.xp6(2),t.Q6J("ngIf",!c.isGenericEntry(e)),t.xp6(1),t.Q6J("ngIf",c.isGenericEntry(e)),t.xp6(2),t.Oqu(e.amount)}}class g{isGenericEntry(n){return"genericItem"in n}static#t=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275cmp=t.Xpm({type:g,selectors:[["app-item-list"]],inputs:{itemList:"itemList"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"flex","justify-between","py-1"],[4,"ngIf"],[1,"flex","items-center"],["class","flex gap-x-3 items-center",4,"ngIf"],[1,"flex","gap-x-3","items-center"],[1,"w-10",3,"itemName"]],template:function(e,c){1&e&&t.YNc(0,R,7,3,"ng-container",0),2&e&&t.Q6J("ngForOf",c.itemList)},dependencies:[r.sg,r.O5,v.D]})}function B(i,n){if(1&i&&(t.TgZ(0,"div"),t._uU(1," Unlocked: "),t.TgZ(2,"span",4),t._uU(3),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.AsE("Level ",e.craftingRecipe.craftingUnlock.masteryLevel," in ",e.craftingRecipe.craftingUnlock.masteryType,"")}}function k(i,n){if(1&i&&(t.TgZ(0,"app-base-item-card",1),t.YNc(1,B,4,2,"div",2),t._UZ(2,"app-item-list",3),t.qZA()),2&i){const e=t.oxw();t.Q6J("item",e.craftingRecipe.item),t.xp6(1),t.Q6J("ngIf",e.craftingRecipe.craftingUnlock),t.xp6(1),t.Q6J("itemList",e.itemList)}}class d{ngOnChanges(n){let e=n.craftingRecipe?.currentValue;e&&(this.itemList=[...e.ingredients,...e.genericIngredients])}static#t=this.\u0275fac=function(e){return new(e||d)};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-inventory-details"]],inputs:{craftingRecipe:"craftingRecipe"},features:[t.TTD],decls:1,vars:1,consts:[[3,"item",4,"ngIf"],[3,"item"],[4,"ngIf"],[1,"mb-3",3,"itemList"],[1,"text-black"]],template:function(e,c){1&e&&t.YNc(0,k,3,3,"app-base-item-card",0),2&e&&t.Q6J("ngIf",c.craftingRecipe&&c.craftingRecipe.item)},dependencies:[r.O5,b.T,g]})}function S(i,n){if(1&i&&t._UZ(0,"app-inventory-details",5),2&i){const e=t.oxw();t.Q6J("craftingRecipe",e.selectedEntity)}}function j(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"app-item-icon",8),t.NdJ("click",function(){const o=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.showDetails(o))}),t.qZA()}if(2&i){const e=n.$implicit;t.Q6J("itemName",null==e.item?null:e.item.iconName)}}function M(i,n){if(1&i&&(t.TgZ(0,"div",6),t.YNc(1,j,1,1,"app-item-icon",7),t.qZA()),2&i){const e=n.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}class f{constructor(n){this._database=n,this.openDrawer=!1,this.recipes$=(0,C.a)([n.fetchCraftingRecipes$(),n.fetchItems$(),n.fetchTagBasedItems$()]).pipe((0,N.U)(([e,c,s])=>(e.forEach(o=>{o.item=c.find(p=>p.id===o.key.toLowerCase()),o.genericIngredients.forEach(p=>p.genericItem=s.find(x=>x.key===p.key))}),e)))}showDetails(n){this.selectedEntity=n,this.openDrawer=!0}static#t=this.\u0275fac=function(e){return new(e||f)(t.Y36(y.k))};static#e=this.\u0275cmp=t.Xpm({type:f,selectors:[["app-inventory"]],decls:6,vars:5,consts:[[3,"openDrawer","openDrawerChange"],["listDetail","",3,"craftingRecipe",4,"ngIf"],["mat-stretch-tabs","false",1,"px-2","xl:px-[50px]","w-full"],["label","All"],["class","grid gap-4 icon-grid",4,"ngIf"],["listDetail","",3,"craftingRecipe"],[1,"grid","gap-4","icon-grid"],["class","icon-grid-item",3,"itemName","click",4,"ngFor","ngForOf"],[1,"icon-grid-item",3,"itemName","click"]],template:function(e,c){1&e&&(t.TgZ(0,"app-list-detail-container",0),t.NdJ("openDrawerChange",function(o){return c.openDrawer=o}),t.YNc(1,S,1,1,"app-inventory-details",1),t.TgZ(2,"mat-tab-group",2)(3,"mat-tab",3),t.YNc(4,M,2,1,"div",4),t.ALo(5,"async"),t.qZA()()()),2&e&&(t.Q6J("openDrawer",c.openDrawer),t.xp6(1),t.Q6J("ngIf",c.selectedEntity),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,3,c.recipes$)))},dependencies:[r.sg,r.O5,v.D,Z.I,l.uX,l.SP,d,r.Ov]})}var X=a(5698),Q=a(8505),G=a(6336);function z(i,n){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.selectedEntity.day," day(s)")}}function q(i,n){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.selectedEntity.time.hours," hour(s)")}}function H(i,n){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.selectedEntity.time.minutes," minute(s)")}}function K(i,n){if(1&i&&(t.TgZ(0,"app-base-item-card",4)(1,"div"),t._uU(2,"Processing time: "),t.TgZ(3,"span",5),t.YNc(4,z,2,1,"ng-container",6),t.YNc(5,q,2,1,"ng-container",6),t.YNc(6,H,2,1,"ng-container",6),t.qZA()(),t._UZ(7,"app-item-list",7),t.qZA()),2&i){const e=t.oxw();t.Q6J("item",e.selectedEntity.output.item),t.xp6(4),t.Q6J("ngIf",e.selectedEntity.day),t.xp6(1),t.Q6J("ngIf",e.selectedEntity.time.hours),t.xp6(1),t.Q6J("ngIf",e.selectedEntity.time.minutes),t.xp6(1),t.Q6J("itemList",e.getItemList(e.selectedEntity))}}function V(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"app-item-icon",12),t.NdJ("click",function(){const o=t.CHM(e).$implicit,p=t.oxw(3);return t.KtG(p.showDetails(o))}),t.qZA()}if(2&i){const e=n.$implicit,c=t.oxw(3);let s;t.Q6J("itemName",e.output.item.iconName)("subIconName",c.reusedImages.includes(null!==(s=e.output.item.iconName)&&void 0!==s?s:"")?e.input.item.iconName:void 0)}}function W(i,n){if(1&i&&(t.TgZ(0,"div",10),t.YNc(1,V,1,2,"app-item-icon",11),t.qZA()),2&i){const e=n.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function tt(i,n){if(1&i&&(t.TgZ(0,"mat-tab",8),t.YNc(1,W,2,1,"div",9),t.ALo(2,"async"),t.qZA()),2&i){const e=n.$implicit,c=t.oxw();t.s9C("label",e),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,c.filteredData$(e)))}}class u{constructor(n,e,c){this._route=n,this._router=e,this._databaseService=c,this.openDrawer=!1,this.reusedImages=[],this.selectedTabIndex=-1,this.quality=G.n,this.machineNames=[],this.tagBasedItems=[],(0,C.a)([c.fetchItemProcessingRecipes$(),c.fetchTagBasedItems$()]).pipe((0,X.q)(1)).subscribe({next:([s,o])=>{this.machineNames=Object.keys(s),this.tagBasedItems=o,this._route.paramMap.pipe((0,Q.b)(p=>{const x=p.get("processor");x&&(this.selectedTabIndex=this.machineNames.map(nt=>nt.toLowerCase()).indexOf(x))})).subscribe()}})}getItemList(n){const e=[n.input,...n.additionalInput];if(n.genericInput){const c={shouldBeSameItem:!0,amount:n.genericInput.amount,genericItem:this.tagBasedItems.find(s=>s.key===n.genericInput?.key)};e.push(c)}return e}_getMultipleIconNames(n){const e=n.filter((c,s)=>n.indexOf(c)!==s);return[...new Set(e)]}filteredData$(n){return this._databaseService.fetchItemProcessingRecipes$().pipe((0,N.U)(e=>e[n]),(0,Q.b)(e=>{this.reusedImages=this._getMultipleIconNames(e.map(c=>c.output.item.iconName??""))}))}l(n){let e=n.tab.textLabel.toLowerCase();this._router.navigate(["..",e],{relativeTo:this._route})}showDetails(n){this.selectedEntity=n,this.openDrawer=!0}static#t=this.\u0275fac=function(e){return new(e||u)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(y.k))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["app-processor"]],decls:4,vars:4,consts:[[3,"openDrawer","openDrawerChange"],["listDetail","",3,"item",4,"ngIf"],["mat-stretch-tabs","false",1,"px-2","xl:px-[50px]","w-full",3,"selectedIndex","selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],["listDetail","",3,"item"],[1,"text-black"],[4,"ngIf"],[1,"mb-3",3,"itemList"],[3,"label"],["class","grid gap-4 icon-grid",4,"ngIf"],[1,"grid","gap-4","icon-grid"],["class","icon-grid-item",3,"itemName","subIconName","click",4,"ngFor","ngForOf"],[1,"icon-grid-item",3,"itemName","subIconName","click"]],template:function(e,c){1&e&&(t.TgZ(0,"app-list-detail-container",0),t.NdJ("openDrawerChange",function(o){return c.openDrawer=o}),t.YNc(1,K,8,5,"app-base-item-card",1),t.TgZ(2,"mat-tab-group",2),t.NdJ("selectedTabChange",function(o){return c.l(o)}),t.YNc(3,tt,3,4,"mat-tab",3),t.qZA()()),2&e&&(t.Q6J("openDrawer",c.openDrawer),t.xp6(1),t.Q6J("ngIf",c.selectedEntity),t.xp6(1),t.Q6J("selectedIndex",c.selectedTabIndex),t.xp6(1),t.Q6J("ngForOf",c.machineNames))},dependencies:[r.sg,r.O5,v.D,b.T,g,Z.I,l.uX,l.SP,r.Ov]})}const et=[{path:"",pathMatch:"full",redirectTo:"inventory"},{path:"",component:_,children:[{path:"inventory",component:f},{path:"artisan",redirectTo:"artisan/",pathMatch:"full"},{path:"artisan/:processor",component:u}]}];class h{static#t=this.\u0275fac=function(e){return new(e||h)};static#e=this.\u0275mod=t.oAB({type:h});static#n=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(et),m.Bz]})}class I{static#t=this.\u0275fac=function(e){return new(e||I)};static#e=this.\u0275mod=t.oAB({type:I});static#n=this.\u0275inj=t.cJS({imports:[r.ez,h,J.m,l.Nh]})}}}]);