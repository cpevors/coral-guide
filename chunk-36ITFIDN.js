import{a as wt,b as Tt,c as Mt,d as Rt,e as $,f as qt}from"./chunk-ZPXLLCRC.js";import{g as Ht,h as Bt,i as Pt,j as kt,m as At,n as Ot}from"./chunk-T7R4YOHN.js";import{d as Nt,e as jt,g as Lt,h as Vt}from"./chunk-RAMFR2BT.js";import{a as Ut}from"./chunk-GPTJPEST.js";import{a as pt,b as mt}from"./chunk-U4QYNCHI.js";import"./chunk-EEJZHQSA.js";import{$a as b,$d as Ct,Aa as H,Ac as Ke,Ba as He,Bc as Qe,Ca as Be,Da as f,Ea as Pe,Eb as Ue,Fa as ee,G as de,Ga as te,Ha as m,Ia as s,Id as dt,Ja as d,Jd as ct,Je as y,K as we,Ka as ae,Kb as $e,Kd as ft,L as P,La as ie,Ld as z,M as Te,Ma as ke,N as ce,Na as be,Nb as Ge,O as Q,Oa as Ae,P as fe,Pa as A,Pe as Ft,Q as h,Qa as c,R as k,Ra as Ne,S as ue,Sa as je,T as Me,U as W,Uc as We,V as Y,Wc as Ye,Xc as Je,Xd as ut,Y as g,Yc as Xe,Yd as ht,Zb as ze,Zd as bt,_d as _t,a as Ie,aa as Re,ab as l,ac as O,ad as et,ae as gt,b as De,bb as ne,bc as q,bd as tt,be as vt,cb as _e,ce as yt,dc as Ce,dd as at,de as xt,ec as pe,ed as it,ee as It,fb as Le,fc as ge,fe as Dt,gc as Ze,gd as nt,ge as Et,i as Z,j as Ee,ja as he,jb as V,kb as oe,kd as ot,lb as re,m as le,ma as o,na as D,nd as rt,o as Se,pb as Ve,qd as ye,rd as st,sa as J,ta as v,tb as Oe,td as U,te as St,w as Fe,wa as u,wb as qe,wd as me,x as K,xa as X,ya as r,yb as se,yd as lt,zc as ve}from"./chunk-JU6YEV2O.js";var C=(()=>{let e=class e{constructor(){this.database=Q(O)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=h({type:e,selectors:[["ng-component"]],inputs:{databaseItem:"databaseItem"},decls:0,vars:0,template:function(i,n){},encapsulation:2});let a=e;return a})();var ha=["*"],x=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=h({type:e,selectors:[["app-database-header-button"]],inputs:{templateRef:"templateRef"},ngContentSelectors:ha,decls:4,vars:6,consts:[["mat-button","",1,"hover:bg-black/10",3,"click"],[1,"flex","gap-x-2","items-center"],[1,"arrow"]],template:function(i,n){i&1&&(Ne(),m(0,"button",0),A("click",function(){return n.templateRef.toggle()}),m(1,"div",1),je(2),d(3,"i",2),s()()),i&2&&(o(3),H("down",!n.templateRef.open)("translate-y-[-3px]",n.templateRef.open)("up",n.templateRef.open))},dependencies:[Tt],encapsulation:2});let a=e;return a})();var ba=a=>[a];function _a(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Fishing"),s()(),d(5,"app-caught-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",V(2,ba,t.fish))}}var Gt=(()=>{let e=class e extends C{ngOnInit(){this.databaseItem.fish&&(this.fish=De(Ie({},this.databaseItem.fish),{item:this.databaseItem.item}))}};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-fishing"]],features:[v],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,_a,6,4,"app-expandable",0),i&2&&f(0,n.fish?0:-1)},dependencies:[y,$,x],encapsulation:2});let a=e;return a})();var ga=a=>[a];function va(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Bugs and insects"),s()(),d(5,"app-caught-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",V(2,ga,t.databaseItem.insect))}}var zt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-insects"]],features:[v],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,va,6,4,"app-expandable",0),i&2&&f(0,n.databaseItem.insect?0:-1)},dependencies:[y,$,x],encapsulation:2});let a=e;return a})();var xa=a=>[a];function Ia(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Ocean critters"),s()(),d(5,"app-caught-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",V(2,xa,t.databaseItem.oceanCritter))}}var Zt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-sea-critters"]],features:[v],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,Ia,6,4,"app-expandable",0),i&2&&f(0,n.databaseItem.oceanCritter?0:-1)},dependencies:[y,$,x],encapsulation:2});let a=e;return a})();function Ea(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Seed for"),s()(),d(5,"app-crop-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.comesFromSeed)}}function Sa(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"From seed"),s()(),d(5,"app-crop-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.isSeedFor)}}var Kt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-crops"]],features:[v],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,Ea,6,2,"app-expandable",0)(1,Sa,6,2,"app-expandable",0),i&2&&(f(0,n.databaseItem.comesFromSeed&&n.databaseItem.comesFromSeed.length?0:-1),o(),f(1,n.databaseItem.isSeedFor&&n.databaseItem.isSeedFor.length?1:-1))},dependencies:[y,wt,x],encapsulation:2});let a=e;return a})();function wa(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in processing"),s()(),d(5,"app-processor-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.artisanIngredient)}}function Ta(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Processing"),s()(),d(5,"app-processor-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.artisanResult)}}var Qt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-artisan"]],features:[v],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showProcessor","",3,"dataSource"]],template:function(i,n){i&1&&u(0,wa,6,2,"app-expandable",0)(1,Ta,6,2,"app-expandable",0),i&2&&(f(0,n.databaseItem.artisanIngredient&&n.databaseItem.artisanIngredient.length?0:-1),o(),f(1,n.databaseItem.artisanResult&&n.databaseItem.artisanResult.length?1:-1))},dependencies:[y,jt,x],encapsulation:2});let a=e;return a})();function Ra(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Used to craft"),s()(),d(5,"app-inventory-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.usedToCraft)}}function Ha(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Crafting recipe"),s()(),d(5,"app-inventory-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.craftedFrom)}}var Wt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-crafting"]],features:[v],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,Ra,6,2,"app-expandable",0)(1,Ha,6,2,"app-expandable",0),i&2&&(f(0,n.databaseItem.usedToCraft&&n.databaseItem.usedToCraft.length?0:-1),o(),f(1,n.databaseItem.craftedFrom&&n.databaseItem.craftedFrom.length?1:-1))},dependencies:[y,Nt,x],encapsulation:2});let a=e;return a})();function Pa(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in cooking"),s()(),d(5,"app-cooking-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.usedToCook)}}function ka(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Cooking recipe"),s()(),d(5,"app-cooking-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.cookedFrom)}}var Yt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-cooking"]],features:[v],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showUtensil","",3,"dataSource"]],template:function(i,n){i&1&&u(0,Pa,6,2,"app-expandable",0)(1,ka,6,2,"app-expandable",0),i&2&&(f(0,n.databaseItem.usedToCook&&n.databaseItem.usedToCook.length?0:-1),o(),f(1,n.databaseItem.cookedFrom&&n.databaseItem.cookedFrom.length?1:-1))},dependencies:[y,Lt,x],encapsulation:2});let a=e;return a})();function Na(a,e){if(a&1&&(m(0,"td",14),d(1,"app-ui-icon",15),s()),a&2){let p=e.$implicit;o(),r("uiIcon",p.pref.icon)}}function ja(a,e){a&1&&(m(0,"th",16),l(1,"Preference"),s()),a&2&&X("colspan",2)}function La(a,e){if(a&1&&(m(0,"td",17),l(1),s()),a&2){let p=e.$implicit;o(),_e(" ",p.pref.label," ")}}function Va(a,e){a&1&&(m(0,"th",16),l(1,"NPCs"),s())}function Oa(a,e){if(a&1&&(m(0,"div",20),d(1,"app-item-icon",21),l(2),s()),a&2){let p=e.$implicit,t=e.$index,i=e.$count;H("mr-4",t!==i-1),o(),r("itemName",p.iconName),o(),_e(" ",p.characterName," ")}}function qa(a,e){if(a&1&&(m(0,"td",18)(1,"div",19),ee(2,Oa,3,4,"div",22,Pe),s()()),a&2){let p=e.$implicit;o(2),te(p.npcs)}}function Ua(a,e){a&1&&d(0,"tr",23)}function $a(a,e){a&1&&d(0,"tr",24)}function Ga(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Gifting"),s()(),m(5,"app-responsive-table")(6,"table",4),ae(7,5),u(8,Na,2,1,"td",6),ie(),ae(9,7),u(10,ja,2,1,"th",8)(11,La,2,1,"td",9),ie(),ae(12,10),u(13,Va,2,0,"th",8)(14,qa,4,0,"td",11),ie(),u(15,Ua,1,0,"tr",12)(16,$a,1,0,"tr",13),s()()()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(3),r("dataSource",t.databaseItem.asGift),o(9),r("matHeaderRowDef",t.displayedHeaderColumns)("matHeaderRowDefSticky",!0),o(),r("matRowDefColumns",t.displayedColumns)}}var Xt=(()=>{let e=class e extends C{constructor(){super(...arguments),this.displayedHeaderColumns=["preference","npcs"],this.displayedColumns=["icon",...this.displayedHeaderColumns],this.favoritePreferences=[],this.lovePreferences=[],this.likePreferences=[],this.neutralPreferences=[],this.dislikePreferences=[],this.hatePreferences=[],this.dataSource=[],this.keys=["favoritePreferences","lovePreferences","likePreferences","neutralPreferences","dislikePreferences","hatePreferences"]}ngOnInit(){let t=this.databaseItem.item;if(!t)return;this.database.getGiftingPreferences().forEach(n=>{this.keys.forEach(_=>{n[_].findIndex(w=>w.type==="item"&&t.id===w.item.id)!==-1&&n.npc&&this[_].push(n.npc)})}),this.keys.forEach(n=>{let _=this[n];_.length&&this.dataSource.push({pref:Ut.find(E=>E.preferenceField===n),npcs:_})})}};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-gifts"]],hostVars:2,hostBindings:function(i,n){i&2&&H("database-gifts",n.displayedHeaderColumns)},features:[v],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["mat-table","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 !pt-3 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","preference"],["class","backdrop-blur-xl","mat-header-cell","",4,"matHeaderCellDef"],["class","text-col !pl-0 whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","npcs"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","!pt-3","w-10","text-center","icon-col"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],["mat-header-cell","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","!pl-0","whitespace-nowrap"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"inline-flex","shrink-0","items-center"],[1,"h-12","mr-2","!flex","items-center","shrink-0",3,"itemName"],["class","inline-flex shrink-0 items-center",3,"mr-4"],["mat-header-row",""],["mat-row",""]],template:function(i,n){i&1&&u(0,Ga,17,5,"app-expandable",0),i&2&&f(0,n.databaseItem.asGift&&n.databaseItem.asGift.length?0:-1)},dependencies:[st,U,ut,y,ht,_t,yt,Ct,bt,xt,gt,vt,It,Dt,x],styles:[`.database-gifts .app-responsive-table .app-item-icon>img{aspect-ratio:unset;width:auto;max-height:3rem}
`],encapsulation:2});let a=e;return a})();function Za(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Required for offering "),s()(),d(5,"app-offerings-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.requiredAsOffering)}}function Ka(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Offering reward"),s()(),d(5,"app-offerings-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.isBundleRewardIn)}}var ea=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-offerings"]],features:[v],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showAltar","",3,"dataSource"]],template:function(i,n){i&1&&u(0,Za,6,2,"app-expandable",0)(1,Ka,6,2,"app-expandable",0),i&2&&(f(0,n.databaseItem.requiredAsOffering&&n.databaseItem.requiredAsOffering.length?0:-1),o(),f(1,n.databaseItem.isBundleRewardIn&&n.databaseItem.isBundleRewardIn.length?1:-1))},dependencies:[y,At,x],encapsulation:2});let a=e;return a})();function Wa(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at"),s()(),d(5,"app-shop-item-data-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.buyAt)}}var ta=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-shop-data"]],features:[v],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,Wa,6,2,"app-expandable",0),i&2&&f(0,n.databaseItem.buyAt&&n.databaseItem.buyAt.length?0:-1)},dependencies:[y,Ht,x],encapsulation:2});let a=e;return a})();function Ja(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Chance as processing result "),s()(),d(5,"app-shop-item-process-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.chanceAsProcessResult)}}function Xa(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be processed at"),s()(),d(5,"app-shop-item-process-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.asProcessInput)}}var aa=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-shop-item-process"]],features:[v],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,Ja,6,2,"app-expandable",0)(1,Xa,6,2,"app-expandable",0),i&2&&(f(0,n.databaseItem.chanceAsProcessResult&&n.databaseItem.chanceAsProcessResult.length?0:-1),o(),f(1,n.databaseItem.asProcessInput&&n.databaseItem.asProcessInput.length?1:-1))},dependencies:[y,Bt,x],encapsulation:2});let a=e;return a})();function ti(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is result of upgrade "),s()(),d(5,"app-item-upgrade-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.isUpgradeResult)}}function ai(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is used as requirement in "),s()(),d(5,"app-item-upgrade-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.isUpgradeRequirement)}}var ia=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-item-upgrade"]],features:[v],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,ti,6,2,"app-expandable",0)(1,ai,6,2,"app-expandable",0),i&2&&(f(0,n.databaseItem.isUpgradeResult&&n.databaseItem.isUpgradeResult.length?0:-1),o(),f(1,n.databaseItem.isUpgradeRequirement&&n.databaseItem.isUpgradeRequirement.length?1:-1))},dependencies:[y,Pt,x],encapsulation:2});let a=e;return a})();function ni(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be dropped from enemies "),s()(),d(5,"app-bestiary-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.fromEnemies)}}var na=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-bestiary"]],features:[v],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,ni,6,2,"app-expandable",0),i&2&&f(0,n.databaseItem.fromEnemies&&(n.databaseItem.fromEnemies!=null&&n.databaseItem.fromEnemies.length)?0:-1)},dependencies:[y,Rt,x],encapsulation:2});let a=e;return a})();function ri(a,e){if(a&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at festival"),s()(),d(5,"app-festival-shop-item-table",4),s()),a&2){let p=b(1),t=c();o(3),r("templateRef",p),o(2),r("dataSource",t.databaseItem.buyAtFestivalShop)}}var oa=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let t;return function(n){return(t||(t=g(e)))(n||e)}})(),e.\u0275cmp=h({type:e,selectors:[["app-database-festival-shop-data"]],features:[v],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&u(0,ri,6,2,"app-expandable",0),i&2&&f(0,n.databaseItem.buyAtFestivalShop&&n.databaseItem.buyAtFestivalShop.length?0:-1)},dependencies:[y,kt,x],encapsulation:2});let a=e;return a})();function li(a,e){if(a&1&&(m(0,"app-card")(1,"header",0),d(2,"app-item-icon",1),m(3,"div",2)(4,"h2",3),l(5),s(),m(6,"span"),l(7),s()(),d(8,"div",4)(9,"app-quality-grid",5),s(),m(10,"p",6),l(11),s(),m(12,"div",7),l(13,"There's currently no data for this item. :("),s(),d(14,"app-database-shop-item-process",8)(15,"app-database-shop-data",8)(16,"app-database-offerings",8)(17,"app-database-crops",8)(18,"app-database-fishing",8)(19,"app-database-insects",8)(20,"app-database-sea-critters",8)(21,"app-database-artisan",8)(22,"app-database-cooking",8)(23,"app-database-crafting",8)(24,"app-database-festival-shop-data",8)(25,"app-database-gifts",8)(26,"app-database-item-upgrade",8)(27,"app-database-bestiary",8),s()),a&2){let p=c(2);o(2),r("itemName",e.item.iconName),o(3),ne(e.item.displayName),o(2),ne(e.item.id),o(2),r("showOnlyBase",!p.item.qualities.bronze)("item",e.item),o(2),ne(e.item.description),o(3),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e)}}function di(a,e){a&1&&(m(0,"app-card"),d(1,"mat-spinner",9),s())}function ci(a,e){if(a&1&&(u(0,li,28,20,"app-card"),oe(1,"async"),u(2,di,2,0)),a&2){let p=c(),t;f(0,(t=re(1,1,p.databaseItem$))?0:2,t)}}var ra=(()=>{let e=class e{constructor(){this._databaseService=Q(O),this._classes="col-span-full database-details"}ngOnInit(){this.databaseItem$=this._databaseService.fetchDatabaseItem$(this.item.id)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=h({type:e,selectors:[["app-database-details"]],hostVars:2,hostBindings:function(i,n){i&2&&He(n._classes)},inputs:{item:"item"},decls:1,vars:1,consts:[[1,"flex","items-center","flex-wrap","mb-5"],[1,"mr-3","w-14",3,"itemName"],[1,"flex","flex-col","gap-0.5"],[1,"!my-0","font-semibold","text-xl","text-black"],[1,"h-0","w-full","md:hidden"],["includePrices","",1,"md:ml-auto","mt-4","md:mt-0","quality-grid","inline-block","w-fit",3,"showOnlyBase","item"],[1,"text-lg"],[1,"empty-details","text-black","my-5","text-lg"],[3,"databaseItem"],[1,"mx-auto"]],template:function(i,n){i&1&&u(0,ci,3,3),i&2&&f(0,n.databaseItem$?0:-1)},dependencies:[U,me,lt,pt,Gt,zt,Zt,Kt,Qt,Wt,Yt,Xt,ea,ta,aa,ia,na,oa,se],styles:[`.database-details .empty-details{display:none}.database-details:not(:has(.database-header)) .empty-details{display:block}.database-details .expandable-body{transition:none}.quality-grid .app-item-icon>img{height:3.5rem}.database-header{color:#000;font-weight:600;font-size:1.25em;margin-top:1.2em;line-height:1.6}
`],encapsulation:2});let a=e;return a})();var sa=Ze({passive:!0}),pa=(()=>{let e=class e{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Ee;let i=Ce(t),n=this._monitoredElements.get(i);if(n)return n.subject;let _=new Z,E="cdk-text-field-autofilled",w=M=>{M.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(E)?(i.classList.add(E),this._ngZone.run(()=>_.next({target:M.target,isAutofilled:!0}))):M.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(E)&&(i.classList.remove(E),this._ngZone.run(()=>_.next({target:M.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",w,sa),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:_,unlisten:()=>{i.removeEventListener("animationstart",w,sa)}}),_}stopMonitoring(t){let i=Ce(t),n=this._monitoredElements.get(i);n&&(n.unlisten(),n.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}};e.\u0275fac=function(i){return new(i||e)(ce(pe),ce(J))},e.\u0275prov=we({token:e,factory:e.\u0275fac,providedIn:"root"});let a=e;return a})();var ma=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=k({type:e}),e.\u0275inj=P({});let a=e;return a})();var bi=new Te("MAT_INPUT_VALUE_ACCESSOR"),_i=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Ci=0,la=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(t){this._disabled=q(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Ye.required)??!1}set required(t){this._required=q(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&ge().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=q(t)}get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}constructor(t,i,n,_,E,w,M,T,B,G){this._elementRef=t,this._platform=i,this.ngControl=n,this._autofillMonitor=T,this._formField=G,this._uid=`mat-input-${Ci++}`,this.focused=!1,this.stateChanges=new Z,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(L=>ge().has(L)),this._iOSKeyupListener=L=>{let R=L.target;!R.value&&R.selectionStart===0&&R.selectionEnd===0&&(R.setSelectionRange(1,1),R.setSelectionRange(0,0))};let N=this._elementRef.nativeElement,j=N.nodeName.toLowerCase();this._inputValueAccessor=M||N,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&B.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Ke(w,n,E,_,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=j==="select",this._isTextarea=j==="textarea",this._isInFormField=!!G,this._isNativeSelect&&(this.controlType=N.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){let t=this._getPlaceholder();if(t!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){_i.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}else return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}};e.\u0275fac=function(i){return new(i||e)(D(he),D(pe),D(Je,10),D(et,8),D(it,8),D(Qe),D(bi,10),D(pa),D(J),D(ct,8))},e.\u0275dir=ue({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,n){i&1&&A("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),i&2&&(Ae("id",n.id)("disabled",n.disabled)("required",n.required),X("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required)("id",n.id),H("mat-input-server",n._isServer)("mat-mdc-form-field-textarea-control",n._isInFormField&&n._isTextarea)("mat-mdc-form-field-input-control",n._isInFormField)("mdc-text-field__input",n._isInFormField)("mat-mdc-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[fe.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[Le([{provide:dt,useExisting:e}]),Me]});let a=e;return a})(),da=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=k({type:e}),e.\u0275inj=P({imports:[ve,z,z,ma,ve]});let a=e;return a})();function vi(a,e){if(a&1){let p=be();m(0,"app-card",5)(1,"div",6)(2,"h2"),l(3,"Important note"),s(),m(4,"p"),l(5,"The item list loads a lot of stuff, this may take a while. The list below shows everything, that got not filtered beforehand. Some of those items will never be obtainable as they only provide a technical purpose. The information shown per item are as complete as the rest of this website. When new features get added, the details in here will expand as well."),s(),m(6,"button",7),A("click",function(){W(p);let i=c();return Y(i.hideImportantNote())}),l(7,"Got it!"),s()()()}}function yi(a,e){if(a&1){let p=be();m(0,"app-item-icon",9),A("mouseenter",function(){let n=W(p).$implicit,_=c(2);return Y(_.prefetchItem(n))})("click",function(){let i=W(p),n=i.$implicit,_=i.$index,E=c(2);return Y(E.showDetails(n,_))}),s()}if(a&2){let p=e.$implicit,t=c(2);H("selected-icon",(t.selectedItem==null?null:t.selectedItem.id)===p.id),r("itemName",p.iconName)}}function xi(a,e){a&1&&ke(0)}function Ii(a,e){if(a&1&&(ee(0,yi,1,3,"app-item-icon",10,Be().trackById),u(2,xi,1,0,"ng-container",8)),a&2){let p=c();te(p.filteredItems),o(2),r("ngIf",p.initialItemLoad())}}var ca=(()=>{let e=class e{constructor(t,i,n,_,E,w){this._route=t,this._router=i,this._database=n,this._appRef=_,this._injector=E,this._title=w,this.searchTermControl=new tt("",{nonNullable:!0}),this.shouldHideImportantNote=!1,this.filteredItems=[],this._localStorageHideNoteKey="databaseHideImportantNote",this._didInitialLoad=!1,this.shouldHideImportantNote=q(localStorage.getItem(this._localStorageHideNoteKey)),this.items=n.getItems().filter(T=>ze(T.id)===Ge.BASE);let M=le(T=>{let N=/tag:(?<tag>[a-zA-Z.]+)/gm.exec(T)?.groups?.tag.replace("tag:","").toLocaleLowerCase()??"",j=T.replace("tag:"+N,"").toLocaleLowerCase().trim(),L=this.items.filter(R=>{let xe=!0;return N&&(xe=!!R.tags?.some(ua=>ua.toLocaleLowerCase().includes(N))),xe?R.displayName.toLocaleLowerCase().includes(j)||j.startsWith("item_")&&R.id.startsWith(j):!1});return this.filteredItems=L,L});this.filteredItems$=Se(this._route.queryParams.pipe(le(T=>{let B=T.q??"";return this.searchTermControl.setValue(B,{emitEvent:!1}),B}),M,K(1)),this.searchTermControl.valueChanges.pipe(Fe(300),de(T=>{this.updateQueryParam(T),document.getElementById("database-details")?.remove()}),M))}showDetails(t,i,n=!1){this.updateRouteParam(t.id),this.selectedItem=void 0,document.getElementById("database-details")?.remove();let _=document.getElementById("grid");if(!_)return;let w=window.getComputedStyle(_).getPropertyValue("grid-template-columns").split(" ").length,M=Math.floor(i/w),T=Math.min(this.filteredItems.length,(M+1)*w),B=document.querySelector(`#grid app-item-icon:nth-of-type(${T})`);if(!B)return;let G=this.createComponent(t);this.insertAfter(G,B),this.selectedItem=t,n&&setTimeout(()=>document.getElementById("database-details")?.scrollIntoView(!0),0)}insertAfter(t,i){i.parentNode?.insertBefore(t.location.nativeElement,i.nextSibling),this._appRef.attachView(t.hostView)}createComponent(t){let i=Oe(ra,{environmentInjector:this._injector});i.setInput("item",t);let n=i.location.nativeElement;return n.id="database-details",i}hideImportantNote(){this.shouldHideImportantNote=!0,localStorage.setItem(this._localStorageHideNoteKey,"true")}updateQueryParam(t){this._router.navigate([],{relativeTo:this._route,queryParams:{q:t},queryParamsHandling:"merge",replaceUrl:!0})}updateRouteParam(t){this._router.navigate(["..",t],{relativeTo:this._route,replaceUrl:!0,queryParamsHandling:"preserve"}).then(()=>!!this.selectedItem&&this.updateTitle(this.selectedItem.displayName))}initialItemLoad(){this._didInitialLoad||this._route.params.pipe(de(t=>{let i=t.itemId;if(this._didInitialLoad=!0,!i)return;let n=this.filteredItems.findIndex(_=>_.id===i);if(n>-1)this.showDetails(this.filteredItems[n],n,!0);else if(this.filteredItems.length===0){let _=this.items.findIndex(E=>E.id===i);if(_>-1){let E=this.items[_];this._setGridContent(E)}}}),K(1)).subscribe()}_setGridContent(t){let i=this.createComponent(t);document.getElementById("grid")?.appendChild(i.location.nativeElement),this._appRef.attachView(i.hostView),this.selectedItem=t}trackById(t,i){return i.id}updateTitle(t){let i=this._title.getTitle();i&&this._title.setTitle(`${t} - ${i}`)}prefetchItem(t){this._database.fetchDatabaseItem$(t.id).pipe(K(1)).subscribe()}};e.\u0275fac=function(i){return new(i||e)(D(ot),D(rt),D(O),D(Ve),D(Re),D($e))},e.\u0275cmp=h({type:e,selectors:[["app-database"]],decls:7,vars:5,consts:[[1,"container","mx-auto","pb-6","database-grid","px-2"],["class","my-3"],[1,"btn","my-3"],["matInput","","placeholder","Search term",1,"placeholder:text-white",3,"formControl"],["id","grid",1,"grid","gap-4","icon-grid"],[1,"my-3"],[1,"prose","lg:prose-xl"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[1,"icon-grid-item",3,"itemName","mouseenter","click"],["class","icon-grid-item",3,"selected-icon","itemName"]],template:function(i,n){i&1&&(m(0,"div",0),u(1,vi,8,0,"app-card",1),m(2,"mat-form-field",2),d(3,"input",3),s(),m(4,"div",4),u(5,Ii,3,1,"ng-container"),oe(6,"async"),s()()),i&2&&(o(),f(1,n.shouldHideImportantNote?-1:1),o(2),r("formControl",n.searchTermControl),o(2),f(5,re(6,3,n.filteredItems$)?5:-1))},dependencies:[qe,U,me,ft,la,We,Xe,at,se],encapsulation:2});let a=e;return a})();var Di=[{path:"",component:ca,title:"Database"}],fa=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=k({type:e}),e.\u0275inj=P({imports:[ye.forChild(Di),ye]});let a=e;return a})();var Xo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=k({type:e}),e.\u0275inj=P({imports:[Ue,fa,Ft,z,da,nt,mt,qt,Vt,Ot,Mt,St,Et]});let a=e;return a})();export{Xo as DatabaseModule};
