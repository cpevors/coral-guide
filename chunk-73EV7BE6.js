import{T as l,u as c,v as h}from"./chunk-IYHG6KR3.js";import{ca as r,ia as i,ib as a}from"./chunk-ZXANYF3K.js";var C=(()=>{class e{static{this._TO_DO_STORE_KEY="checklist_"}constructor(t){if(this.checklistName=t,this.localStorage=i(c),this.versionSuffix=i(h).getSettings().useBeta?"_beta":"_live",this.userData=i(l),t.trim()==="")throw new Error("checklistName can't be empty!");this.read()}read(){let t=this.localStorage.getItem(this.getChecklistStorageKey());if(t&&!this.userData.getCurrentData().checklists[this.checklistName]){let s=JSON.parse(t);this.userData.getCurrentData().checklists[this.checklistName]=s[0]??[],this.userData.save(),this.localStorage.removeItem(this.getChecklistStorageKey())}}save(){this.userData.save()}getCurrentChecklist(){let t=this.userData.getCurrentData().checklists[this.checklistName];return t||(this.userData.getCurrentData().checklists[this.checklistName]=this._createEmptyChecklist(),t=this.userData.getCurrentData().checklists[this.checklistName]),t}set(t){this.getCurrentChecklist().entries=[...new Set([...Array.isArray(t)?t:[t]])],this.save()}add(t){this.getCurrentChecklist().entries=[...new Set([...this.getCurrentChecklist().entries,...Array.isArray(t)?t:[t]])],this.save()}remove(t){Array.isArray(t)||(t=[t]),this.getCurrentChecklist().entries=this.getCurrentChecklist().entries.filter(s=>!t.includes(s)),this.save()}isChecked(t){return this.getCurrentChecklist().entries.includes(t)}getChecklistStorageKey(){return e._TO_DO_STORE_KEY+this.checklistName+this.versionSuffix}resetLiveChecklist(){this.localStorage.setItem(e._TO_DO_STORE_KEY+this.checklistName+"_live",JSON.stringify([this._createEmptyChecklist()])),this.read()}resetBetaChecklist(){this.localStorage.setItem(e._TO_DO_STORE_KEY+this.checklistName+"_beta",JSON.stringify([this._createEmptyChecklist()])),this.read()}_createEmptyChecklist(){return{version:1,entries:[]}}static{this.\u0275fac=function(s){a()}}static{this.\u0275prov=r({token:e,factory:e.\u0275fac})}}return e})();export{C as a};
