import{a as l}from"./chunk-EIGW5THG.js";import{a as c,b as h}from"./chunk-PYPF6S35.js";import{_ as r,ea as i,fb as a}from"./chunk-J7WD3OMO.js";var g=(()=>{class e{static{this._TO_DO_STORE_KEY="checklist_"}#t;constructor(t){if(this.checklistName=t,this.versionSuffix=i(h).getSettings().useBeta?"_beta":"_live",this.userData=i(l),this.#t=i(c),t.trim()==="")throw new Error("checklistName can't be empty!");this.read()}read(){let t=this.#t.getItem(this.getChecklistStorageKey());if(t&&!this.userData.currentData().checklists[this.checklistName]){let s=JSON.parse(t);this.userData.currentData().checklists[this.checklistName]=s[0]??[],this.userData.save(),this.#t.removeItem(this.getChecklistStorageKey())}}save(){this.userData.save()}getCurrentChecklist(){let t=this.userData.currentData().checklists[this.checklistName];return t||(this.userData.currentData().checklists[this.checklistName]=this._createEmptyChecklist(),t=this.userData.currentData().checklists[this.checklistName]),t}set(t){this.getCurrentChecklist().entries=[...new Set([...Array.isArray(t)?t:[t]])],this.save()}add(t){this.getCurrentChecklist().entries=[...new Set([...this.getCurrentChecklist().entries,...Array.isArray(t)?t:[t]])],this.save()}remove(t){Array.isArray(t)||(t=[t]),this.getCurrentChecklist().entries=this.getCurrentChecklist().entries.filter(s=>!t.includes(s)),this.save()}isChecked(t){return this.getCurrentChecklist().entries.includes(t)}getChecklistStorageKey(){return e._TO_DO_STORE_KEY+this.checklistName+this.versionSuffix}resetLiveChecklist(){this.#t.setItem(e._TO_DO_STORE_KEY+this.checklistName+"_live",JSON.stringify([this._createEmptyChecklist()])),this.read()}resetBetaChecklist(){this.#t.setItem(e._TO_DO_STORE_KEY+this.checklistName+"_beta",JSON.stringify([this._createEmptyChecklist()])),this.read()}_createEmptyChecklist(){return{version:1,entries:[]}}static{this.\u0275fac=function(s){a()}}static{this.\u0275prov=r({token:e,factory:e.\u0275fac})}}return e})();export{g as a};
