import{a as gt}from"./chunk-4VW3RZF6.js";import{a as yt,b as Dt}from"./chunk-7FSAZHSL.js";import{a as k,b as nt,c as ot,d as rt,e as st,f as xt}from"./chunk-XP6PQ6L5.js";import{h as pt,i as mt,m as dt,p as lt,s as ct,t as Ct}from"./chunk-7S2CCX5F.js";import{e as ft,f as ut,h as bt,i as ht}from"./chunk-TFTB324J.js";import"./chunk-JS6CQQZJ.js";import{a as Ve,b as Ge}from"./chunk-ZBO7XF7X.js";import{$ as j,Ae as et,Ba as be,Bd as He,Be as tt,Ca as r,Db as _e,Ea as B,Fa as he,Ga as Ce,Gd as ke,H as ie,Ha as f,Hb as ve,Ia as xe,Ja as O,Jb as Z,Jd as Ae,Ka as L,La as m,M as b,Ma as s,Md as re,N as G,Na as l,Nd as Ne,Oa as Q,Oe as at,P as $,Pa as z,Pb as Se,Pd as H,Q as q,Qa as ge,Ra as ne,Sd as X,Ta as A,Ua as c,Ud as $e,V as U,Va as ye,Wa as De,Wb as Ee,Zb as Fe,a as de,ae as qe,b as le,ca as ue,cf as y,de as Ue,eb as h,ee as je,fa as x,fb as d,gb as K,hb as oe,id as Be,if as it,jc as Te,la as o,m as ae,ma as w,md as Re,o as ce,qb as M,qc as P,qe as Oe,rc as we,rd as Me,re as Le,sb as W,se as Qe,tb as J,te as ze,ud as Pe,ue as Ke,ve as We,wa as g,we as Je,x as fe,xb as Ie,xe as Ze,y as V,ya as u,ye as Xe,ze as Ye}from"./chunk-5LEGSPOZ.js";var C=(()=>{let e=class e{constructor(){this.database=j(P)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=b({type:e,selectors:[["ng-component"]],inputs:{databaseItem:"databaseItem"},decls:0,vars:0,template:function(n,i){},encapsulation:2});let t=e;return t})();var Ut=["*"],D=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=b({type:e,selectors:[["app-database-header-button"]],inputs:{templateRef:"templateRef"},ngContentSelectors:Ut,decls:4,vars:6,consts:[["mat-button","",1,"hover:bg-black/10",3,"click"],[1,"flex","gap-x-2","items-center"],[1,"arrow"]],template:function(n,i){n&1&&(ye(),m(0,"button",0),A("click",function(){return i.templateRef.toggle()}),m(1,"div",1),De(2),l(3,"i",2),s()()),n&2&&(o(3),B("down",!i.templateRef.open)("translate-y-[-3px]",i.templateRef.open)("up",i.templateRef.open))},dependencies:[ot],encapsulation:2});let t=e;return t})();var jt=t=>[t];function Ot(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Fishing"),s()(),l(5,"app-caught-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",M(2,jt,a.fish))}}var _t=(()=>{let e=class e extends C{ngOnInit(){this.databaseItem.fish&&(this.fish=le(de({},this.databaseItem.fish),{item:this.databaseItem.item}))}};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-fishing"]],features:[g],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Ot,6,4,"app-expandable",0),n&2&&f(0,i.fish?0:-1)},dependencies:[y,k,D],encapsulation:2});let t=e;return t})();var Qt=t=>[t];function zt(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Bugs and insects "),s()(),l(5,"app-caught-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",M(2,Qt,a.databaseItem.insect))}}var vt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-insects"]],features:[g],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,zt,6,4,"app-expandable",0),n&2&&f(0,i.databaseItem.insect?0:-1)},dependencies:[y,k,D],encapsulation:2});let t=e;return t})();var Wt=t=>[t];function Jt(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Ocean critters"),s()(),l(5,"app-caught-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",M(2,Wt,a.databaseItem.oceanCritter))}}var St=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-sea-critters"]],features:[g],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Jt,6,4,"app-expandable",0),n&2&&f(0,i.databaseItem.oceanCritter?0:-1)},dependencies:[y,k,D],encapsulation:2});let t=e;return t})();function Xt(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Seed for"),s()(),l(5,"app-crop-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.comesFromSeed)}}function Yt(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"From seed"),s()(),l(5,"app-crop-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.isSeedFor)}}var Et=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-crops"]],features:[g],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Xt,6,2,"app-expandable",0)(1,Yt,6,2,"app-expandable",0),n&2&&(f(0,i.databaseItem.comesFromSeed&&i.databaseItem.comesFromSeed.length?0:-1),o(),f(1,i.databaseItem.isSeedFor&&i.databaseItem.isSeedFor.length?1:-1))},dependencies:[y,nt,D],encapsulation:2});let t=e;return t})();function ta(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Usage in processing "),s()(),l(5,"app-processor-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.artisanIngredient)}}function aa(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Processing"),s()(),l(5,"app-processor-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.artisanResult)}}var Ft=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-artisan"]],features:[g],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showProcessor","",3,"dataSource"]],template:function(n,i){n&1&&u(0,ta,6,2,"app-expandable",0)(1,aa,6,2,"app-expandable",0),n&2&&(f(0,i.databaseItem.artisanIngredient&&i.databaseItem.artisanIngredient.length?0:-1),o(),f(1,i.databaseItem.artisanResult&&i.databaseItem.artisanResult.length?1:-1))},dependencies:[y,ut,D],encapsulation:2});let t=e;return t})();function na(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Used to craft"),s()(),l(5,"app-inventory-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.usedToCraft)}}function oa(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Crafting recipe"),s()(),l(5,"app-inventory-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.craftedFrom)}}var Tt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-crafting"]],features:[g],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,na,6,2,"app-expandable",0)(1,oa,6,2,"app-expandable",0),n&2&&(f(0,i.databaseItem.usedToCraft&&i.databaseItem.usedToCraft.length?0:-1),o(),f(1,i.databaseItem.craftedFrom&&i.databaseItem.craftedFrom.length?1:-1))},dependencies:[y,ft,D],encapsulation:2});let t=e;return t})();function sa(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Usage in cooking "),s()(),l(5,"app-cooking-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.usedToCook)}}function pa(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Cooking recipe"),s()(),l(5,"app-cooking-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.cookedFrom)}}var wt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-cooking"]],features:[g],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showUtensil","",3,"dataSource"]],template:function(n,i){n&1&&u(0,sa,6,2,"app-expandable",0)(1,pa,6,2,"app-expandable",0),n&2&&(f(0,i.databaseItem.usedToCook&&i.databaseItem.usedToCook.length?0:-1),o(),f(1,i.databaseItem.cookedFrom&&i.databaseItem.cookedFrom.length?1:-1))},dependencies:[y,bt,D],encapsulation:2});let t=e;return t})();function da(t,e){if(t&1&&(m(0,"td",14),l(1,"app-ui-icon",15),s()),t&2){let p=e.$implicit;o(),r("uiIcon",p.pref.icon)}}function la(t,e){t&1&&(m(0,"th",16),d(1,"Preference"),s()),t&2&&be("colspan",2)}function ca(t,e){if(t&1&&(m(0,"td",17),d(1),s()),t&2){let p=e.$implicit;o(),oe(" ",p.pref.label," ")}}function fa(t,e){t&1&&(m(0,"th",16),d(1,"NPCs"),s())}function ua(t,e){if(t&1&&(m(0,"div",20),l(1,"app-item-icon",21),d(2),s()),t&2){let p=e.$implicit,a=e.$index,n=e.$count;B("mr-4",a!==n-1),o(),r("itemName",p.iconName),o(),oe(" ",p.characterName," ")}}function ba(t,e){if(t&1&&(m(0,"td",18)(1,"div",19),O(2,ua,3,4,"div",22,xe),s()()),t&2){let p=e.$implicit;o(2),L(p.npcs)}}function ha(t,e){t&1&&l(0,"tr",23)}function Ca(t,e){t&1&&l(0,"tr",24)}function xa(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Gifting"),s()(),m(5,"app-responsive-table")(6,"table",4),Q(7,5),u(8,da,2,1,"td",6),z(),Q(9,7),u(10,la,2,1,"th",8)(11,ca,2,1,"td",9),z(),Q(12,10),u(13,fa,2,0,"th",8)(14,ba,4,0,"td",11),z(),u(15,ha,1,0,"tr",12)(16,Ca,1,0,"tr",13),s()()()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(3),r("dataSource",a.databaseItem.asGift),o(9),r("matHeaderRowDef",a.displayedHeaderColumns)("matHeaderRowDefSticky",!0),o(),r("matRowDefColumns",a.displayedColumns)}}var Rt=(()=>{let e=class e extends C{constructor(){super(...arguments),this.displayedHeaderColumns=["preference","npcs"],this.displayedColumns=["icon",...this.displayedHeaderColumns],this.favoritePreferences=[],this.lovePreferences=[],this.likePreferences=[],this.neutralPreferences=[],this.dislikePreferences=[],this.hatePreferences=[],this.dataSource=[],this.keys=["favoritePreferences","lovePreferences","likePreferences","neutralPreferences","dislikePreferences","hatePreferences"]}ngOnInit(){let a=this.databaseItem.item;if(!a)return;this.database.getGiftingPreferences().forEach(i=>{this.keys.forEach(I=>{i[I].findIndex(T=>T.type==="item"&&a.id===T.item.id)!==-1&&i.npc&&this[I].push(i.npc)})}),this.keys.forEach(i=>{let I=this[i];I.length&&this.dataSource.push({pref:gt.find(E=>E.preferenceField===i),npcs:I})})}};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-gifts"]],hostVars:2,hostBindings:function(n,i){n&2&&B("database-gifts",i.displayedHeaderColumns)},features:[g],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["mat-table","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 !pt-3 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","preference"],["class","backdrop-blur-xl","mat-header-cell","",4,"matHeaderCellDef"],["class","text-col !pl-0 whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","npcs"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","!pt-3","w-10","text-center","icon-col"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],["mat-header-cell","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","!pl-0","whitespace-nowrap"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"inline-flex","shrink-0","items-center"],[1,"h-12","mr-2","!flex","items-center","shrink-0",3,"itemName"],["class","inline-flex shrink-0 items-center",3,"mr-4"],["mat-header-row",""],["mat-row",""]],template:function(n,i){n&1&&u(0,xa,17,5,"app-expandable",0),n&2&&f(0,i.databaseItem.asGift&&i.databaseItem.asGift.length?0:-1)},dependencies:[Ne,H,Oe,y,Le,ze,Ze,Ke,Qe,Xe,We,Je,Ye,et,D],styles:[`.database-gifts .app-responsive-table .app-item-icon>img{aspect-ratio:unset;width:auto;max-height:3rem}
`],encapsulation:2});let t=e;return t})();function ya(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Required for offering "),s()(),l(5,"app-offerings-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.requiredAsOffering)}}function Da(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Offering reward"),s()(),l(5,"app-offerings-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.isBundleRewardIn)}}var Mt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-offerings"]],features:[g],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showAltar","",3,"dataSource"]],template:function(n,i){n&1&&u(0,ya,6,2,"app-expandable",0)(1,Da,6,2,"app-expandable",0),n&2&&(f(0,i.databaseItem.requiredAsOffering&&i.databaseItem.requiredAsOffering.length?0:-1),o(),f(1,i.databaseItem.isBundleRewardIn&&i.databaseItem.isBundleRewardIn.length?1:-1))},dependencies:[y,ct,D],encapsulation:2});let t=e;return t})();function _a(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Buy at"),s()(),l(5,"app-shop-item-data-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.buyAt)}}var Pt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-shop-data"]],features:[g],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,_a,6,2,"app-expandable",0),n&2&&f(0,i.databaseItem.buyAt&&i.databaseItem.buyAt.length?0:-1)},dependencies:[y,pt,D],encapsulation:2});let t=e;return t})();function Sa(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Chance as processing result "),s()(),l(5,"app-shop-item-process-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.chanceAsProcessResult)}}function Ea(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Can be processed at "),s()(),l(5,"app-shop-item-process-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.asProcessInput)}}var Ht=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-shop-item-process"]],features:[g],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Sa,6,2,"app-expandable",0)(1,Ea,6,2,"app-expandable",0),n&2&&(f(0,i.databaseItem.chanceAsProcessResult&&i.databaseItem.chanceAsProcessResult.length?0:-1),o(),f(1,i.databaseItem.asProcessInput&&i.databaseItem.asProcessInput.length?1:-1))},dependencies:[y,mt,D],encapsulation:2});let t=e;return t})();function Ta(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Is result of upgrade "),s()(),l(5,"app-item-upgrade-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.isUpgradeResult)}}function wa(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Is used as requirement in "),s()(),l(5,"app-item-upgrade-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.isUpgradeRequirement)}}var kt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-item-upgrade"]],features:[g],decls:2,vars:2,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Ta,6,2,"app-expandable",0)(1,wa,6,2,"app-expandable",0),n&2&&(f(0,i.databaseItem.isUpgradeResult&&i.databaseItem.isUpgradeResult.length?0:-1),o(),f(1,i.databaseItem.isUpgradeRequirement&&i.databaseItem.isUpgradeRequirement.length?1:-1))},dependencies:[y,dt,D],encapsulation:2});let t=e;return t})();function Ra(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Can be dropped from enemies "),s()(),l(5,"app-bestiary-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.fromEnemies)}}var At=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-bestiary"]],features:[g],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Ra,6,2,"app-expandable",0),n&2&&f(0,i.databaseItem.fromEnemies&&i.databaseItem.fromEnemies.length?0:-1)},dependencies:[y,st,D],encapsulation:2});let t=e;return t})();function Pa(t,e){if(t&1&&(m(0,"app-expandable",0,1)(2,"h3",2)(3,"app-database-header-button",3),d(4,"Buy at festival"),s()(),l(5,"app-festival-shop-item-table",4),s()),t&2){let p=h(1),a=c();o(3),r("templateRef",p),o(2),r("dataSource",a.databaseItem.buyAtFestivalShop)}}var Nt=(()=>{let e=class e extends C{};e.\u0275fac=(()=>{let a;return function(i){return(a||(a=x(e)))(i||e)}})(),e.\u0275cmp=b({type:e,selectors:[["app-database-festival-shop-data"]],features:[g],decls:1,vars:1,consts:[["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(n,i){n&1&&u(0,Pa,6,2,"app-expandable",0),n&2&&f(0,i.databaseItem.buyAtFestivalShop&&i.databaseItem.buyAtFestivalShop.length?0:-1)},dependencies:[y,lt,D],encapsulation:2});let t=e;return t})();function Na(t,e){if(t&1&&(m(0,"app-card")(1,"header",0),l(2,"app-item-icon",1),m(3,"div",2)(4,"h2",3),d(5),s(),m(6,"span"),d(7),s()(),l(8,"div",4)(9,"app-quality-grid",5),s(),m(10,"p",6),d(11),s(),m(12,"div",7),d(13,"There's currently no data for this item. :("),s(),l(14,"app-database-shop-item-process",8)(15,"app-database-shop-data",8)(16,"app-database-offerings",8)(17,"app-database-crops",8)(18,"app-database-fishing",8)(19,"app-database-insects",8)(20,"app-database-sea-critters",8)(21,"app-database-artisan",8)(22,"app-database-cooking",8)(23,"app-database-crafting",8)(24,"app-database-festival-shop-data",8)(25,"app-database-gifts",8)(26,"app-database-item-upgrade",8)(27,"app-database-bestiary",8),s()),t&2){let p=c(2);o(2),r("itemName",e.item.iconName),o(3),K(e.item.displayName),o(2),K(e.item.id),o(2),r("showOnlyBase",!p.item.qualities.bronze)("item",e.item),o(2),K(e.item.description),o(3),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e),o(),r("databaseItem",e)}}function Va(t,e){t&1&&(m(0,"app-card"),l(1,"mat-spinner",9),s())}function Ga(t,e){if(t&1&&(u(0,Na,28,20,"app-card"),W(1,"async"),u(2,Va,2,0)),t&2){let p=c(),a;f(0,(a=J(1,1,p.databaseItem$))?0:2,a)}}var Vt=(()=>{let e=class e{constructor(){this._databaseService=j(P),this._classes="col-span-full database-details"}ngOnInit(){this.databaseItem$=this._databaseService.fetchDatabaseItem$(this.item.id)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=b({type:e,selectors:[["app-database-details"]],hostVars:2,hostBindings:function(n,i){n&2&&he(i._classes)},inputs:{item:"item"},decls:1,vars:1,consts:[[1,"flex","items-center","flex-wrap","mb-5"],[1,"mr-3","w-14",3,"itemName"],[1,"flex","flex-col","gap-0.5"],[1,"!my-0","font-semibold","text-xl","text-black"],[1,"h-0","w-full","md:hidden"],["includePrices","",1,"md:ml-auto","mt-4","md:mt-0","quality-grid","inline-block","w-fit",3,"showOnlyBase","item"],[1,"text-lg"],[1,"empty-details","text-black","my-5","text-lg"],[3,"databaseItem"],[1,"mx-auto"]],template:function(n,i){n&1&&u(0,Ga,3,3),n&2&&f(0,i.databaseItem$?0:-1)},dependencies:[H,X,$e,Ve,_t,vt,St,Et,Ft,Tt,wt,Rt,Mt,Pt,Ht,kt,At,Nt,Z],styles:[`.database-details .empty-details{display:none}.database-details:not(:has(.database-header)) .empty-details{display:block}.database-details .expandable-body{transition:none}.quality-grid .app-item-icon>img{height:3.5rem}.database-header{color:#000;font-weight:600;font-size:1.25em;margin-top:1.2em;line-height:1.6}
`],encapsulation:2});let t=e;return t})();function $a(t,e){if(t&1){let p=ne();m(0,"app-card",5)(1,"div",6)(2,"h2"),d(3,"Important note"),s(),m(4,"p"),d(5,"The item list loads a lot of stuff, this may take a while. The list below shows everything, that got not filtered beforehand. Some of those items will never be obtainable as they only provide a technical purpose. The information shown per item are as complete as the rest of this website. When new features get added, the details in here will expand as well."),s(),m(6,"button",7),A("click",function(){$(p);let n=c();return q(n.hideImportantNote())}),d(7,"Got it!"),s()()()}}function qa(t,e){if(t&1){let p=ne();m(0,"app-item-icon",9),A("mouseenter",function(){let i=$(p).$implicit,I=c(2);return q(I.prefetchItem(i))})("click",function(){let n=$(p),i=n.$implicit,I=n.$index,E=c(2);return q(E.showDetails(i,I))}),s()}if(t&2){let p=e.$implicit,a=c(2);B("selected-icon",(a.selectedItem==null?null:a.selectedItem.id)===p.id),r("itemName",p.iconName)}}function Ua(t,e){t&1&&ge(0)}function ja(t,e){if(t&1&&(O(0,qa,1,3,"app-item-icon",10,Ce().trackById),u(2,Ua,1,0,"ng-container",8)),t&2){let p=c();L(p.filteredItems),o(2),r("ngIf",p.initialItemLoad())}}var Gt=(()=>{let e=class e{constructor(a,n,i,I,E,T){this._route=a,this._router=n,this._database=i,this._appRef=I,this._injector=E,this._title=T,this.searchTermControl=new Me("",{nonNullable:!0}),this.shouldHideImportantNote=!1,this.filteredItems=[],this._localStorageHideNoteKey="databaseHideImportantNote",this._didInitialLoad=!1,this.shouldHideImportantNote=we(localStorage.getItem(this._localStorageHideNoteKey)),this.items=i.getItems().filter(F=>Te(F.id)===Fe.BASE);let N=ae(F=>{let Y=/tag:(?<tag>[a-zA-Z.]+)/gm.exec(F)?.groups?.tag.replace("tag:","").toLocaleLowerCase()??"",ee=F.replace("tag:"+Y,"").toLocaleLowerCase().trim(),pe=this.items.filter(te=>{let me=!0;return Y&&(me=!!te.tags?.some(qt=>qt.toLocaleLowerCase().includes(Y))),me?te.displayName.toLocaleLowerCase().includes(ee)||ee.startsWith("item_")&&te.id.startsWith(ee):!1});return this.filteredItems=pe,pe});this.filteredItems$=ce(this._route.queryParams.pipe(ae(F=>{let R=F.q??"";return this.searchTermControl.setValue(R,{emitEvent:!1}),R}),N,V(1)),this.searchTermControl.valueChanges.pipe(fe(300),ie(F=>{this.updateQueryParam(F),document.getElementById("database-details")?.remove()}),N))}showDetails(a,n,i=!1){this.updateRouteParam(a.id),this.selectedItem=void 0,document.getElementById("database-details")?.remove();let I=document.getElementById("grid");if(!I)return;let T=window.getComputedStyle(I).getPropertyValue("grid-template-columns").split(" ").length,N=Math.floor(n/T),F=Math.min(this.filteredItems.length,(N+1)*T),R=document.querySelector(`#grid app-item-icon:nth-of-type(${F})`);if(!R)return;let se=this.createComponent(a);this.insertAfter(se,R),this.selectedItem=a,i&&setTimeout(()=>document.getElementById("database-details")?.scrollIntoView(!0),0)}insertAfter(a,n){n.parentNode?.insertBefore(a.location.nativeElement,n.nextSibling),this._appRef.attachView(a.hostView)}createComponent(a){let n=_e(Vt,{environmentInjector:this._injector});n.setInput("item",a);let i=n.location.nativeElement;return i.id="database-details",n}hideImportantNote(){this.shouldHideImportantNote=!0,localStorage.setItem(this._localStorageHideNoteKey,"true")}updateQueryParam(a){this._router.navigate([],{relativeTo:this._route,queryParams:{q:a},queryParamsHandling:"merge",replaceUrl:!0})}updateRouteParam(a){this._router.navigate(["..",a],{relativeTo:this._route,replaceUrl:!0,queryParamsHandling:"preserve"}).then(()=>!!this.selectedItem&&this.updateTitle(this.selectedItem.displayName))}initialItemLoad(){this._didInitialLoad||this._route.params.pipe(ie(a=>{let n=a.itemId;if(this._didInitialLoad=!0,!n)return;let i=this.filteredItems.findIndex(I=>I.id===n);if(i>-1)this.showDetails(this.filteredItems[i],i,!0);else if(this.filteredItems.length===0){let I=this.items.findIndex(E=>E.id===n);if(I>-1){let E=this.items[I];this._setGridContent(E)}}}),V(1)).subscribe()}_setGridContent(a){let n=this.createComponent(a);document.getElementById("grid")?.appendChild(n.location.nativeElement),this._appRef.attachView(n.hostView),this.selectedItem=a}trackById(a,n){return n.id}updateTitle(a){let n=this._title.getTitle();n&&this._title.setTitle(`${a} - ${n}`)}prefetchItem(a){this._database.fetchDatabaseItem$(a.id).pipe(V(1)).subscribe()}};e.\u0275fac=function(n){return new(n||e)(w(ke),w(Ae),w(P),w(Ie),w(ue),w(Ee))},e.\u0275cmp=b({type:e,selectors:[["app-database"]],decls:9,vars:5,consts:[[1,"container","mx-auto","pb-6","database-grid","px-2"],["class","my-3"],[1,"semi-transparent-form-field","my-3"],["matInput","",3,"formControl"],["id","grid",1,"grid","gap-4","icon-grid"],[1,"my-3"],[1,"prose","lg:prose-xl"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[1,"icon-grid-item",3,"itemName","mouseenter","click"],["class","icon-grid-item",3,"selected-icon","itemName"]],template:function(n,i){n&1&&(m(0,"div",0),u(1,$a,8,0,"app-card",1),m(2,"mat-form-field",2)(3,"mat-label"),d(4,"Search term"),s(),l(5,"input",3),s(),m(6,"div",4),u(7,ja,3,1,"ng-container"),W(8,"async"),s()()),n&2&&(o(),f(1,i.shouldHideImportantNote?-1:1),o(4),r("formControl",i.searchTermControl),o(2),f(7,J(8,3,i.filteredItems$)?7:-1))},dependencies:[ve,H,X,Ue,qe,yt,Be,Re,Pe,Z],encapsulation:2});let t=e;return t})();var Oa=[{path:"",component:Gt,title:"Database"}],$t=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=G({type:e}),e.\u0275inj=U({imports:[re.forChild(Oa),re]});let t=e;return t})();var Yn=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=G({type:e}),e.\u0275inj=U({imports:[Se,$t,it,je,Dt,He,Ge,xt,ht,Ct,rt,at,tt]});let t=e;return t})();export{Yn as DatabaseModule};
