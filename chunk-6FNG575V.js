import{a as ie,b as oe,c as ne}from"./chunk-4BGRGWBP.js";import{a as te}from"./chunk-5T6JT7FG.js";import{a as ae}from"./chunk-QZ7J64SB.js";import"./chunk-RHRTBMBA.js";import{a as ee}from"./chunk-DYAATRFR.js";import"./chunk-GLL3PL4Q.js";import"./chunk-QEWZLHID.js";import{a as X}from"./chunk-PD5FG3A7.js";import{a as Z}from"./chunk-SRLR52RT.js";import{a as H}from"./chunk-3TR4XKFQ.js";import"./chunk-PRWEW5VH.js";import{a as Q}from"./chunk-7JQJEV7G.js";import"./chunk-2K3GEZZY.js";import"./chunk-7A5ZJ3YN.js";import"./chunk-2A7PSW7O.js";import{a as q,c as R}from"./chunk-5NO5LL4W.js";import"./chunk-VO65IASJ.js";import{a as Y}from"./chunk-C53QTWVW.js";import"./chunk-GLYGKSTO.js";import{b as U}from"./chunk-PIL2IJC4.js";import"./chunk-OOBQPUIX.js";import"./chunk-OM3WRHFD.js";import"./chunk-JSGVWV7K.js";import{b as K}from"./chunk-VYOS5CGL.js";import"./chunk-RZQ3UNDK.js";import"./chunk-DKARO4CX.js";import{i as z,l as W}from"./chunk-DHAI4KFY.js";import"./chunk-5MLMU7SK.js";import"./chunk-GEWE6M22.js";import{f as G}from"./chunk-SJRCRC22.js";import"./chunk-X3TMHFY3.js";import"./chunk-EE6A4D3O.js";import"./chunk-2CFRUPNI.js";import"./chunk-F6RS7OIB.js";import"./chunk-KW5235UB.js";import{g as S}from"./chunk-7JOAVXDE.js";import"./chunk-7SDYZQX7.js";import{b as V}from"./chunk-KUYOE2KN.js";import"./chunk-AJOFB37Q.js";import{$b as B,Ba as F,Gc as C,Hc as f,Ib as p,Kb as T,Ob as c,Qb as h,Rb as b,Sb as x,Tb as m,U as I,Ub as d,Vb as _,Vc as L,Zb as v,ac as a,db as r,ea as M,k as $,ld as O,ma as P,na as w,q as E,sb as D,wb as A,wc as j,xc as J,yb as l,yc as k,zc as N}from"./chunk-GYX7HZX3.js";import"./chunk-4CLCTAJ7.js";function se(t,n){if(t&1&&_(0,"app-crop",2),t&2){let e=n.$implicit;p("item",e)}}function ce(t,n){if(t&1&&_(0,"app-animal-produce",3),t&2){let e=a().$implicit;p("animal",e.producedByAnimal)("shownItemId",e.item.id)}}function le(t,n){if(t&1&&_(0,"app-processing",5),t&2){let e=n.$implicit,i=n.$index;T("mt-3",i!==0),p("itemProcessing",e)}}function me(t,n){if(t&1&&(b(0,se,1,1,"app-crop",2,h),l(2,ce,1,2,"app-animal-produce",3),b(3,le,1,3,"app-processing",4,h)),t&2){let e=n.$implicit;x(e.isSeedFor),r(2),c(e.producedByAnimal?2:-1),r(),x(e.artisanResult)}}var re=(()=>{class t{constructor(){this.item=F.required(),this.toDoContext=F.required()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=D({type:t,selectors:[["app-produce-details"]],inputs:{item:[1,"item"],toDoContext:[1,"toDoContext"]},decls:4,vars:4,consts:[[3,"context","itemId"],["appDatabaseItemDetails",""],[1,"mb-4",3,"item"],[3,"animal","shownItemId"],[3,"mt-3","itemProcessing"],[3,"itemProcessing"]],template:function(i,o){if(i&1&&(N(0),m(1,"app-database-item-details",0),C(2,"isBaseCrop"),l(3,me,5,1,"ng-template",1),d()),i&2){let s=o.item();r(),p("context",o.toDoContext())("itemId",(f(2,2,s)?s.dropData[0].item:s).id)}},dependencies:[ee,ie,ne,Q,X,oe],encapsulation:2})}}return t})();function de(t,n){if(t&1&&_(0,"app-produce-details",0),t&2){let e=a();p("item",e.selectedEntity)("toDoContext",e.toDoContext())}}function _e(t,n){if(t&1){let e=v();m(0,"app-item-icon",6),C(1,"isMinimalItem"),C(2,"isMinimalItem"),C(3,"isMinimalItem"),B("click",function(){let o=P(e).$implicit,s=a(4);return w(s.showDetails(o))}),d()}if(t&2){let e=n.$implicit,i=a(4);T("selected-icon",(f(1,3,i.selectedEntity)?i.selectedEntity.id:i.selectedEntity==null||i.selectedEntity.dropData==null||i.selectedEntity.dropData[0]==null||i.selectedEntity.dropData[0].item==null?null:i.selectedEntity.dropData[0].item.id)===(f(2,5,e)?e.id:e.dropData[0].item.id)),p("itemName",f(3,7,e)?e.iconName:e.dropData[0].item.iconName)}}function ue(t,n){if(t&1&&(m(0,"div",4),b(1,_e,4,9,"app-item-icon",5,h),d()),t&2){let e=a();r(),x(e)}}function Ce(t,n){if(t&1&&_(0,"app-non-specialized-table",7),t&2){let e=a(2),i=a(2);p("dataSource",i.castToItemArray(e))}}function fe(t,n){if(t&1&&_(0,"app-crop-table",7),t&2){let e=a(2),i=a(2);p("dataSource",i.castToBaseCropArray(e))}}function he(t,n){if(t&1&&l(0,Ce,1,1,"app-non-specialized-table",7)(1,fe,1,1,"app-crop-table",7),t&2){let e=a(2).$implicit,i=a();c(e.title!==i.tabs[0].title?0:-1),r(),c(e.title===i.tabs[0].title?1:-1)}}function be(t,n){if(t&1&&l(0,ue,3,0,"div",4)(1,he,2,2),t&2){let e=a(2);c(e.showTable?-1:0),r(),c(e.showTable?1:-1)}}function xe(t,n){if(t&1){let e=v();m(0,"mat-tab",2)(1,"app-data-filter",3),k("showTableChange",function(o){P(e);let s=a();return J(s.showTable,o)||(s.showTable=o),w(o)}),d(),l(2,be,2,2),C(3,"async"),d()}if(t&2){let e,i=n.$implicit,o=a();p("label",i.title),r(),j("showTable",o.showTable),p("parentFormGroup",o.formControl),r(),c((e=f(3,4,i.data))?2:-1,e)}}var Re=(()=>{class t extends H{constructor(){super(new z({season:new W([...S],{nonNullable:!0})})),this.isBeta=M(V).getSettings().useBeta,this.toDoContext=L(()=>{let e=this.selectedTabIndex();return e===0?"journal_crops":e===1?"journal_animal_produce":e===2?"artisan":e===3?"journal_ocean_produce":void 0}),this.tabs=[{title:"Crops",data:E([this._database.fetchCrops$(),this._database.fetchFruitTrees$(),this._database.fetchFruitPlants$()]).pipe(I(([e,i,o])=>this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-crops"),this._database.fetchItems$().pipe(I(s=>$(s.map(u=>e.find(y=>y.pickupableItemId===u.id)??o.find(y=>y.dropData.some(g=>g.itemId===u.id))??i.find(y=>y.dropData.some(g=>g.itemId===u.id))).filter(G)))),0)))},{title:"Animal Products",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-animal-products"),this._database.fetchItems$(),1)},{title:"Artisan Products",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-artisan-products"),this._database.fetchItems$(),2)},{title:"Ocean",data:this.getFilteredJournalData(this._database.fetchJournalOrder$("journal-ocean-products"),this._database.fetchItems$(),3)}],this.activateTabFromRoute(this.tabs.map(e=>e.title))}filterPredicate(e,i){if(!("growableSeason"in e))return!0;if(!i.season?.length)return!1;let o=e.growableSeason.join(" ").toLowerCase();return i.season?.length===S.length||!!i.season?.some(u=>o.includes((""+u).toLowerCase()))}castToItemArray(e){return e}castToBaseCropArray(e){return e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=D({type:t,selectors:[["app-produce"]],features:[A],decls:5,vars:2,consts:[["listDetail","",3,"item","toDoContext"],[3,"selectedTabChange","selectedIndex"],[3,"label"],[3,"showTableChange","showTable","parentFormGroup"],[1,"icon-grid"],[1,"icon-grid-item",3,"selected-icon","itemName"],[1,"icon-grid-item",3,"click","itemName"],[3,"dataSource"]],template:function(i,o){i&1&&(m(0,"app-list-detail-container"),l(1,de,1,2,"app-produce-details",0),m(2,"mat-tab-group",1),B("selectedTabChange",function(u){return o.updateUrl(u)}),b(3,xe,4,6,"mat-tab",2,h),d()()),i&2&&(r(),c(o.selectedEntity?1:-1),r(),p("selectedIndex",o.selectedTabIndex()),r(),x(o.tabs))},dependencies:[U,re,R,q,Y,O,K,te,Z,ae],encapsulation:2})}}return t})();export{Re as ProduceComponent};
