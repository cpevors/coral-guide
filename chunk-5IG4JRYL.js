import{a as Ft}from"./chunk-3CEPGL3M.js";import{a as Rt,b as Bt}from"./chunk-OHLVRNK7.js";import{a as L,b as ht,c as xt,d as Mt}from"./chunk-GXVKDDDS.js";import{a as bt,b as Ct}from"./chunk-ZYC3I2PB.js";import{c as _t,d as gt,h as yt,k as Dt,l as It,m as wt}from"./chunk-UE5OAB4A.js";import"./chunk-ODROMJ3E.js";import{a as vt,b as St,d as Tt,e as Et}from"./chunk-UOSEBWRH.js";import"./chunk-UCG64U5J.js";import{a as Xe,b as et}from"./chunk-DL3B5A3K.js";import{$d as at,Aa as Z,Ad as ze,Ae as ae,Ba as m,Be as ne,Ce as ie,Da as N,De as oe,Ea as Me,Ee as re,Fa as Fe,Fb as $e,Fe as pe,G as Ce,Ga as u,Ge as me,Ha as $,Hd as We,He as se,Ia as R,Ie as le,Ja as B,Jb as Ae,Je as de,K as z,Ka as s,Ke as pt,La as p,Lb as X,Ld as Je,Ma as d,N as E,Na as M,Nb as Ve,Oa as F,Od as Ye,P as b,Pa as Re,Pe as mt,Q as W,Qa as he,Rb as Ge,Rd as xe,Re as st,Sa as q,Se as lt,Ta as f,U as Ee,Ua as Be,Ud as Ze,Va as Pe,Ve as dt,W as J,Wd as k,We as ct,X as Y,Xe as ft,Ye as ut,Zd as ee,_ as h,_b as Le,_d as tt,a as ge,b as ye,cc as Oe,d as De,da as we,e as Ie,eb as C,ee as nt,f as ve,fb as l,gb as A,hb as j,ib as He,je as it,l as be,la as r,me as ot,n as Se,ne as rt,nf as g,ob as ke,oc as Ue,od as je,qb as V,sb as P,sd as Qe,tb as H,tf as ce,ua as x,vc as G,w as Te,wc as qe,x as K,xa as c,xb as Ne,xd as Ke,ze as te}from"./chunk-7K7D5W6V.js";var _=(()=>{let t=class t{constructor(){this.database=E(G)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],inputs:{databaseItem:"databaseItem"},decls:0,vars:0,template:function(i,n){},encapsulation:2});let e=t;return e})();var Zt=["*"],y=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=b({type:t,selectors:[["app-database-header-button"]],inputs:{templateRef:"templateRef"},ngContentSelectors:Zt,decls:4,vars:6,consts:[["mat-button","",1,"hover:bg-black/10",3,"click"],[1,"flex","gap-x-2","items-center"],[1,"arrow"]],template:function(i,n){i&1&&(Be(),s(0,"button",0),q("click",function(){return n.templateRef.toggle()}),s(1,"div",1),Pe(2),d(3,"i",2),p()()),i&2&&(r(3),N("down",!n.templateRef.open)("translate-y-[-3px]",n.templateRef.open)("up",n.templateRef.open))},dependencies:[bt],encapsulation:2});let e=t;return e})();var Xt=e=>[e];function ea(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Fishing"),p()(),d(5,"app-caught-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",V(2,Xt,a.fish))}}var Ht=(()=>{let t=class t extends _{ngOnInit(){this.databaseItem.fish&&(this.fish=ye(ge({},this.databaseItem.fish),{item:this.databaseItem.item}))}};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-fishing"]],features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,ea,6,4,"app-expandable",1),i&2&&u(n.fish?0:-1)},dependencies:[g,L,y],encapsulation:2});let e=t;return e})();var aa=e=>[e];function na(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Bugs and insects "),p()(),d(5,"app-caught-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",V(2,aa,a.databaseItem.insect))}}var kt=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-insects"]],features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,na,6,4,"app-expandable",1),i&2&&u(n.databaseItem.insect?0:-1)},dependencies:[g,L,y],encapsulation:2});let e=t;return e})();var oa=e=>[e];function ra(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Ocean critters"),p()(),d(5,"app-caught-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",V(2,oa,a.databaseItem.oceanCritter))}}var Nt=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-sea-critters"]],features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,ra,6,4,"app-expandable",1),i&2&&u(n.databaseItem.oceanCritter?0:-1)},dependencies:[g,L,y],encapsulation:2});let e=t;return e})();function ma(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Seed for"),p()(),d(5,"app-crop-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.comesFromSeed)}}function sa(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"From seed"),p()(),d(5,"app-crop-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.isSeedFor)}}var $t=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-crops"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,ma,6,2,"app-expandable",1)(1,sa,6,2,"app-expandable",1),i&2&&(u(n.databaseItem.comesFromSeed&&n.databaseItem.comesFromSeed.length?0:-1),r(),u(n.databaseItem.isSeedFor&&n.databaseItem.isSeedFor.length?1:-1))},dependencies:[g,ht,y],encapsulation:2});let e=t;return e})();function da(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in processing "),p()(),d(5,"app-processor-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.artisanIngredient)}}function ca(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Processing"),p()(),d(5,"app-processor-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.artisanResult)}}var At=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-artisan"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showProcessor","",3,"dataSource"]],template:function(i,n){i&1&&c(0,da,6,2,"app-expandable",1)(1,ca,6,2,"app-expandable",1),i&2&&(u(n.databaseItem.artisanIngredient&&n.databaseItem.artisanIngredient.length?0:-1),r(),u(n.databaseItem.artisanResult&&n.databaseItem.artisanResult.length?1:-1))},dependencies:[g,St,y],encapsulation:2});let e=t;return e})();function ua(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Used to craft"),p()(),d(5,"app-inventory-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.usedToCraft)}}function ba(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Crafting recipe"),p()(),d(5,"app-inventory-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.craftedFrom)}}var Vt=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-crafting"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,ua,6,2,"app-expandable",1)(1,ba,6,2,"app-expandable",1),i&2&&(u(n.databaseItem.usedToCraft&&n.databaseItem.usedToCraft.length?0:-1),r(),u(n.databaseItem.craftedFrom&&n.databaseItem.craftedFrom.length?1:-1))},dependencies:[g,vt,y],encapsulation:2});let e=t;return e})();function ha(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in cooking "),p()(),d(5,"app-cooking-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.usedToCook)}}function xa(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Cooking recipe"),p()(),d(5,"app-cooking-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.cookedFrom)}}var Gt=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-cooking"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showUtensil","",3,"dataSource"]],template:function(i,n){i&1&&c(0,ha,6,2,"app-expandable",1)(1,xa,6,2,"app-expandable",1),i&2&&(u(n.databaseItem.usedToCook&&n.databaseItem.usedToCook.length?0:-1),r(),u(n.databaseItem.cookedFrom&&n.databaseItem.cookedFrom.length?1:-1))},dependencies:[g,Tt,y],encapsulation:2});let e=t;return e})();function ya(e,t){if(e&1&&(s(0,"td",14),d(1,"app-ui-icon",15),p()),e&2){let o=t.$implicit;r(),m("uiIcon",o.pref.icon)}}function Da(e,t){e&1&&(s(0,"th",16),l(1,"Preference"),p()),e&2&&Z("colspan",2)}function Ia(e,t){if(e&1&&(s(0,"td",17),l(1),p()),e&2){let o=t.$implicit;r(),j(" ",o.pref.label," ")}}function va(e,t){e&1&&(s(0,"th",16),l(1,"NPCs"),p())}function Sa(e,t){if(e&1&&(s(0,"div",21),d(1,"app-item-icon",22),l(2),p()),e&2){let o=t.$implicit,a=t.$index,i=t.$count;N("mr-4",a!==i-1),r(),m("itemName",o.iconName),r(),j(" ",o.characterName," ")}}function Ta(e,t){if(e&1&&(s(0,"td",18)(1,"div",19),R(2,Sa,3,4,"div",20,$),p()()),e&2){let o=t.$implicit;r(2),B(o.npcs)}}function Ea(e,t){e&1&&d(0,"tr",23)}function wa(e,t){e&1&&d(0,"tr",24)}function Ma(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Gifting"),p()(),s(5,"app-responsive-table")(6,"table",4),M(7,5),c(8,ya,2,1,"td",6),F(),M(9,7),c(10,Da,2,1,"th",8)(11,Ia,2,1,"td",9),F(),M(12,10),c(13,va,2,0,"th",8)(14,Ta,4,0,"td",11),F(),c(15,Ea,1,0,"tr",12)(16,wa,1,0,"tr",13),p()()()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(3),m("dataSource",a.databaseItem.asGift),r(9),m("matHeaderRowDef",a.displayedHeaderColumns)("matHeaderRowDefSticky",!0),r(),m("matRowDefColumns",a.displayedColumns)}}var Lt=(()=>{let t=class t extends _{constructor(){super(...arguments),this.displayedHeaderColumns=["preference","npcs"],this.displayedColumns=["icon",...this.displayedHeaderColumns],this.favoritePreferences=[],this.lovePreferences=[],this.likePreferences=[],this.neutralPreferences=[],this.dislikePreferences=[],this.hatePreferences=[],this.dataSource=[],this.keys=["favoritePreferences","lovePreferences","likePreferences","neutralPreferences","dislikePreferences","hatePreferences"]}ngOnInit(){let a=this.databaseItem.item;if(!a)return;this.database.getGiftingPreferences().forEach(n=>{this.keys.forEach(D=>{n[D].findIndex(w=>w.type==="item"&&a.id===w.item.id)!==-1&&n.npc&&this[D].push(n.npc)})}),this.keys.forEach(n=>{let D=this[n];D.length&&this.dataSource.push({pref:Ft.find(T=>T.preferenceField===n),npcs:D})})}};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-gifts"]],hostVars:2,hostBindings:function(i,n){i&2&&N("database-gifts",n.displayedHeaderColumns)},features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["mat-table","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 !pt-3 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","preference"],["class","backdrop-blur-xl","mat-header-cell","",4,"matHeaderCellDef"],["class","text-col !pl-0 whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","npcs"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","!pt-3","w-10","text-center","icon-col"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],["mat-header-cell","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","!pl-0","whitespace-nowrap"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"inline-flex","shrink-0","items-center",3,"mr-4"],[1,"inline-flex","shrink-0","items-center"],[1,"h-12","mr-2","!flex","items-center","shrink-0",3,"itemName"],["mat-header-row",""],["mat-row",""]],template:function(i,n){i&1&&c(0,Ma,17,5,"app-expandable",1),i&2&&u(n.databaseItem.asGift&&n.databaseItem.asGift.length?0:-1)},dependencies:[k,te,g,ae,ie,me,oe,ne,se,re,pe,le,de,Ze,y],styles:[`.database-gifts .app-responsive-table .app-item-icon>img{aspect-ratio:unset;width:auto;max-height:3rem}
`],encapsulation:2});let e=t;return e})();function Ra(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Required for offering "),p()(),d(5,"app-offerings-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.requiredAsOffering)}}function Ba(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Offering reward"),p()(),d(5,"app-offerings-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.isBundleRewardIn)}}var Ot=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-offerings"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showAltar","",3,"dataSource"]],template:function(i,n){i&1&&c(0,Ra,6,2,"app-expandable",1)(1,Ba,6,2,"app-expandable",1),i&2&&(u(n.databaseItem.requiredAsOffering&&n.databaseItem.requiredAsOffering.length?0:-1),r(),u(n.databaseItem.isBundleRewardIn&&n.databaseItem.isBundleRewardIn.length?1:-1))},dependencies:[g,It,y],encapsulation:2});let e=t;return e})();function Ha(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at"),p()(),d(5,"app-shop-item-data-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.buyAt)}}var Ut=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-shop-data"]],features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,Ha,6,2,"app-expandable",1),i&2&&u(n.databaseItem.buyAt&&n.databaseItem.buyAt.length?0:-1)},dependencies:[g,_t,y],encapsulation:2});let e=t;return e})();function Na(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Chance as processing result "),p()(),d(5,"app-shop-item-process-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.chanceAsProcessResult)}}function $a(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be processed at "),p()(),d(5,"app-shop-item-process-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.asProcessInput)}}var qt=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-shop-item-process"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,Na,6,2,"app-expandable",1)(1,$a,6,2,"app-expandable",1),i&2&&(u(n.databaseItem.chanceAsProcessResult&&n.databaseItem.chanceAsProcessResult.length?0:-1),r(),u(n.databaseItem.asProcessInput&&n.databaseItem.asProcessInput.length?1:-1))},dependencies:[g,gt,y],encapsulation:2});let e=t;return e})();function Va(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is result of upgrade "),p()(),d(5,"app-item-upgrade-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.isUpgradeResult)}}function Ga(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Is used as requirement in "),p()(),d(5,"app-item-upgrade-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.isUpgradeRequirement)}}var jt=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-item-upgrade"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,Va,6,2,"app-expandable",1)(1,Ga,6,2,"app-expandable",1),i&2&&(u(n.databaseItem.isUpgradeResult&&n.databaseItem.isUpgradeResult.length?0:-1),r(),u(n.databaseItem.isUpgradeRequirement&&n.databaseItem.isUpgradeRequirement.length?1:-1))},dependencies:[g,yt,y],encapsulation:2});let e=t;return e})();function Oa(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Can be dropped from enemies "),p()(),d(5,"app-bestiary-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.fromEnemies)}}var Qt=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-bestiary"]],features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,Oa,6,2,"app-expandable",1),i&2&&u(n.databaseItem.fromEnemies&&n.databaseItem.fromEnemies.length?0:-1)},dependencies:[g,xt,y],encapsulation:2});let e=t;return e})();function qa(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Buy at festival"),p()(),d(5,"app-festival-shop-item-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.buyAtFestivalShop)}}var Kt=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-festival-shop-data"]],features:[x],decls:1,vars:1,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,qa,6,2,"app-expandable",1),i&2&&u(n.databaseItem.buyAtFestivalShop&&n.databaseItem.buyAtFestivalShop.length?0:-1)},dependencies:[g,Dt,y],encapsulation:2});let e=t;return e})();function Qa(e,t){if(e&1&&(s(0,"td",14),d(1,"app-item-icon",15),p()),e&2){let o=t.$implicit;r(),m("itemName",o.item==null?null:o.item.iconName)}}function Ka(e,t){e&1&&(s(0,"th",16),l(1," Output "),p()),e&2&&Z("colspan",2)}function za(e,t){if(e&1&&(s(0,"td",17),l(1),p()),e&2){let o=t.$implicit;r(),He("",o.item==null?null:o.item.displayName," (",o.amount,") ")}}function Wa(e,t){e&1&&(s(0,"th",18),l(1," Ingredients"),p())}function Ja(e,t){e&1&&d(0,"hr",22)}function Ya(e,t){if(e&1&&(d(0,"app-table-item-list",20),c(1,Ja,1,0,"hr",22)),e&2){let o=t.$implicit,a=t.$index,i=t.$count;m("itemList",o),r(),u(a!==i-1?1:-1)}}function Za(e,t){if(e&1&&(s(0,"span",21),l(1," Either of the following"),p(),R(2,Ya,2,2,null,null,$)),e&2){let o=f().$implicit;r(2),B(o.eitherOrIngredients)}}function Xa(e,t){if(e&1&&(s(0,"div",24),d(1,"app-item-icon",26),s(2,"span",27),l(3),p()()),e&2){let o=f().$implicit;r(),m("itemName",o.iconName),r(2),A(o.displayName)}}function en(e,t){if(e&1&&(s(0,"div",23),c(1,Xa,4,2,"div",24),s(2,"div",25),l(3),p()()),e&2){let o=t.$implicit,a=f().$implicit;r(),u(o?1:-1),r(2),j("as ",a.key," ")}}function tn(e,t){if(e&1&&(R(0,en,4,2,"div",23,$),P(2,"castToMinimalItemArray")),e&2){let o=t.$implicit;B(H(2,0,o.value))}}function an(e,t){if(e&1&&(s(0,"span",21),l(1," The following counting as"),p(),R(2,tn,3,2,null,null,$),P(4,"keyvalue")),e&2){let o=f().$implicit;r(2),B(H(4,0,o.additionsToGenerics))}}function nn(e,t){if(e&1&&(s(0,"td",19),d(1,"app-table-item-list",20),P(2,"cookingRecipeIngredients"),c(3,Za,4,0)(4,an,5,2),p()),e&2){let o=t.$implicit;r(),m("itemList",H(2,3,o)),r(2),u(o.eitherOrIngredients.length?3:-1),r(),u(o.additionsToGenerics?4:-1)}}function on(e,t){e&1&&(s(0,"th",28),l(1," Sell price"),p())}function rn(e,t){if(e&1&&(s(0,"td",29),d(1,"app-money",30),p()),e&2){let o=t.$implicit;r(),m("amount",o.item.sellPrice)}}function pn(e,t){e&1&&d(0,"tr",31)}function mn(e,t){e&1&&d(0,"tr",32)}function sn(e,t){if(e&1&&(s(0,"table",0),M(1,1),c(2,Qa,2,1,"td",2),F(),M(3,3),c(4,Ka,2,1,"th",4)(5,za,2,2,"td",5),F(),M(6,6),c(7,Wa,2,0,"th",7)(8,nn,5,5,"td",8),F(),M(9,9),c(10,on,2,0,"th",10)(11,rn,2,1,"td",11),F(),c(12,pn,1,0,"tr",12)(13,mn,1,0,"tr",13),p()),e&2){let o=f();m("dataSource",o.matDataSource),r(12),m("matHeaderRowDef",o.displayHeaderColumns)("matHeaderRowDefSticky",!0),r(),m("matRowDefColumns",o.displayedColumns)}}var fe=(()=>{let t=class t extends ut{constructor(){super(...arguments),this.BASE_DISPLAY_COLUMNS=["icon","outputName","ingredients","sellPrice"],this.sortingDataAccessor=(a,i)=>{let n=this.sortHelper(a.item,i);return n!==null?n:0}}};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-mixing-table"]],standalone:!0,features:[x,ke],decls:2,vars:1,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0  w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","outputName"],["class","backdrop-blur-xl","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","ingredients"],["mat-header-cell","",4,"matHeaderCellDef"],["class","list-col","mat-cell","",4,"matCellDef"],["matColumnDef","sellPrice"],["class","whitespace-nowrap","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-col !text-right w-[1%]","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","w-10","text-center","icon-col"],[3,"itemName"],["mat-header-cell","","mat-sort-header","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","whitespace-nowrap"],["mat-header-cell",""],["mat-cell","",1,"list-col"],[1,"mb-3",3,"itemList"],[1,"text-black","mt-1"],[1,"my-5"],[1,"flex","justify-between","mb-1"],[1,"flex","gap-x-3","items-center"],[1,"ml-2","flex","items-center","whitespace-nowrap"],[1,"!w-7",3,"itemName"],[1,"whitespace-nowrap"],["mat-header-cell","","mat-sort-header","",1,"whitespace-nowrap"],["mat-cell","",1,"text-col","!text-right","w-[1%]"],[3,"amount"],["mat-header-row",""],["mat-row",""]],template:function(i,n){i&1&&(s(0,"app-responsive-table"),c(1,sn,14,4,"table",0),p()),i&2&&(r(),u(n.matDataSource?1:-1))},dependencies:[Ve,pe,ne,oe,re,le,me,de,se,dt,ct,ae,ce,k,tt,te,mt,st,lt,ie],encapsulation:2});let e=t;return e})();function dn(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Usage in mixing "),p()(),d(5,"app-mixing-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.usedToMix)}}function cn(e,t){if(e&1&&(s(0,"app-expandable",1,0)(2,"h3",2)(3,"app-database-header-button",3),l(4,"Mixing recipe"),p()(),d(5,"app-mixing-table",4),p()),e&2){let o=C(1),a=f();r(3),m("templateRef",o),r(2),m("dataSource",a.databaseItem.mixedFrom)}}var zt=(()=>{let t=class t extends _{};t.\u0275fac=(()=>{let a;return function(n){return(a||(a=h(t)))(n||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-database-mixing"]],features:[x],decls:2,vars:2,consts:[["expandableComponent",""],["open",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(i,n){i&1&&c(0,dn,6,2,"app-expandable",1)(1,cn,6,2,"app-expandable",1),i&2&&(u(n.databaseItem.usedToMix&&n.databaseItem.usedToMix.length?0:-1),r(),u(n.databaseItem.mixedFrom&&n.databaseItem.mixedFrom.length?1:-1))},dependencies:[g,fe,y],encapsulation:2});let e=t;return e})();function Cn(e,t){if(e&1&&(s(0,"app-card")(1,"header",0),d(2,"app-item-icon",1),s(3,"div",2)(4,"h2",3),l(5),p(),s(6,"span"),l(7),p()(),s(8,"div",4),d(9,"app-to-do-toggle",5),p(),d(10,"div",6)(11,"app-quality-grid",7),p(),s(12,"p",8),l(13),p(),s(14,"div",9),l(15,"There's currently no data for this item. :("),p(),d(16,"app-database-shop-item-process",10)(17,"app-database-shop-data",10)(18,"app-database-offerings",10)(19,"app-database-crops",10)(20,"app-database-fishing",10)(21,"app-database-insects",10)(22,"app-database-sea-critters",10)(23,"app-database-artisan",10)(24,"app-database-cooking",10)(25,"app-database-mixing",10)(26,"app-database-crafting",10)(27,"app-database-festival-shop-data",10)(28,"app-database-gifts",10)(29,"app-database-item-upgrade",10)(30,"app-database-bestiary",10),p()),e&2){let o=t;r(2),m("itemName",o.item.iconName),r(3),A(o.item.displayName),r(2),A(o.item.id),r(2),m("item",o.item),r(2),m("showOnlyBase",!o.item.qualities.bronze)("item",o.item),r(2),A(o.item.description),r(3),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o),r(),m("databaseItem",o)}}function hn(e,t){e&1&&(s(0,"app-card"),d(1,"mat-spinner",11),p())}function xn(e,t){if(e&1&&(c(0,Cn,31,22,"app-card"),P(1,"async"),c(2,hn,2,0,"app-card")),e&2){let o,a=f();u((o=H(1,1,a.databaseItem$))?0:2,o)}}var Wt=(()=>{var t;let o=class o{constructor(){Ie(this,t);this.item=we.required(),ve(this,t,E(G)),this._classes="col-span-full database-details"}ngOnInit(){this.databaseItem$=De(this,t).fetchDatabaseItem$(this.item().id)}};t=new WeakMap,o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=b({type:o,selectors:[["app-database-details"]],hostVars:2,hostBindings:function(n,D){n&2&&Me(D._classes)},inputs:{item:[1,"item"]},decls:1,vars:1,consts:[[1,"flex","items-center","flex-wrap","mb-5"],[1,"mr-3","w-14",3,"itemName"],[1,"flex","flex-col","gap-0.5"],[1,"!my-0","font-semibold","text-xl","text-black"],[1,"card-actions","ml-4"],["context","database",3,"item"],[1,"h-0","w-full","md:hidden"],["includePrices","",1,"md:ml-auto","mt-4","md:mt-0","quality-grid","inline-block","w-fit",3,"showOnlyBase","item"],[1,"text-lg"],[1,"empty-details","text-black","my-5","text-lg"],[3,"databaseItem"],[1,"mx-auto"]],template:function(n,D){n&1&&c(0,xn,3,3),n&2&&u(D.databaseItem$?0:-1)},dependencies:[k,ee,at,Xe,nt,Ht,kt,Nt,$t,At,Vt,Gt,Lt,Ot,Ut,qt,jt,Qt,Kt,zt,X],styles:[`.database-details .empty-details{display:none}.database-details:not(:has(.database-header)) .empty-details{display:block}.database-details .expandable-body{transition:none}.quality-grid .app-item-icon>img{height:3.5rem}.database-header{color:#000;font-weight:600;font-size:1.25em;margin-top:1.2em;line-height:1.6}
`],encapsulation:2});let e=o;return e})();function _n(e,t){if(e&1){let o=he();s(0,"app-card",1)(1,"div",5)(2,"h2"),l(3,"Important note"),p(),s(4,"p"),l(5,"The item list loads a lot of stuff, this may take a while. The list below shows everything, that got not filtered beforehand. Some of those items will never be obtainable as they only provide a technical purpose. The information shown per item are as complete as the rest of this website. When new features get added, the details in here will expand as well."),p(),s(6,"button",6),q("click",function(){J(o);let i=f();return Y(i.hideImportantNote())}),l(7,"Got it!"),p()()()}}function gn(e,t){if(e&1){let o=he();s(0,"app-item-icon",9),q("mouseenter",function(){let i=J(o).$implicit,n=f(2);return Y(n.prefetchItem(i))})("click",function(){let i=J(o),n=i.$implicit,D=i.$index,T=f(2);return Y(T.showDetails(n,D))}),p()}if(e&2){let o=t.$implicit,a=f(2);N("selected-icon",(a.selectedItem==null?null:a.selectedItem.id)===o.id),m("itemName",o.iconName)}}function yn(e,t){e&1&&Re(0)}function Dn(e,t){if(e&1&&(R(0,gn,1,3,"app-item-icon",7,Fe().trackById,!0),c(2,yn,1,0,"ng-container",8)),e&2){let o=f();B(o.filteredItems),r(2),m("ngIf",o.initialItemLoad())}}var Jt=(()=>{let t=class t{constructor(){this.searchTermControl=new Ke("",{nonNullable:!0}),this.shouldHideImportantNote=!1,this.filteredItems=[],this._route=E(Je),this._router=E(Ye),this._database=E(G),this._appRef=E(Ne),this._injector=E(Ee),this._title=E(Le),this._localStorageHideNoteKey="databaseHideImportantNote",this._didInitialLoad=!1,this.shouldHideImportantNote=qe(localStorage.getItem(this._localStorageHideNoteKey)),this.items=this._database.getItems().filter(i=>Ue(i.id)===Oe.BASE);let a=be(i=>{let T=/tag:(?<tag>[a-zA-Z.]+)/gm.exec(i)?.groups?.tag.replace("tag:","").toLocaleLowerCase()??"",w=i.replace("tag:"+T,"").toLocaleLowerCase().trim(),Q=this.items.filter(O=>{let U=!0;return T&&(U=!!O.tags?.some(ue=>ue.toLocaleLowerCase().includes(T))),U?O.displayName.toLocaleLowerCase().includes(w)||w.startsWith("item_")&&O.id.startsWith(w):!1});return this.filteredItems=Q,Q});this.filteredItems$=Se(this._route.queryParams.pipe(be(i=>{let n=i.q??"";return this.searchTermControl.setValue(n,{emitEvent:!1}),n}),a,K(1)),this.searchTermControl.valueChanges.pipe(Te(300),Ce(i=>{this.updateQueryParam(i),document.getElementById("database-details")?.remove()}),a))}showDetails(a,i,n=!1){this.updateRouteParam(a.id),this.selectedItem=void 0,document.getElementById("database-details")?.remove();let D=document.getElementById("grid");if(!D)return;let w=window.getComputedStyle(D).getPropertyValue("grid-template-columns").split(" ").length,Q=Math.floor(i/w),O=Math.min(this.filteredItems.length,(Q+1)*w),U=document.querySelector(`#grid app-item-icon:nth-of-type(${O})`);if(!U)return;let ue=this.createComponent(a);this.insertAfter(ue,U),this.selectedItem=a,n&&setTimeout(()=>document.getElementById("database-details")?.scrollIntoView(!0),0)}insertAfter(a,i){i.parentNode?.insertBefore(a.location.nativeElement,i.nextSibling),this._appRef.attachView(a.hostView)}createComponent(a){let i=$e(Wt,{environmentInjector:this._injector});i.setInput("item",a);let n=i.location.nativeElement;return n.id="database-details",i}hideImportantNote(){this.shouldHideImportantNote=!0,localStorage.setItem(this._localStorageHideNoteKey,"true")}updateQueryParam(a){this._router.navigate([],{relativeTo:this._route,queryParams:{q:a},queryParamsHandling:"merge",replaceUrl:!0})}updateRouteParam(a){this._router.navigate(["..",a],{relativeTo:this._route,replaceUrl:!0,queryParamsHandling:"preserve"}).then(()=>!!this.selectedItem&&this.updateTitle(this.selectedItem.displayName))}initialItemLoad(){this._didInitialLoad||this._route.params.pipe(Ce(a=>{let i=a.itemId;if(this._didInitialLoad=!0,!i)return;let n=this.filteredItems.findIndex(D=>D.id===i);if(n>-1)this.showDetails(this.filteredItems[n],n,!0);else if(this.filteredItems.length===0){let D=this.items.findIndex(T=>T.id===i);if(D>-1){let T=this.items[D];this._setGridContent(T)}}}),K(1)).subscribe()}trackById(a,i){return i.id}prefetchItem(a){this._database.fetchDatabaseItem$(a.id).pipe(K(1)).subscribe()}updateTitle(a){let i=this._title.getTitle();i&&this._title.setTitle(`${a} - ${i}`)}_setGridContent(a){let i=this.createComponent(a);document.getElementById("grid")?.appendChild(i.location.nativeElement),this._appRef.attachView(i.hostView),this.selectedItem=a}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=b({type:t,selectors:[["app-database"]],decls:9,vars:5,consts:[[1,"container","mx-auto","pb-6","database-grid","px-2"],[1,"my-3"],[1,"semi-transparent-form-field","my-3"],["matInput","",3,"formControl"],["id","grid",1,"icon-grid"],[1,"prose","lg:prose-xl"],[1,"btn","btn-secondary",3,"click"],[1,"icon-grid-item",3,"selected-icon","itemName"],[4,"ngIf"],[1,"icon-grid-item",3,"mouseenter","click","itemName"]],template:function(i,n){i&1&&(s(0,"div",0),c(1,_n,8,0,"app-card",1),s(2,"mat-form-field",2)(3,"mat-label"),l(4,"Search term"),p(),d(5,"input",3),p(),s(6,"div",4),c(7,Dn,3,1,"ng-container"),P(8,"async"),p()()),i&2&&(r(),u(n.shouldHideImportantNote?-1:1),r(4),m("formControl",n.searchTermControl),r(2),u(H(8,3,n.filteredItems$)?7:-1))},dependencies:[Ae,k,ee,ot,it,Rt,je,Qe,ze,X],encapsulation:2});let e=t;return e})();var In=[{path:"",component:Jt,title:"Database"}],Yt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=W({type:t}),t.\u0275inj=z({imports:[xe.forChild(In),xe]});let e=t;return e})();var Zo=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=W({type:t}),t.\u0275inj=z({imports:[Ge,Yt,ce,rt,Bt,We,et,Mt,Et,wt,Ct,ft,pt,fe]});let e=t;return e})();export{Zo as DatabaseModule};
