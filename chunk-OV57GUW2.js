import{a as gt}from"./chunk-4UC7HF7M.js";import"./chunk-DJJM56ZO.js";import"./chunk-TMIHV575.js";import{a as ft}from"./chunk-PUR2JOSP.js";import{a as ut}from"./chunk-SLK24NOD.js";import{f as dt}from"./chunk-EBYKWSCG.js";import{j as z,k as Y}from"./chunk-SJVXN5NK.js";import{a as _e,b as Je}from"./chunk-TM3XFGT3.js";import{a as be}from"./chunk-5BRV5PHH.js";import{a as ue}from"./chunk-42ES7LCQ.js";import{a as st,b as Q}from"./chunk-W3FLICPM.js";import{$ as H,$d as it,$e as lt,Ad as fe,Ca as d,Cb as O,Ea as q,Ed as Qe,F as Ge,Gb as je,Gd as ze,Ha as s,Ia as _,Id as Ye,J as Be,Ja as C,Jb as Ke,Jd as ge,Ka as h,La as r,Lb as ce,Ld as Se,M as b,Ma as a,Md as A,N as Z,Na as f,Od as Ce,P as L,Pb as le,Pd as Xe,Q as V,Qd as Ze,Ra as $,Rd as he,Re as Ee,Ta as P,Ua as m,Uc as se,Ue as W,V as ee,Vd as R,Ve as rt,Wd as et,Ya as K,Yd as tt,Ye as at,Zb as G,Ze as pt,_e as ct,bf as Te,cb as ne,ce as xe,d as E,db as oe,e as k,eb as U,ee as ve,f as D,fa as He,fb as l,gb as T,hb as y,hd as Ue,he as nt,hf as mt,ib as Ne,je as ye,k as X,kb as re,la as n,lb as ae,ld as Re,mb as pe,n as Me,ob as Oe,oe as ot,pc as me,q as Pe,qb as Ae,qd as de,rb as qe,sb as I,tb as N,td as We,ua as $e,v as Le,va as te,w as Ve,wa as ie,ya as u}from"./chunk-XCZ7SFHP.js";var _t=(()=>{let t=class t{constructor(){this.uiIcons=G,this.isNPCListActive=!1,this.router=H(Ye),this.updateIsNPCListActive(this.router.url),this.router.events.pipe(st(),Le(o=>o instanceof Qe)).subscribe({next:o=>{this.updateIsNPCListActive(o.urlAfterRedirects)}})}updateIsNPCListActive(o){this.isNPCListActive=o.startsWith("/npcs/")&&!o.includes("overview")&&!o.includes("gifting")}};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=b({type:t,selectors:[["app-people"]],decls:7,vars:3,consts:[["routerLink","overview",3,"active","uiIcon"],["routerLink","gifting",3,"uiIcon"],[1,"hidden"]],template:function(p,c){p&1&&(r(0,"app-sidebar-container")(1,"app-module-sidebar")(2,"app-module-sidebar-item",0),l(3,"NPC List "),a(),r(4,"app-module-sidebar-item",1),l(5,"Gifting"),a()(),f(6,"router-outlet",2),a()),p&2&&(n(2),d("active",c.isNPCListActive)("uiIcon",c.uiIcons.NEUTRAL),n(2),d("uiIcon",c.uiIcons.GIFTING))},dependencies:[ze,ge,Ze,Xe,nt],encapsulation:2});let e=t;return e})();var Fe=[{displayName:"Default",value:"default"},{displayName:"Alphabetical",value:"alphabetical"},{displayName:"Birthdate",value:"birthdate"}],Yi=Fe.map(e=>e.value);function Ft(e,t){if(e&1&&(r(0,"mat-option",4),l(1),a()),e&2){let i=t.$implicit;d("value",i.value),n(),T(i.displayName)}}var M=(()=>{let t=class t{constructor(){this.npcSortOptions=Fe,this.searchControl=new de("",{nonNullable:!0}),this.sortControl=new de("default",{nonNullable:!0}),this.sortOrderControl=new de("asc",{nonNullable:!0}),this.searchValueChanges=Q(this.searchControl.valueChanges,{initialValue:""}),this.sortValueChanges=Q(this.sortControl.valueChanges,{initialValue:"default"}),this.sortOrderValueChanges=Q(this.sortOrderControl.valueChanges,{initialValue:"asc"})}};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=b({type:t,selectors:[["app-npc-filter"]],standalone:!0,features:[Oe],decls:11,vars:2,consts:[[1,"mb-5","flex","gap-x-3","gap-y-4","flex-wrap"],[1,"semi-transparent-form-field","grow","lg:grow-0","shrink-0","basis-auto"],["matInput","",3,"formControl"],["disableOptionCentering","",3,"formControl"],[3,"value"]],template:function(p,c){p&1&&(r(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),l(3,"Search term"),a(),f(4,"input",2),a(),r(5,"mat-form-field",1)(6,"mat-label"),l(7,"Sorting"),a(),r(8,"mat-select",3),C(9,Ft,2,2,"mat-option",4,_),a()()()),p&2&&(n(4),d("formControl",c.searchControl),n(4),d("formControl",c.sortControl),n(),h(c.npcSortOptions))},dependencies:[le,xe,ut,it,se,ve,fe,Ue,Re,We],encapsulation:2});let e=t;return e})();var ht=new Map([["Spring",100],["Summer",200],["Fall",300],["Winter",400]]);function we(e,t,i){switch(i){case"alphabetical":e=[...e].sort((o,p)=>{let c="characterName"in o?o.characterName:o.npc?.characterName??"",g="characterName"in p?p.characterName:p.npc?.characterName??"";return c.toLowerCase()==="universal"?1:g.toLowerCase()==="universal"?-1:c.localeCompare(g)});break;case"birthdate":e=[...e].sort((o,p)=>{let c="characterName"in o?o.characterName:o.npc?.characterName??"",g="characterName"in p?p.characterName:p.npc?.characterName??"";if(c.toLowerCase()==="universal")return 1;if(g.toLowerCase()==="universal")return-1;let F="npc"in o?o.npc?.birthday:o.birthday,S="npc"in p?p.npc?.birthday:p.birthday;if(!F&&S)return 1;if(F&&!S)return-1;if(!F&&!S)return 0;F=F,S=S;let x=(ht.get(F.season)??0)+F.day,v=(ht.get(S.season)??0)+S.day;return x-v});break}return t?e.filter(o=>("characterName"in o?o.characterName:o.npc?.characterName??"").toLowerCase().includes(t)):e}function kt(e,t){if(e&1){let i=$();r(0,"app-inline-minimal-item",4),P("click",function(){L(i);let p=m().$implicit,c=m(3);return V(c.itemClicked.emit(p.item))}),a()}if(e&2){let i=m().$implicit;d("minimalItem",i.item)}}function Dt(e,t){if(e&1&&(r(0,"span"),l(1),I(2,"addSpacesToPascalCase"),a()),e&2){let i=m().$implicit;n(),y("All ",N(2,1,i.categoryName),"")}}function Mt(e,t){if(e&1&&u(0,kt,1,1,"app-inline-minimal-item",3)(1,Dt,3,3,"span"),e&2){let i=t.$implicit;s(0,i.type==="item"?0:-1),n(),s(1,i.type==="category"?1:-1)}}function Pt(e,t){if(e&1&&(r(0,"div",0),f(1,"app-ui-icon",1),l(2),a(),r(3,"div",2),C(4,Mt,2,2,null,null,_),a()),e&2){let i=m().$implicit,o=m();n(),d("uiIcon",i.icon),n(),y(" ",i.label," "),n(2),h(o.preferences[i.preferenceField])}}function Lt(e,t){if(e&1&&u(0,Pt,6,2),e&2){let i=t.$implicit,o=m();s(0,o.preferences[i.preferenceField].length?0:-1)}}var Ie=(()=>{let t=class t{constructor(){this.setCssClass=!0,this.itemClicked=new Be,this.preferencesMap=ft}};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=b({type:t,selectors:[["app-gifting-grid"]],hostVars:2,hostBindings:function(p,c){p&2&&q("gifting-preference-grid",c.setCssClass)},inputs:{preferences:"preferences"},outputs:{itemClicked:"itemClicked"},decls:2,vars:0,consts:[[1,"font-semibold","flex","items-center","sm:flex-col","sm:pr-10","mb-1","text-black"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],[1,"gifting-gifts-grid"],["class","cursor-pointer",3,"minimalItem"],[1,"cursor-pointer",3,"minimalItem","click"]],template:function(p,c){p&1&&C(0,Lt,1,1,null,null,_),p&2&&h(c.preferencesMap)},dependencies:[A,ot,tt],styles:[`.gifting-preference-grid{margin-top:.25rem;display:grid;grid-template-columns:repeat(1,minmax(0,1fr));font-size:1.25rem;line-height:1.75rem}@media (min-width: 640px){.gifting-preference-grid{row-gap:.75rem}}.gifting-gifts-grid{margin-top:.25rem;margin-bottom:1rem;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));align-items:center;gap:.5rem}@media (min-width: 640px){.gifting-preference-grid{grid-template-columns:min-content 1fr}.gifting-gifts-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
`],encapsulation:2});let e=t;return e})();function qt(e,t){if(e&1&&f(0,"app-offering",5),e&2){let i=t.$implicit;d("details",i)}}function jt(e,t){if(e&1&&(r(0,"app-item-card-switch",1),u(1,qt,1,1,"ng-template",4),a()),e&2){let i=m();d("item",i.selectedEntity)}}function Kt(e,t){if(e&1&&f(0,"app-ui-icon",18),e&2){let i=m(2).$implicit,o=m(2);K("matTooltip","",i.npc==null?null:i.npc.characterName," is dateable"),d("uiIcon",o.uiIcon.LOVE)}}function Ut(e,t){if(e&1&&(r(0,"div",19),f(1,"app-ui-icon",20),l(2),I(3,"ingameDate"),a()),e&2){let i=m(2).$implicit,o=m(2);n(),d("uiIcon",o.uiIcon.BIRTHDAY),n(),y(" ",N(3,2,i.npc.birthday)," ")}}function Rt(e,t){if(e&1&&(f(0,"app-item-icon",13),r(1,"div",14)(2,"div",15),l(3),u(4,Kt,1,2,"app-ui-icon",16),a(),u(5,Ut,4,4,"div",17),a()),e&2){let i=m().$implicit;d("itemName",i.preferences.npc.iconName),n(3),y(" ",i.preferences.npc.characterName," "),n(),s(4,i.npc!=null&&i.npc.isDateable?4:-1),n(),s(5,i.npc&&i.npc.birthday?5:-1)}}function Wt(e,t){e&1&&l(0," Universal ")}function Qt(e,t){if(e&1){let i=$();r(0,"app-expandable",7,8)(2,"div",9),P("click",function(){L(i);let p=U(1);return V(p.toggle())}),r(3,"div",10),u(4,Rt,6,4)(5,Wt,1,0),a(),f(6,"i",11),a(),r(7,"app-gifting-grid",12),P("itemClicked",function(p){L(i);let c=m(2);return V(c.showDetails(p))}),a()()}if(e&2){let i=t.$implicit,o=U(1);n(4),s(4,i.preferences.npc?4:-1),n(),s(5,i.preferences.mapKey==="ci_universal"?5:-1),n(),q("down",!o.open)("translate-y-[-3px]",o.open)("up",o.open),n(),d("preferences",i.preferences)}}function zt(e,t){if(e&1&&(r(0,"app-card",6),C(1,Qt,8,9,"app-expandable",21,_),a()),e&2){let i=m();n(),h(i.filteredAndSortedNpcs())}}var Et=(()=>{var t,i,o,p,c;let g=class g extends Ee{constructor(){super();k(this,t,void 0);k(this,i,void 0);k(this,o,void 0);k(this,p,void 0);k(this,c,void 0);this.npcFilter=te(M),this.uiIcon=G,D(this,t,O(()=>this.npcFilter()?.searchValueChanges()??"")),D(this,i,O(()=>this.npcFilter()?.sortValueChanges()??"default")),D(this,o,we),D(this,p,$e(void 0)),this.filteredAndSortedNpcs=O(()=>{let x=E(this,p).call(this)??[];if(!E(this,t)||!E(this,i))return x;let v=E(this,t).call(this).toLowerCase(),w=E(this,i).call(this);return E(this,o).call(this,x,v,w)}),D(this,c,H(me)),this.gifting$=Pe({gifts:E(this,c).fetchGiftingPreferences$(),npcs:E(this,c).fetchNPCs$()}).pipe(Ge(({gifts:x,npcs:v})=>{let w=x.map(j=>({preferences:j,npc:v.find(J=>J.key===j.mapKey)}));return E(this,p)?.set(w),X(w)}))}};t=new WeakMap,i=new WeakMap,o=new WeakMap,p=new WeakMap,c=new WeakMap,g.\u0275fac=function(v){return new(v||g)},g.\u0275cmp=b({type:g,selectors:[["app-gifting"]],viewQuery:function(v,w){v&1&&ne(w.npcFilter,M,5),v&2&&oe()},features:[ie],decls:6,vars:5,consts:[[3,"openDrawer","openDrawerChange"],["listDetail","",3,"item"],[1,"px-2","xl:px-[50px]","w-full","pt-2","pb-6","2xl:pt-[60px]"],["class","text-xl gifting-card"],["appDatabaseItemDetails",""],[3,"details"],[1,"text-xl","gifting-card"],["open","",1,"mb-8"],["expandableComponent",""],["expandableHeader","",1,"flex","justify-between","items-center","cursor-pointer",3,"click"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[1,"arrow"],[3,"preferences","itemClicked"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],["class","!text-gifting !h-6 !w-6",3,"uiIcon","matTooltip"],["class","text-lg flex gap-2"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"!h-6","!w-6",3,"uiIcon"],["open","","class","mb-8"]],template:function(v,w){if(v&1&&(r(0,"app-list-detail-container",0),pe("openDrawerChange",function(J){return ae(w.openDrawer,J)||(w.openDrawer=J),J}),u(1,jt,2,1,"app-item-card-switch",1),r(2,"div",2),f(3,"app-npc-filter"),u(4,zt,3,0,"app-card",3),I(5,"async"),a()()),v&2){let j;re("openDrawer",w.openDrawer),n(),s(1,w.selectedEntity?1:-1),n(3),s(4,(j=N(5,3,w.gifting$))?4:-1,j)}},dependencies:[A,Ce,he,ye,Te,R,M,be,z,Y,Ie,Ke,W],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}.gifting-card{max-width:1100px}
`],encapsulation:2});let e=g;return e})();function Jt(e,t){if(e&1&&f(0,"app-ui-icon",15),e&2){let i=m().$implicit,o=m(2);K("matTooltip","",i.characterName," is dateable"),d("uiIcon",o.uiIcon.LOVE)}}function Xt(e,t){if(e&1&&(r(0,"div",16),f(1,"app-ui-icon",17),l(2),I(3,"ingameDate"),a()),e&2){let i=m().$implicit,o=m(2);n(),d("uiIcon",o.uiIcon.BIRTHDAY),n(),y(" ",N(3,2,i.birthday)," ")}}function Zt(e,t){e&1&&(r(0,"div",14),l(1,"unofficial head portrait"),a())}var ei=e=>["..",e],ti=(e,t)=>({"line-clamp-2":e,"line-clamp-1":t});function ii(e,t){if(e&1&&(r(0,"a",4),f(1,"div",5),r(2,"div",6),f(3,"app-npc-head-portrait",7),a(),r(4,"div",8)(5,"div",9)(6,"span",10),l(7),a(),u(8,Jt,1,2,"app-ui-icon",11),a(),u(9,Xt,4,4,"div",12),r(10,"div",13),l(11),a(),u(12,Zt,2,0,"div",14),a()()),e&2){let i=t.$implicit;d("routerLink",Ae(9,ei,i.key)),n(3),d("npcKey",i.key)("portraitName",i.headerPortraitFileName),n(4),T(i.characterName),n(),s(8,i.isDateable?8:-1),n(),s(9,i.birthday?9:-1),n(),d("ngClass",qe(11,ti,!i.customHead,i.customHead)),n(),T(i.description),n(),s(12,i.customHead?12:-1)}}function ni(e,t){e&1&&(r(0,"div",3),C(1,ii,13,14,"a",18,_),a()),e&2&&(n(),h(t))}function oi(e,t){e&1&&f(0,"mat-spinner",19)}var Tt=(()=>{var t,i,o,p,c;let g=class g{constructor(){k(this,t,void 0);k(this,i,void 0);k(this,o,void 0);k(this,p,void 0);k(this,c,void 0);this.uiIcon=G,this.npcFilter=te(M),D(this,t,O(()=>this.npcFilter()?.searchValueChanges()??"")),D(this,i,O(()=>this.npcFilter()?.sortValueChanges()??"default")),D(this,o,we),this.filteredAndSortedNpcs=O(()=>{let S=E(this,p).call(this)??[];if(!E(this,t)||!E(this,i))return S;let x=E(this,t).call(this).toLowerCase(),v=E(this,i).call(this);return E(this,o).call(this,S,x,v)}),D(this,c,H(me)),D(this,p,Q(E(this,c).fetchNPCs$().pipe(Ve(()=>X([])))))}};t=new WeakMap,i=new WeakMap,o=new WeakMap,p=new WeakMap,c=new WeakMap,g.\u0275fac=function(x){return new(x||g)},g.\u0275cmp=b({type:g,selectors:[["app-npc-list"]],viewQuery:function(x,v){x&1&&ne(v.npcFilter,M,5),x&2&&oe()},decls:4,vars:1,consts:[[1,"px-2","xl:px-[50px]","w-full","pt-2","pb-6","2xl:pt-[60px]"],[1,"z-30","relative"],["class","grid npc-list-grid gap-x-4 gap-y-10 "],[1,"grid","npc-list-grid","gap-x-4","gap-y-10"],[1,"flex","bg-[#F5F1E6]","rounded-[30px]","npc-list-entry","group","relative",3,"routerLink"],[1,"frame","absolute","inset-0","rounded-[30px]","z-10","pointer-events-none"],[1,"basis-2/5","aspect-square","bg-[#F1E1CC]","rounded-l-[30px]","group-hover:bg-[#F2DBB7]"],[1,"z-20","flex","h-full","relative","rounded-l-[30px]",3,"npcKey","portraitName"],[1,"basis-3/5","p-2","flex","flex-col"],[1,"inline-flex","gap-2","mt-3","items-center"],[1,"text-black","font-semibold","text-2xl"],["class","!text-gifting !h-6 !w-6",3,"uiIcon","matTooltip"],["class","text-lg flex gap-2 items-center"],[3,"ngClass"],["clasS","mt-auto"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2","items-center"],[1,"!w-5","!h-5",3,"uiIcon"],["class","flex bg-[#F5F1E6] rounded-[30px] npc-list-entry group relative",3,"routerLink"],[1,"mx-auto"]],template:function(x,v){if(x&1&&(r(0,"div",0),f(1,"app-npc-filter",1),u(2,ni,3,0,"div",2)(3,oi,1,0),a()),x&2){let w;n(2),s(2,(w=v.filteredAndSortedNpcs())?2:3,w)}},dependencies:[je,ge,A,pt,R,_e,M,W],styles:[`.npc-list-entry .npc-head-portrait{display:flex;align-items:flex-end}.npc-list-entry .npc-head-portrait img{object-fit:cover;object-position:bottom;border-top-left-radius:30px;border-bottom-left-radius:30px;height:110%;margin-top:-9.0909090909%}.frame{box-shadow:inset 0 0 1px #e4b383;transition:box-shadow .2s ease-out}.npc-list-entry:hover .frame{box-shadow:inset 0 0 1px 10px #e4b383}.npc-list-entry:hover .npc-head-portrait img{height:120%;margin-top:-18.1818181818%}.npc-list-grid{grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}
`],encapsulation:2});let e=g;return e})();function ri(e,t){if(e&1&&(r(0,"div",3),l(1),a()),e&2){let i=t.$implicit;n(),Ne("",i.key," : ",i.value?"Has to be seen":"Has to be unseen"," ")}}function ai(e,t){if(e&1&&(C(0,ri,2,2,"div",5,_),I(2,"keyvalue")),e&2){let i=t.$implicit;h(N(2,0,i))}}function pi(e,t){if(e&1&&(r(0,"div"),l(1,"Other cutscenes requirements: "),C(2,ai,3,2,null,null,_),a()),e&2){let i=m();n(2),h(i.heartEventTrigger.otherCutscenesState)}}function ci(e,t){if(e&1&&(r(0,"div"),l(1,"Only on days: "),r(2,"span",3),l(3),a()()),e&2){let i=m();n(3),T(i.heartEventTrigger.specificDay.join(", "))}}function li(e,t){if(e&1&&(r(0,"div"),l(1,"Only in seasons: "),r(2,"span",3),l(3),a()()),e&2){let i=m();n(3),T(i.heartEventTrigger.specificMonth.join(", "))}}function mi(e,t){if(e&1&&(r(0,"div"),l(1,"Only with weather: "),r(2,"span",3),l(3),a()()),e&2){let i=m();n(3),T(i.heartEventTrigger.specificWeather.join(", "))}}function si(e,t){if(e&1&&f(0,"app-effect",9),e&2){let i=t.$implicit;d("effect",i)}}function di(e,t){if(e&1&&(r(0,"div",6)(1,"span",7),l(2,"Effects when seen"),a(),r(3,"div",8),C(4,si,1,1,"app-effect",9,_),a()()),e&2){let i=m();n(4),h(i.heartEventTrigger.effects)}}function fi(e,t){if(e&1&&l(0),e&2){let i=m(2);y(" Unlock requirements (",i.heartEventTrigger.requirements.type==="And"?"all":"any"," of them): ")}}function ui(e,t){e&1&&l(0," Unlock requirement: ")}function gi(e,t){if(e&1&&f(0,"app-requirements",10),e&2){let i=t.$implicit;d("requirement",i)}}function _i(e,t){if(e&1&&(r(0,"div",6)(1,"span",7),u(2,fi,1,1)(3,ui,1,0),a(),r(4,"div",8),C(5,gi,1,1,"app-requirements",10,_),a()()),e&2){let i=m();n(2),s(2,i.heartEventTrigger.requirements.requirements.length>1?2:-1),n(),s(3,i.heartEventTrigger.requirements.requirements.length<2?3:-1),n(2),h(i.heartEventTrigger.requirements.requirements)}}var bt=(()=>{let t=class t{constructor(){this.heartEventChecklist=H(gt)}toggleHeartEvent(o){o?this.heartEventChecklist.add(this.heartEventTrigger.cutscene):this.heartEventChecklist.remove(this.heartEventTrigger.cutscene)}};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=b({type:t,selectors:[["app-heart-event-trigger"]],inputs:{heartEventTrigger:"heartEventTrigger"},decls:32,vars:18,consts:[[1,"flex","justify-between","text-black","mb-1"],[1,"flex","flex-col"],[3,"checked","change"],[1,"text-black"],["class","my-4"],["class","text-black"],[1,"my-4"],[1,"text-lg","text-black"],[1,"flex","flex-col","text-black"],[3,"effect"],[3,"requirement"]],template:function(p,c){p&1&&(r(0,"header",0)(1,"div",1)(2,"h4"),l(3),a(),r(4,"span"),l(5),a()(),r(6,"mat-checkbox",2),P("change",function(F){return c.toggleHeartEvent(F.checked)}),l(7,"Cutscene seen "),a()(),r(8,"div"),l(9,"Enabled: "),r(10,"span",3),l(11),a()(),r(12,"div"),l(13,"Location: "),r(14,"span",3),l(15),a()(),r(16,"div"),l(17,"Day Time of day: "),r(18,"span",3),l(19),I(20,"ingameTime"),I(21,"ingameTime"),a()(),r(22,"div"),l(23,"Can trigger on the same day: "),r(24,"span",3),l(25),a()(),u(26,pi,4,0,"div")(27,ci,4,1,"div")(28,li,4,1,"div")(29,mi,4,1,"div")(30,di,6,0,"div",4)(31,_i,7,2,"div",4)),p&2&&(n(3),T(c.heartEventTrigger.cutscene),n(2),y("Id: ",c.heartEventTrigger.id," "),n(),d("checked",c.heartEventChecklist.isChecked(c.heartEventTrigger.cutscene)),n(5),T(c.heartEventTrigger.enabled?"Yes":"No"),n(4),T(c.heartEventTrigger.location),n(4),Ne(" ",N(20,14,c.heartEventTrigger.time.fromTime),"-",N(21,16,c.heartEventTrigger.time.toTime),`
`),n(6),T(c.heartEventTrigger.canTriggerSameDay?"Yes":"No"),n(),s(26,c.heartEventTrigger.otherCutscenesState.length?26:-1),n(),s(27,c.heartEventTrigger.specificDay.length?27:-1),n(),s(28,c.heartEventTrigger.specificMonth.length?28:-1),n(),s(29,c.heartEventTrigger.specificWeather.length?29:-1),n(),s(30,c.heartEventTrigger.effects&&c.heartEventTrigger.effects.length?30:-1),n(),s(31,c.heartEventTrigger.requirements&&c.heartEventTrigger.requirements.requirements.length?31:-1))},dependencies:[ct,lt,ue,ce,rt],styles:["[_nghost-%COMP%]{display:block}"]});let e=t;return e})();function hi(e,t){e&1&&f(0,"hr",6)}function xi(e,t){if(e&1&&(f(0,"app-heart-event-trigger",4),u(1,hi,1,0,"hr",5)),e&2){let i=t.$implicit,o=t.$index,p=t.$count;q("mb-3",o===p-1),d("heartEventTrigger",i),n(),s(1,o!==p-1?1:-1)}}function vi(e,t){if(e&1){let i=$();r(0,"app-expandable",0,1)(2,"h3",2),P("click",function(){L(i);let p=U(1);return V(p.toggle())}),l(3),f(4,"i",3),a(),C(5,xi,2,4,null,null,_),a()}if(e&2){let i=t.$implicit,o=U(1);n(3),y(" ",i.heartLevel," hearts event "),n(),q("down",!o.open)("up",o.open),n(),h(i.trigger)}}var wt=(()=>{let t=class t{};t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=b({type:t,selectors:[["app-heart-events"]],inputs:{heartEvents:"heartEvents"},decls:2,vars:0,consts:[[1,"bg-amber-50/70","px-4","rounded-lg","mb-3","shadow-sm"],["expandable",""],["expandableHeader","",1,"text-xl","text-black","flex","items-center","justify-between","cursor-pointer","py-4",3,"click"],[1,"arrow"],[3,"heartEventTrigger"],["class","my-3"],[1,"my-3"],["class","bg-amber-50/70 px-4 rounded-lg mb-3 shadow-sm"]],template:function(p,c){p&1&&C(0,vi,7,5,"app-expandable",7,_),p&2&&h(c.heartEvents)},dependencies:[Te,bt],encapsulation:2});let e=t;return e})();function Ei(e,t){if(e&1&&f(0,"app-offering",4),e&2){let i=t.$implicit;d("details",i)}}function Ti(e,t){if(e&1&&(r(0,"app-item-card-switch",1),u(1,Ei,1,1,"ng-template",3),a()),e&2){let i=m();d("item",i.selectedEntity)}}function bi(e,t){if(e&1&&f(0,"app-ui-icon",18),e&2){let i=m(2);K("matTooltip","",i.npc.characterName," is dateable"),d("uiIcon",i.uiIcon.LOVE)}}function wi(e,t){if(e&1&&(r(0,"div",19),f(1,"app-ui-icon",20),l(2),I(3,"ingameDate"),a()),e&2){let i=m(2);n(),d("uiIcon",i.uiIcon.BIRTHDAY),n(),y(" ",N(3,2,i.npc.birthday)," ")}}function Ii(e,t){if(e&1&&(r(0,"p",21),l(1),a()),e&2){let i=m(2);n(),T(i.npc.description)}}function Ni(e,t){if(e&1){let i=$();r(0,"app-gifting-grid",22),P("itemClicked",function(p){L(i);let c=m(2);return V(c.showDetails(p))}),a()}if(e&2){let i=m(2);d("preferences",i.giftingPreferences)}}function Si(e,t){if(e&1&&(r(0,"p",23),l(1),a()),e&2){let i=m(2);n(),y(" ",i.npc.characterName," has no specialized preferences. ")}}function Fi(e,t){if(e&1&&f(0,"app-heart-events",17),e&2){let i=m(2);d("heartEvents",i.heartEvents)}}function ki(e,t){if(e&1&&(r(0,"p",23),l(1),a()),e&2){let i=m(2);n(),y(" ",i.npc.characterName," has no heart events. ")}}function Di(e,t){if(e&1&&(r(0,"div",27),f(1,"app-npc-portrait",28),r(2,"span",29),l(3),a()()),e&2){let i=t.$implicit,o=m(5);n(),d("npcKey",o.npc.key)("portraitName",i.value),n(2),T(i.key)}}function Mi(e,t){if(e&1&&(r(0,"div",24)(1,"h3",25),l(2),a(),r(3,"div",26),C(4,Di,4,3,"div",30,_),I(6,"keyvalue"),a()()),e&2){let i=t.$implicit;n(2),T(i.key),n(2),h(N(6,1,i.value))}}function Pi(e,t){if(e&1&&C(0,Mi,7,3,"div",31,_),e&2){let i=m();h(i)}}function Li(e,t){if(e&1&&(r(0,"p",23),l(1),a()),e&2){let i=m(3);n(),y(" ",i.npc.characterName," has no appearances. ")}}function Vi(e,t){e&1&&u(0,Pi,2,0)(1,Li,2,1,"p",16),e&2&&(s(0,t.length?0:-1),n(),s(1,t.length?-1:1))}function Gi(e,t){if(e&1&&(r(0,"div",5)(1,"app-card")(2,"div",6),f(3,"app-item-icon",7),r(4,"div",8)(5,"div",9),l(6),u(7,bi,1,2,"app-ui-icon",10),a(),u(8,wi,4,4,"div",11),a()(),u(9,Ii,2,1,"p",12),a(),r(10,"app-card",13)(11,"h2",14),l(12," Gifting "),a(),u(13,Ni,1,1,"app-gifting-grid",15)(14,Si,2,1,"p",16),a(),r(15,"app-card",13)(16,"h2",14),l(17," Heart events "),a(),u(18,Fi,1,1,"app-heart-events",17)(19,ki,2,1,"p",16),a(),r(20,"app-card",13)(21,"h2",14),l(22," Appearances "),a(),u(23,Vi,2,2),I(24,"keyvalue"),a()()),e&2){let i=m(),o;n(3),d("itemName",i.npc.iconName),n(3),y(" ",i.npc.characterName," "),n(),s(7,i.npc.isDateable?7:-1),n(),s(8,i.npc.birthday?8:-1),n(),s(9,i.npc.description?9:-1),n(4),s(13,i.giftingPreferences?13:-1),n(),s(14,i.giftingPreferences?-1:14),n(4),s(18,i.heartEvents.length?18:-1),n(),s(19,i.heartEvents.length?-1:19),n(4),s(23,(o=N(24,10,i.npc.appearances))?23:-1,o)}}function Bi(e,t){e&1&&(r(0,"app-card",5)(1,"h1",32),l(2," NPC not found. "),a()())}function Hi(e,t){e&1&&f(0,"mat-spinner",33)}var It=(()=>{let t=class t extends Ee{constructor(){super(...arguments),this.npc=null,this.heartEvents=[],this.UiIcon=G,this.uiIcon=G}ngOnInit(){Me([this._database.fetchNPCs$(),this._database.fetchHeartEvents$(),this._database.fetchGiftingPreferences$()]).subscribe({next:([o,p,c])=>{this.npc=o.find(g=>g.key.toLowerCase()===this.npcKey.toLowerCase()),this.heartEvents=p[this.npcKey.toLowerCase()]??[],this.giftingPreferences=c.find(g=>g.mapKey.toLowerCase()===this.npc?.key.toLowerCase())}})}};t.\u0275fac=(()=>{let o;return function(c){return(o||(o=He(t)))(c||t)}})(),t.\u0275cmp=b({type:t,selectors:[["app-npc"]],inputs:{npcKey:"npcKey"},features:[ie],decls:5,vars:3,consts:[[3,"openDrawer","openDrawerChange"],["listDetail","",3,"item"],["class","npc-wrapper"],["appDatabaseItemDetails",""],[3,"details"],[1,"npc-wrapper"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],["class","!text-gifting !h-6 !w-6",3,"uiIcon","matTooltip"],["class","text-lg flex gap-2"],["class","mt-2"],[1,"mt-6"],[1,"mb-4","font-semibold","text-2xl","text-black"],[3,"preferences"],["class","text-black text-lg"],[3,"heartEvents"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"!h-6","!w-6",3,"uiIcon"],[1,"mt-2"],[3,"preferences","itemClicked"],[1,"text-black","text-lg"],[1,"font-semibold","text-black","mb-6"],[1,"text-xl"],[1,"grid","portrait-grid","gap-4"],[1,"flex","flex-col","shadow-lg","p-2"],[1,"h-[400px]","flex","items-end","justify-center",3,"npcKey","portraitName"],[1,""],["class","flex flex-col shadow-lg p-2"],["class","font-semibold text-black mb-6"],[1,"mb-4","font-semibold","text-3xl","text-black","flex","items-center","gap-x-4"],[1,"mx-auto"]],template:function(p,c){p&1&&(r(0,"app-list-detail-container",0),pe("openDrawerChange",function(F){return ae(c.openDrawer,F)||(c.openDrawer=F),F}),u(1,Ti,2,1,"app-item-card-switch",1)(2,Gi,25,12,"div",2)(3,Bi,3,0)(4,Hi,1,0),a()),p&2&&(re("openDrawer",c.openDrawer),n(),s(1,c.selectedEntity?1:-1),n(),s(2,c.npc?2:c.npc===void 0?3:c.npc===null?4:-1))},dependencies:[A,Ce,he,ye,at,R,_e,be,z,Y,wt,Ie,ce,W],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.portrait-grid .npc-portrait img{max-height:400px}@media (min-width: 1280px){.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}.npc-wrapper{max-width:1160px;margin:8px}@media (min-width: 1536px){.npc-wrapper{margin:60px 40px 60px 60px}}
`],encapsulation:2});let e=t;return e})();var $i=[{path:"",pathMatch:"full",redirectTo:"overview"},{path:"",component:_t,children:[{path:"gifting",component:Et,title:"Gifting - NPCs"},{path:"overview",component:Tt,title:"Overview - NPCs"},{path:":npcKey",component:It}]}],Nt=(()=>{let t=class t{};t.\u0275fac=function(p){return new(p||t)},t.\u0275mod=Z({type:t}),t.\u0275inj=ee({imports:[Se.forChild($i),Se]});let e=t;return e})();var Oo=(()=>{let t=class t{};t.\u0275fac=function(p){return new(p||t)},t.\u0275mod=Z({type:t}),t.\u0275inj=ee({imports:[le,Nt,mt,et,Je,xe,fe,se,ve,ue,M,dt,z,Y]});let e=t;return e})();export{Oo as NPCsModule};
