import{a as g,b as u,d as p}from"./chunk-FJWSANLQ.js";import{Db as h,Fa as m,Ka as S,_ as s,ea as r,fa as l,o as a,p as c,sd as f}from"./chunk-J7WD3OMO.js";import{a as o,b as n}from"./chunk-4CLCTAJ7.js";var v=(()=>{class e{#t=f(r(S));getItem(t){return this.#t?localStorage.getItem(t):null}setItem(t,i){this.#t&&localStorage.setItem(t,i)}removeItem(t){this.#t&&localStorage.removeItem(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var T=(()=>{class e{constructor(){this.localStorage=r(v),this.CURRENT_SETTINGS_VERSION=1,this.SETTINGS_STORAGE_KEY="coral-guide-settings",this.DEFAULT_SETTINGS={version:this.CURRENT_SETTINGS_VERSION,useBeta:!1,language:"en"}}saveSettings(t){let i=o(o({},this.DEFAULT_SETTINGS),t);this.localStorage.setItem(this.SETTINGS_STORAGE_KEY,JSON.stringify(i)),this._settings=i}getSettings(){let t=this.localStorage.getItem(this.SETTINGS_STORAGE_KEY);if(!t)this.saveSettings(this.DEFAULT_SETTINGS);else if(!this._settings){let i=JSON.parse(t);this._settings=this._migrate(i)}return this._settings}_migrate(t){if(!t.version){let i=n(o({},this.DEFAULT_SETTINGS),{useBeta:!!t.useBeta});return this.saveSettings(i),i}return t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var N=(()=>{class e{constructor(){this.value=m(""),this.#t=r(g),this.#e=r(T).getSettings().useBeta?"beta":"live"}#t;#e;value$(){let t=this.#t;return a(t.get(`assets/${this.#e}/version.json?t=${new Date().toISOString()}`).pipe(c(i=>(this.value.set(i.version),i.version))))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),U=()=>l([u(p()),h(()=>(E=>()=>E.value$())(r(N))())]);export{v as a,T as b,N as c,U as d};
