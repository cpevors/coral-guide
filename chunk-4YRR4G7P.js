import{a as oe}from"./chunk-4FVH665O.js";import{a as ne}from"./chunk-ROBS5SQF.js";import{a as te,b as ie}from"./chunk-SBTZUPCH.js";import"./chunk-XK52KKFL.js";import"./chunk-3RCH7TOZ.js";import"./chunk-WIAGADDS.js";import{a as U}from"./chunk-QMME4LCE.js";import"./chunk-5BCV2XAA.js";import"./chunk-HWCJOYN3.js";import"./chunk-4BGRGWBP.js";import"./chunk-5T6JT7FG.js";import"./chunk-RHRTBMBA.js";import"./chunk-DYAATRFR.js";import"./chunk-GLL3PL4Q.js";import"./chunk-QEWZLHID.js";import"./chunk-PD5FG3A7.js";import{a as X}from"./chunk-PRWEW5VH.js";import"./chunk-7JQJEV7G.js";import"./chunk-2K3GEZZY.js";import"./chunk-7A5ZJ3YN.js";import{a as Y}from"./chunk-2A7PSW7O.js";import{a as H,c as J}from"./chunk-5NO5LL4W.js";import"./chunk-VO65IASJ.js";import{b as Q}from"./chunk-PIL2IJC4.js";import{a as W}from"./chunk-OOBQPUIX.js";import"./chunk-OM3WRHFD.js";import{b as ee}from"./chunk-VYOS5CGL.js";import"./chunk-DKARO4CX.js";import{g as L,h as M,j as V,l as j,q as R,r as z,w as K}from"./chunk-DHAI4KFY.js";import"./chunk-5MLMU7SK.js";import"./chunk-GEWE6M22.js";import{g as q}from"./chunk-SJRCRC22.js";import"./chunk-X3TMHFY3.js";import"./chunk-EE6A4D3O.js";import"./chunk-2CFRUPNI.js";import"./chunk-F6RS7OIB.js";import"./chunk-KW5235UB.js";import"./chunk-7JOAVXDE.js";import"./chunk-7SDYZQX7.js";import{b as G}from"./chunk-KUYOE2KN.js";import"./chunk-AJOFB37Q.js";import{$b as F,Ea as E,Gc as _,Hc as h,Ib as m,Kb as b,Ob as f,Qb as u,Rb as C,Sb as g,Tb as l,Ub as c,Vb as x,Zb as I,_ as O,ac as s,db as r,dc as B,ea as v,ec as p,ld as A,ma as y,na as k,p as w,rc as T,sb as D,sc as N,tc as P,wb as Z,wd as $,yb as d}from"./chunk-GYX7HZX3.js";import"./chunk-4CLCTAJ7.js";var re=(()=>{class t extends ne{constructor(){super("orchestra-zones")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function se(t,a){if(t&1&&x(0,"app-offering",3),t&2){let e=a.$implicit;m("details",e)}}function me(t,a){if(t&1&&(l(0,"app-item-card-switch",0),d(1,se,1,1,"ng-template",2),c()),t&2){let e=s();m("item",e.selectedEntity)}}function pe(t,a){if(t&1){let e=I();l(0,"div",13),_(1,"entityKey"),l(2,"app-item-icon",14),F("click",function(){y(e);let n=s().$implicit,o=s(5);return k(o.showDetails(n))}),c(),l(3,"label",15),x(4,"mat-checkbox",16),c()()}if(t&2){let e,i=a,n=s().$implicit,o=s(5);b("checklist-checked",(e=o.checklistForm.get(i))==null?null:e.value)("selected-icon",o.selectedEntity&&h(1,14,o.selectedEntity)===i),r(2),m("amount",n.amount)("itemName",n.item.iconName)("quality",n.quality),r(),p("for","entry-",i,"-input"),r(),p("id","entry-",i,""),p("name","entry-",i,""),m("formControlName",i)}}function de(t,a){if(t&1&&(d(0,pe,5,16,"div",12),_(1,"entityKey")),t&2){let e,i=a.$implicit;f((e=h(1,1,i.item))?0:-1,e)}}function fe(t,a){if(t&1&&(l(0,"div",7)(1,"div",8),x(2,"img",9),l(3,"div",10)(4,"div"),T(5),c(),l(6,"div"),T(7),c()()(),l(8,"div",11),C(9,de,2,3,null,null,u),c()()),t&2){let e=a.$implicit,i=s(4);r(),b("bg-merino-300",(i.activeOffering==null?null:i.activeOffering.title)===e.title),r(),p("alt","",e.title," offering icon"),p("ngSrc","",i.bundleAssetPath()+e.imageName,".webp"),r(3),N(e.title),r(2),P(" ",e.numOfItemRequired===-1?"All":e.numOfItemRequired," required: "),r(2),g(e.requiredItems)}}function _e(t,a){if(t&1&&(l(0,"div",6),C(1,fe,11,8,"div",7,u),c()),t&2){let e=s().$implicit;r(),g(e.offerings)}}function he(t,a){if(t&1&&(l(0,"mat-tab",5),_(1,"addSpacesToPascalCase"),d(2,_e,3,0,"div",6),c()),t&2){let e=a.$implicit,i=s(2);B("label",h(1,2,e.offeringGroupTitle)),r(2),f(i.showTable?-1:2)}}function ue(t,a){if(t&1){let e=I();l(0,"mat-tab-group",4),F("selectedTabChange",function(n){y(e);let o=s();return k(o.updateUrl(n))}),C(1,he,3,4,"mat-tab",5,u),c()}if(t&2){let e=s();m("formGroup",e.checklistForm)("selectedIndex",e.selectedTabIndex()),r(),g(a)}}var qe=(()=>{class t extends X{constructor(){super(),this.checklistService=v(re),this.checklistForm=new V({}),this.useBeta=v(G).getSettings().useBeta,this.bundleAssetPath=E(`assets/${this.useBeta?"beta":"live"}/items/icons/`),this._altars=[],this.urlPathFromLabel=e=>{let i=e.toLowerCase().replaceAll(" ",""),n=this._altars.find(o=>o.offeringGroupTitle.toLowerCase().replaceAll(" ","")===i);return n?n.urlPath:e.toLowerCase().replaceAll(" ","")},this.checklistForm.valueChanges.pipe(W()).subscribe({next:e=>{let i=[];Object.keys(e).forEach(n=>{e[n]&&i.push(n)}),this.checklistService.set(i)}}),this.offerings$=this._database.fetchOfferings$().pipe(w(e=>{let i=e.filter(o=>o.offeringType==="Diving"),n=i.map(o=>o.urlPath);return this._altars=i,i.forEach(o=>{o.offerings.forEach(ae=>{ae.requiredItems.forEach(le=>{let S=q(le.item);this.checklistForm.addControl(S,new j(this.checklistService.isChecked(S),{nonNullable:!0}),{emitEvent:!1})})})}),this.activateTabFromRoute(n),i}))}showDetails(e){this.entryForToDo=e,e&&"amount"in e?super.showDetails(e.item):super.showDetails(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=D({type:t,selectors:[["app-orchestra-zones-checklist"]],features:[Z],decls:4,vars:4,consts:[["listDetail","","context","offerings",3,"item"],[3,"formGroup","selectedIndex"],["appDatabaseItemDetails",""],[3,"details"],[3,"selectedTabChange","formGroup","selectedIndex"],[3,"label"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"flex","flex-col","gap-y-2"],[1,"rounded-lg","bg-merino","flex","items-center","gap-4","p-4"],["height","64","width","64",3,"alt","ngSrc"],[1,"flex","flex-col","text-lg","font-semibold"],[1,"icon-grid","w-full"],[1,"icon-grid-item","checklist-item","flex","flex-col",3,"checklist-checked","selected-icon"],[1,"icon-grid-item","checklist-item","flex","flex-col"],[3,"click","amount","itemName","quality"],[1,"text-white","flex","justify-center",3,"for"],[1,"flex",3,"formControlName","id","name"]],template:function(i,n){if(i&1&&(l(0,"app-list-detail-container"),d(1,me,2,1,"app-item-card-switch",0)(2,ue,3,2,"mat-tab-group",1),_(3,"async"),c()),i&2){let o;r(),f(n.selectedEntity?1:-1),r(),f((o=h(3,2,n.offerings$))?2:-1,o)}},dependencies:[H,Y,K,L,M,R,z,J,ie,te,Q,oe,ee,U,$,A],encapsulation:2})}}return t})();export{qe as OrchestraZonesChecklistComponent};
