"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[951],{4986:(p,g,l)=>{l.d(g,{k:()=>r});var r=function(c){return c.OFFERINGS="offerings",c.JOURNAL_FISH="journal_fish",c.JOURNAL_CRITTER="journal_critter",c.JOURNAL_INSECTS="journal_insects",c.JOURNAL_GEMS="journal_gems",c.JOURNAL_FOSSILS="journal_fossils",c.JOURNAL_ARTIFACTS="journal_artifacts",c.COOKING_RECIPES="cooking_recipes",c}(r||{})},4371:(p,g,l)=>{l.d(g,{x:()=>k});var r=l(4986),c=l(8337),o=l(8645),e=l(5879),f=l(1063);let k=(()=>{var u;class d{constructor(s){this._settings=s,this.clearTimeout=3e3,this._completedCategory$=new o.x,this.currentChecklistIndex=0,this._checklists=[],this._markedAsCompleted=new c.Ov(!0,[]),this.versionSuffix=this._settings.getSettings().useBeta?"_beta":"_live",this.read(),this._markedAsCompleted.compareWith=(t,n)=>t.category===n.category&&t.item.id===n.item.id}get currentChecklistAmount(){const s=this.getCurrentChecklist();return s.offerings.length+s.journal.critter.length+s.journal.insects.length+s.journal.fish.length+s.journal.artifacts.length+s.journal.gems.length+s.journal.fossils.length+s.cookingRecipes.length+s.uncategorized.length}get currentIsEmpty(){return 0===this.currentChecklistAmount}add(s,t){this.getCategoryList(s).push(t),this.save()}getCurrentChecklist(){let s=this._checklists[this.currentChecklistIndex];return s||(this.currentChecklistIndex=0,s=this._checklists[this.currentChecklistIndex]),s||(this._checklists.push(this._createEmptyChecklist()),s=this._checklists[this.currentChecklistIndex]),s}save(){localStorage.setItem(d._CHECKLIST_STORE_KEY+this.versionSuffix,JSON.stringify(this._checklists))}read(){const s=localStorage.getItem(d._CHECKLIST_STORE_KEY+this.versionSuffix);s?this._checklists=JSON.parse(s):(this._checklists.push(this._createEmptyChecklist()),this.save())}updateStatus(s,t,n,i=!1){const h={category:s,item:t};n?this._markedAsCompleted.select(h):this._markedAsCompleted.deselect(h),i?this._completeEntries():this._resetClearTimer()}resetLiveChecklist(){localStorage.setItem(d._CHECKLIST_STORE_KEY+"_live",JSON.stringify([this._createEmptyChecklist()])),this.read()}resetBetaChecklist(){localStorage.setItem(d._CHECKLIST_STORE_KEY+"_beta",JSON.stringify([this._createEmptyChecklist()])),this.read()}alreadyInList(s,t){const n=this.getCategoryList(s);if(0===n.length)return!1;const i="item"in t?t.item.id:t.id;return"item"in n[0]?!!n.find(h=>h.item.id===i):!!n.find(h=>h.id===i)}getCategoryList(s){switch(s){case r.k.OFFERINGS:return this.getCurrentChecklist().offerings;case r.k.COOKING_RECIPES:return this.getCurrentChecklist().cookingRecipes;case r.k.JOURNAL_CRITTER:return this.getCurrentChecklist().journal.critter;case r.k.JOURNAL_INSECTS:return this.getCurrentChecklist().journal.insects;case r.k.JOURNAL_ARTIFACTS:return this.getCurrentChecklist().journal.artifacts;case r.k.JOURNAL_FOSSILS:return this.getCurrentChecklist().journal.fossils;case r.k.JOURNAL_GEMS:return this.getCurrentChecklist().journal.gems;case r.k.JOURNAL_FISH:return this.getCurrentChecklist().journal.fish;default:return this.getCurrentChecklist().uncategorized}}categoryCompleted$(){return this._completedCategory$.asObservable()}completeCategory(s){this._completedCategory$.next(s)}_resetClearTimer(){clearTimeout(this.clearTimer),this.clearTimer=setTimeout(()=>{this._completeEntries()},this.clearTimeout)}_createEmptyChecklist(){return{version:d._CURRENT_CHECKLIST_VERSION,offerings:[],cookingRecipes:[],journal:{critter:[],fish:[],gems:[],artifacts:[],fossils:[],insects:[]},uncategorized:[]}}_completeEntries(){const s=this._markedAsCompleted.selected;this._markedAsCompleted.clear();let t=-1;s.forEach(n=>{switch(n.category){case r.k.OFFERINGS:t=this.getCurrentChecklist().offerings.findIndex(i=>i.item.id===n.item.id),t>=0&&this.getCurrentChecklist().offerings.splice(t,1);break;case r.k.JOURNAL_CRITTER:t=this.getCurrentChecklist().journal.critter.findIndex(i=>i.item.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.critter.splice(t,1);break;case r.k.JOURNAL_FISH:t=this.getCurrentChecklist().journal.fish.findIndex(i=>i.item.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.fish.splice(t,1);break;case r.k.JOURNAL_INSECTS:t=this.getCurrentChecklist().journal.insects.findIndex(i=>i.item.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.insects.splice(t,1);break;case r.k.JOURNAL_GEMS:t=this.getCurrentChecklist().journal.gems.findIndex(i=>i.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.gems.splice(t,1);break;case r.k.JOURNAL_FOSSILS:t=this.getCurrentChecklist().journal.fossils.findIndex(i=>i.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.fossils.splice(t,1);break;case r.k.JOURNAL_ARTIFACTS:t=this.getCurrentChecklist().journal.artifacts.findIndex(i=>i.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.artifacts.splice(t,1);break;case r.k.COOKING_RECIPES:t=this.getCurrentChecklist().cookingRecipes.findIndex(i=>i.item.id===n.item.id),t>=0&&this.getCurrentChecklist().cookingRecipes.splice(t,1)}}),this.save()}}return(u=d)._CURRENT_CHECKLIST_VERSION=1,u._CHECKLIST_STORE_KEY="checklist",u.\u0275fac=function(s){return new(s||u)(e.LFG(f.g))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),d})()},2951:(p,g,l)=>{l.r(g),l.d(g,{SettingsModule:()=>n});var r=l(6814),c=l(5612),o=l(95),e=l(5879),f=l(1063),k=l(4371),u=l(4984);function d(i,h){1&i&&(e.TgZ(0,"p",18),e._uU(1,"Changes that require a reload were made. Saving will reload automatically."),e.qZA())}let S=(()=>{var i;class h{constructor(a,C){this._settingsService=a,this._checkList=C,this.reloadRequired=!1,this.settingsForm=new o.cw({useBeta:new o.NI(!1,{nonNullable:!0}),resetLiveChecklist:new o.NI(!1,{nonNullable:!0}),resetBetaChecklist:new o.NI(!1,{nonNullable:!0})});const _=this._settingsService.getSettings();this.settingsForm.patchValue(_),this.settingsForm.valueChanges.subscribe({next:v=>{this.reloadRequired=_.useBeta!==v.useBeta}})}saveSettings(){const a={...this.settingsForm.value};a.resetLiveChecklist&&this._checkList.resetLiveChecklist(),a.resetBetaChecklist&&this._checkList.resetBetaChecklist(),delete a.resetBetaChecklist,delete a.resetLiveChecklist,this._settingsService.saveSettings(a),this.reloadRequired&&location.reload()}}return(i=h).\u0275fac=function(a){return new(a||i)(e.Y36(f.g),e.Y36(k.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-settings"]],decls:44,vars:2,consts:[[1,"text-black","container","block","mx-auto","my-10"],[3,"formGroup","click"],[1,"grid","md:grid-cols-3","pb-12","gap-y-10","gap-x-8","border-b","border-accent/50","mb-8"],[1,"leading-7","font-bold","text-lg"],[1,"bg-amber-50/70","md:col-span-2","px-4","py-6","sm:p-8","sm:rounded-lg"],[1,"flex","gap-x-3"],[1,"flex","h-6","items-center"],["formControlName","useBeta","id","useBeta","name","useBeta","type","checkbox"],["for","useBeta",1,"font-bold","leading-6"],[1,"leading-6"],[1,"bg-amber-50/70","md:col-span-2","px-4","py-6","sm:p-8","sm:rounded-lg","flex","flex-col","gap-6"],["formControlName","resetLiveChecklist","id","resetLiveChecklist","name","resetLiveChecklist","type","checkbox"],["for","resetLiveChecklist",1,"font-bold","leading-6"],["formControlName","resetBetaChecklist","id","resetBetaChecklist","name","resetBetaChecklist","type","checkbox"],["for","resetBetaChecklist",1,"font-bold","leading-6"],[1,"mt-6","sm:mt-8","flex","justify-between","items-center"],["class","font-bold",4,"ngIf"],["type","submit",1,"btn-amber","ml-auto"],[1,"font-bold"]],template:function(a,C){1&a&&(e.TgZ(0,"app-card",0)(1,"form",1),e.NdJ("click",function(){return C.saveSettings()}),e.TgZ(2,"div",2)(3,"div")(4,"h3",3),e._uU(5,"Beta data"),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Options for latest beta build. Current beta data: Merfolk Update 2023 "),e.qZA()(),e.TgZ(8,"div",4)(9,"div",5)(10,"div",6),e._UZ(11,"input",7),e.qZA(),e.TgZ(12,"div")(13,"label",8),e._uU(14,"Use beta data"),e.qZA(),e.TgZ(15,"p",9),e._uU(16,"Switches app data to beta data. Change requires reload."),e.qZA()()()()(),e.TgZ(17,"div",2)(18,"div")(19,"h3",3),e._uU(20,"Checklists"),e.qZA(),e.TgZ(21,"p"),e._uU(22,"Options for checklists. Reset your checklist data if they behave in unwanted behavior and set defaults for viewing. "),e.qZA()(),e.TgZ(23,"div",10)(24,"div",5)(25,"div",6),e._UZ(26,"input",11),e.qZA(),e.TgZ(27,"div")(28,"label",12),e._uU(29,"Reset live checklists"),e.qZA(),e.TgZ(30,"p",9),e._uU(31,"Reset all checklists which were created while using live data."),e.qZA()()(),e.TgZ(32,"div",5)(33,"div",6),e._UZ(34,"input",13),e.qZA(),e.TgZ(35,"div")(36,"label",14),e._uU(37,"Reset beta checklists"),e.qZA(),e.TgZ(38,"p",9),e._uU(39,"Reset all checklists which were created while using beta data."),e.qZA()()()()(),e.TgZ(40,"div",15),e.YNc(41,d,2,0,"p",16),e.TgZ(42,"button",17),e._uU(43,"Save"),e.qZA()()()()),2&a&&(e.xp6(1),e.Q6J("formGroup",C.settingsForm),e.xp6(40),e.Q6J("ngIf",C.reloadRequired))},dependencies:[r.O5,u.A,o._Y,o.Wl,o.JJ,o.JL,o.sg,o.u],encapsulation:2}),h})();var s=l(4709);const t=[{path:"",component:S}];let n=(()=>{var i;class h{}return(i=h).\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[r.ez,c.Bz.forChild(t),s.m,o.UX]}),h})()}}]);