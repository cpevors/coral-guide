import{a as x,b as G}from"./chunk-6OJSOW6F.js";import"./chunk-DJJM56ZO.js";import{a as O}from"./chunk-VSL7YAPH.js";import"./chunk-24FAZNX7.js";import{c as Q}from"./chunk-FKRWSLGD.js";import"./chunk-5YOBLJC2.js";import{b as U}from"./chunk-O3BKA2PM.js";import{a as R}from"./chunk-U7G2FOHA.js";import"./chunk-NXARORLY.js";import"./chunk-BO7LODCH.js";import"./chunk-VA7RNGDO.js";import"./chunk-IIRYQ5NI.js";import"./chunk-HU7WFQWJ.js";import{b as A}from"./chunk-JCTEBOW5.js";import"./chunk-SJRCRC22.js";import"./chunk-YRO5LM32.js";import{a as $}from"./chunk-TIIEJEUC.js";import{h as j}from"./chunk-PS3FMX3M.js";import{b as K}from"./chunk-7JOAVXDE.js";import"./chunk-KLZCJ54W.js";import{b as M,c as q}from"./chunk-PYPF6S35.js";import"./chunk-FJWSANLQ.js";import{Ba as C,C as b,Fc as P,Gc as k,Hc as H,Ic as z,Jb as c,Pb as d,Rb as F,Sb as I,Tb as w,Ub as p,Vb as r,Vc as v,Wb as s,bb as N,bc as u,db as n,ea as l,fc as E,hd as B,ic as L,k as y,lb as S,oc as T,pc as D,sb as h,sc as f,tc as g,uc as V,zb as m}from"./chunk-J7WD3OMO.js";import"./chunk-4CLCTAJ7.js";var Y=(()=>{class t{constructor(){this.portraitName=C.required(),this.npcKey=C.required(),this.environment=l(M).getSettings().useBeta?"beta":"live",this.version=l(q).value()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-npc-head-portrait"]],hostAttrs:[1,"npc-head-portrait"],inputs:{portraitName:[1,"portraitName"],npcKey:[1,"npcKey"]},decls:1,vars:5,consts:[["alt","","loading","lazy","onerror","this.onerror=null;this.src='assets/ui/images/no-head-portrait.webp'",3,"src"]],template:function(i,o){i&1&&s(0,"img",0),i&2&&L("src","assets/",o.environment,"/head-portraits/",o.npcKey(),"/",o.portraitName(),".webp?v=",o.version,"",N)},encapsulation:2})}}return t})();var W=t=>["..",t],X=(t,a)=>({"line-clamp-2":t,"line-clamp-1":a});function Z(t,a){if(t&1&&s(0,"app-ui-icon",11),t&2){let e=u().$implicit,i=u(2);E("matTooltip","",e.characterName," is dateable"),c("uiIcon",i.uiIcon.LOVE)}}function tt(t,a){if(t&1&&(p(0,"div",12),s(1,"app-ui-icon",15),f(2),H(3,"ingameDate"),r()),t&2){let e=u().$implicit,i=u(2);n(),c("uiIcon",i.uiIcon.BIRTHDAY),n(),V(" ",z(3,2,e.birthday)," ")}}function et(t,a){t&1&&(p(0,"div",14),f(1,"unofficial head portrait"),r())}function it(t,a){if(t&1&&(p(0,"a",4),s(1,"div",5),p(2,"div",6),s(3,"app-npc-head-portrait",7),r(),p(4,"div",8)(5,"div",9)(6,"span",10),f(7),r(),m(8,Z,1,3,"app-ui-icon",11),r(),m(9,tt,4,4,"div",12),p(10,"div",13),f(11),r(),m(12,et,2,0,"div",14),r()()),t&2){let e=a.$implicit;c("routerLink",P(9,W,e.key)),n(3),c("npcKey",e.key)("portraitName",e.headerPortraitFileName),n(4),g(e.characterName),n(),d(e.isDateable?8:-1),n(),d(e.birthday?9:-1),n(),c("ngClass",k(11,X,!e.customHead,e.customHead)),n(),g(e.description),n(),d(e.customHead?12:-1)}}function nt(t,a){t&1&&(p(0,"div",2),I(1,it,13,14,"a",4,F),r()),t&2&&(n(),w(a))}function ot(t,a){t&1&&s(0,"mat-spinner",3)}var wt=(()=>{class t{#t;#e;#i;#n;#o;constructor(){this.npcFilter=S(x),this.uiIcon=K,this.#t=v(()=>this.npcFilter()?.searchValueChanges()??""),this.#e=v(()=>this.npcFilter()?.sortValueChanges()??"default"),this.#i=G,this.filteredAndSortedNpcs=v(()=>{let e=this.#n()??[];if(!this.#t||!this.#e)return e;let i=this.#t().toLowerCase(),o=this.#e();return this.#i(e,i,o)}),this.#o=l(A),this.#n=U(this.#o.fetchNPCs$().pipe(b(()=>y([]))))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-npc-list"]],viewQuery:function(i,o){i&1&&T(o.npcFilter,x,5),i&2&&D()},decls:4,vars:1,consts:[[1,"px-main-hz","py-main-vt"],[1,"z-30","relative"],[1,"grid","npc-list-grid","gap-x-4","gap-y-10"],[1,"mx-auto","text-white"],[1,"flex","bg-[#F5F1E6]","rounded-[30px]","npc-list-entry","group","relative",3,"routerLink"],[1,"frame","absolute","inset-0","rounded-[30px]","z-10","pointer-events-none"],[1,"basis-2/5","aspect-square","bg-[#F1E1CC]","rounded-l-[30px]","group-hover:bg-[#F2DBB7]"],[1,"z-20","flex","h-full","relative","rounded-l-[30px]",3,"npcKey","portraitName"],[1,"basis-3/5","p-2","flex","flex-col"],[1,"inline-flex","gap-2","mt-3","items-center"],[1,"text-black","font-semibold","text-2xl"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2","items-center"],[3,"ngClass"],["clasS","mt-auto"],[1,"!w-5","!h-5",3,"uiIcon"]],template:function(i,o){if(i&1&&(p(0,"div",0),s(1,"app-npc-filter",1),m(2,nt,3,0,"div",2)(3,ot,1,0,"mat-spinner",3),r()),i&2){let _;n(2),d((_=o.filteredAndSortedNpcs())?2:3,_)}},dependencies:[j,x,$,Y,O,B,Q,R],styles:[`.npc-list-entry .npc-head-portrait{display:flex;align-items:flex-end}.npc-list-entry .npc-head-portrait img{object-fit:cover;object-position:bottom;border-top-left-radius:30px;border-bottom-left-radius:30px;height:110%;margin-top:-9.0909090909%}.frame{box-shadow:inset 0 0 1px #e4b383;transition:box-shadow .2s ease-out}.npc-list-entry:hover .frame{box-shadow:inset 0 0 1px 10px #e4b383}.npc-list-entry:hover .npc-head-portrait img{height:120%;margin-top:-18.1818181818%}.npc-list-grid{grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}
`],encapsulation:2})}}return t})();export{wt as NpcListComponent};
