import{a as Ze}from"./chunk-HXJCMGDT.js";import"./chunk-DJJM56ZO.js";import"./chunk-73EV7BE6.js";import{a as pe,b as ce}from"./chunk-GGMDRX3F.js";import{a as it}from"./chunk-4GSKVV2N.js";import{a as Ge}from"./chunk-6BQ7ENZ6.js";import"./chunk-TVU3H65T.js";import"./chunk-RJVNGUST.js";import{a as ae,b as We}from"./chunk-X76ED7RQ.js";import{a as Je}from"./chunk-DQD7JYIW.js";import"./chunk-UQURLLIY.js";import"./chunk-FWXEFMEW.js";import"./chunk-TOEGTLNV.js";import{a as Ae,b as Oe,c as qe}from"./chunk-6ZDMZINW.js";import"./chunk-FKKEM7DA.js";import{b as je}from"./chunk-XCH4B6E5.js";import"./chunk-RVJGASBU.js";import{c as te}from"./chunk-NRMPYCZJ.js";import{a as Xe,b as O,c as et,d as tt}from"./chunk-IJLHJLTE.js";import"./chunk-WQWQCRBZ.js";import{a as Ye}from"./chunk-OZSG2FXQ.js";import{a as Qe}from"./chunk-74VEJBIO.js";import{B as ze,c as De,g as Pe,l as Z,o as Le,v as Ve,x as Re}from"./chunk-TECYW7AI.js";import{b as ne,c as Ke,d as B,e as oe}from"./chunk-HXFFMZVC.js";import{a as Ue,b as A,g as re}from"./chunk-J3AOBVKI.js";import"./chunk-6J4LBBHO.js";import{b as X}from"./chunk-QQ6QL743.js";import{U as ee,W as P,d as F,v as J}from"./chunk-IYHG6KR3.js";import{h as Me,j as He,m as $e,n as Be}from"./chunk-UGZM4TBL.js";import"./chunk-6WBN6GOM.js";import{a as ie}from"./chunk-BLXOHTRX.js";import"./chunk-HU7WFQWJ.js";import{R as Fe}from"./chunk-ZZAXS4CE.js";import{Ab as R,Ac as h,Bc as se,Db as f,E as ge,Ea as xe,Fa as I,G as Ce,Gc as Ee,Hc as Te,Ic as de,Lc as be,Mc as Ne,Nb as s,Nc as y,Oc as T,Pb as q,Pc as Ie,Tb as m,Vb as u,Wb as g,Xb as C,Y as he,Yb as p,Zb as a,_b as d,_c as D,cc as w,db as U,fc as S,gb as n,hc as l,ia as E,lc as H,md as Se,o as K,ob as ye,oc as z,pb as j,pd as we,qa as b,ra as N,rd as W,u as _e,ua as ve,uc as Q,vc as Y,vd as ke,wb as v,wc as $,yc as c,z as ue,zc as x}from"./chunk-ZXANYF3K.js";var nt=(()=>{class e{constructor(){this.uiIcons=F,this.isNPCListActive=!1,this.router=E($e),this.updateIsNPCListActive(this.router.url),this.router.events.pipe(Ke(),ge(t=>t instanceof Me)).subscribe({next:t=>{this.updateIsNPCListActive(t.urlAfterRedirects)}})}updateIsNPCListActive(t){this.isNPCListActive=t.startsWith("/npcs/")&&!t.includes("overview")&&!t.includes("gifting")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-people"]],decls:5,vars:3,consts:[["label","NPC List","routerLink","overview",3,"active","uiIcon"],["label","Gifting","routerLink","gifting",3,"uiIcon"],[1,"hidden"]],template:function(i,o){i&1&&(p(0,"app-sidebar-container")(1,"app-module-sidebar"),d(2,"app-module-sidebar-item",0)(3,"app-module-sidebar-item",1),a(),d(4,"router-outlet",2),a()),i&2&&(n(2),s("active",o.isNPCListActive)("uiIcon",o.uiIcons.NEUTRAL),n(),s("uiIcon",o.uiIcons.GIFTING))},dependencies:[He,Ae,Oe,qe],encapsulation:2})}}return e})();var fe=[{displayName:"Default",value:"default"},{displayName:"Alphabetical",value:"alphabetical"},{displayName:"Birthdate",value:"birthdate"}],Ni=fe.map(e=>e.value);function ft(e,r){if(e&1&&(p(0,"mat-option",4),c(1),a()),e&2){let t=r.$implicit;s("value",t.value),n(),x(t.displayName)}}var V=(()=>{class e{constructor(){this.searchControl=new Z("",{nonNullable:!0}),this.sortControl=new Z("default",{nonNullable:!0}),this.sortOrderControl=new Z("asc",{nonNullable:!0}),this.searchValueChanges=B(this.searchControl.valueChanges,{initialValue:""}),this.sortValueChanges=B(this.sortControl.valueChanges,{initialValue:"default"}),this.sortOrderValueChanges=B(this.sortOrderControl.valueChanges,{initialValue:"asc"}),this.npcSortOptions=fe}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-npc-filter"]],decls:11,vars:2,consts:[[1,"mb-5","flex","gap-x-3","gap-y-4","flex-wrap"],[1,"semi-transparent-form-field","grow","lg:grow-0","shrink-0","basis-auto"],["matInput","",3,"formControl"],["disableOptionCentering","",3,"formControl"],[3,"value"]],template:function(i,o){i&1&&(p(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),c(3,"Search term"),a(),d(4,"input",2),a(),p(5,"mat-form-field",1)(6,"mat-label"),c(7,"Sorting"),a(),p(8,"mat-select",3),g(9,ft,2,2,"mat-option",4,u),a()()()),i&2&&(n(4),s("formControl",o.searchControl),n(4),s("formControl",o.sortControl),n(),C(o.npcSortOptions))},dependencies:[ke,ze,Je,Re,Fe,Qe,Ve,De,Pe,Le],encapsulation:2})}}return e})();var ot=new Map([["Spring",100],["Summer",200],["Fall",300],["Winter",400]]);function le(e,r,t){switch(t){case"alphabetical":e=[...e].sort((i,o)=>{let _="characterName"in i?i.characterName:i.npc?.characterName??"",G="characterName"in o?o.characterName:o.npc?.characterName??"";return _.toLowerCase()==="universal"?1:G.toLowerCase()==="universal"?-1:_.localeCompare(G)});break;case"birthdate":e=[...e].sort((i,o)=>{let _="characterName"in i?i.characterName:i.npc?.characterName??"",G="characterName"in o?o.characterName:o.npc?.characterName??"";if(_.toLowerCase()==="universal")return 1;if(G.toLowerCase()==="universal")return-1;let k="npc"in i?i.npc?.birthday:i.birthday,M="npc"in o?o.npc?.birthday:o.birthday;if(!k&&M)return 1;if(k&&!M)return-1;if(!k&&!M)return 0;k=k,M=M;let st=(ot.get(k.season)??0)+k.day,dt=(ot.get(M.season)??0)+M.day;return st-dt});break}return r?e.filter(i=>("characterName"in i?i.characterName:i.npc?.characterName??"").toLowerCase().includes(r)):e}function _t(e,r){if(e&1){let t=w();p(0,"app-inline-minimal-item",4),S("click",function(){b(t);let o=l().$implicit,_=l(3);return N(_.itemClicked.emit(o.item))}),a()}if(e&2){let t=l().$implicit;s("minimalItem",t.item)}}function ut(e,r){if(e&1&&(p(0,"span"),c(1),y(2,"addSpacesToPascalCase"),a()),e&2){let t=l().$implicit;n(),h("All ",T(2,1,t.categoryName),"")}}function gt(e,r){if(e&1&&f(0,_t,1,1,"app-inline-minimal-item",3)(1,ut,3,3,"span"),e&2){let t=r.$implicit;m(t.type==="item"?0:-1),n(),m(t.type==="category"?1:-1)}}function Ct(e,r){if(e&1&&(p(0,"div",0),d(1,"app-ui-icon",1),c(2),a(),p(3,"div",2),g(4,gt,2,2,null,null,u),a()),e&2){let t=l().$implicit,i=l();n(),s("uiIcon",t.icon),n(),h(" ",t.label," "),n(2),C(i.preferences()[t.preferenceField])}}function ht(e,r){if(e&1&&f(0,Ct,6,2),e&2){let t=r.$implicit,i=l();m(i.preferences()[t.preferenceField].length?0:-1)}}var me=(()=>{class e{constructor(){this.preferences=I.required(),this.itemClicked=xe(),this.preferencesMap=We}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-gifting-grid"]],hostAttrs:[1,"gifting-preference-grid"],inputs:{preferences:[1,"preferences"]},outputs:{itemClicked:"itemClicked"},decls:2,vars:0,consts:[[1,"font-semibold","flex","items-center","sm:flex-col","sm:pr-10","mb-1","text-black"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],[1,"gifting-gifts-grid"],[1,"cursor-pointer",3,"minimalItem"],[1,"cursor-pointer",3,"click","minimalItem"]],template:function(i,o){i&1&&g(0,ht,1,1,null,null,u),i&2&&C(o.preferencesMap)},dependencies:[P,Xe,Ue],styles:[`.gifting-preference-grid{margin-top:.25rem;display:grid;grid-template-columns:repeat(1,minmax(0,1fr));font-size:1.25rem;line-height:1.75rem}@media (min-width: 640px){.gifting-preference-grid{row-gap:.75rem}}.gifting-gifts-grid{margin-top:.25rem;margin-bottom:1rem;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));align-items:center;gap:.5rem}@media (min-width: 640px){.gifting-preference-grid{grid-template-columns:min-content 1fr}.gifting-gifts-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
`],encapsulation:2})}}return e})();function vt(e,r){if(e&1&&d(0,"app-offering",4),e&2){let t=r.$implicit;s("details",t)}}function xt(e,r){if(e&1&&(p(0,"app-item-card-switch",1),f(1,vt,1,1,"ng-template",3),a()),e&2){let t=l();s("item",t.selectedEntity)}}function yt(e,r){if(e&1&&d(0,"app-ui-icon",13),e&2){let t=l(2).$implicit,i=l(2);H("matTooltip","",t.npc==null?null:t.npc.characterName," is dateable"),s("uiIcon",i.uiIcon.LOVE)}}function Et(e,r){if(e&1&&(p(0,"div",14),d(1,"app-ui-icon",15),c(2),y(3,"ingameDate"),a()),e&2){let t=l(2).$implicit,i=l(2);n(),s("uiIcon",i.uiIcon.BIRTHDAY),n(),h(" ",T(3,2,t.npc.birthday)," ")}}function Tt(e,r){if(e&1&&(d(0,"app-item-icon",10),p(1,"div",11)(2,"div",12),c(3),f(4,yt,1,3,"app-ui-icon",13),a(),f(5,Et,4,4,"div",14),a()),e&2){let t=l().$implicit;s("itemName",t.preferences.npc.iconName),n(3),h(" ",t.preferences.npc.characterName," "),n(),m(t.npc!=null&&t.npc.isDateable?4:-1),n(),m(t.npc&&t.npc.birthday?5:-1)}}function bt(e,r){e&1&&c(0," Universal ")}function Nt(e,r){if(e&1){let t=w();p(0,"app-expandable",5,0)(2,"div",6),S("click",function(){b(t);let o=$(1);return N(o.toggle())}),p(3,"div",7),f(4,Tt,6,4)(5,bt,1,0),a(),d(6,"i",8),a(),p(7,"app-gifting-grid",9),S("itemClicked",function(o){b(t);let _=l(2);return N(_.showDetails(o))}),a()()}if(e&2){let t=r.$implicit,i=$(1);n(4),m(t.preferences.npc?4:-1),n(),m(t.preferences.mapKey==="ci_universal"?5:-1),n(),q("down",!i.isOpen())("translate-y-[-3px]",i.isOpen())("up",i.isOpen()),n(),s("preferences",t.preferences)}}function It(e,r){if(e&1&&(p(0,"app-card",2),g(1,Nt,8,9,"app-expandable",5,u),a()),e&2){let t=l();n(),C(t.filteredAndSortedNpcs())}}var rt=(()=>{class e extends oe{#e;#t;#o;#i;#n;constructor(){super(),this.npcFilter=j(V),this.uiIcon=F,this.#e=D(()=>this.npcFilter()?.searchValueChanges()??""),this.#t=D(()=>this.npcFilter()?.sortValueChanges()??"default"),this.#o=le,this.#i=ye(void 0),this.filteredAndSortedNpcs=D(()=>{let t=this.#i()??[];if(!this.#e||!this.#t)return t;let i=this.#e().toLowerCase(),o=this.#t();return this.#o(t,i,o)}),this.#n=E(X),this.gifting$=ue({gifts:this.#n.fetchGiftingPreferences$(),npcs:this.#n.fetchNPCs$()}).pipe(he(({gifts:t,npcs:i})=>{let o=t.map(_=>({preferences:_,npc:i.find(G=>G.key===_.mapKey)}));return this.#i?.set(o),K(o)}))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-gifting"]],viewQuery:function(i,o){i&1&&Q(o.npcFilter,V,5),i&2&&Y()},features:[R],decls:5,vars:4,consts:[["expandableComponent",""],["listDetail","",3,"item"],[1,"text-xl"],["appDatabaseItemDetails",""],[3,"details"],["open","",1,"mb-8"],["expandableHeader","",1,"flex","justify-between","items-center","cursor-pointer",3,"click"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[1,"arrow"],[3,"itemClicked","preferences"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"!h-6","!w-6",3,"uiIcon"]],template:function(i,o){if(i&1&&(p(0,"app-list-detail-container"),f(1,xt,2,1,"app-item-card-switch",1),d(2,"app-npc-filter"),f(3,It,3,0,"app-card",2),y(4,"async"),a()),i&2){let _;n(),m(o.selectedEntity?1:-1),n(2),m((_=T(4,2,o.gifting$))?3:-1,_)}},dependencies:[me,ie,ae,pe,ne,ce,P,O,A,re,we,V],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}
`],encapsulation:2})}}return e})();var at=(()=>{class e{constructor(){this.portraitName=I.required(),this.npcKey=I.required(),this.environment=E(J).getSettings().useBeta?"beta":"live",this.version=E(ee).value()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-npc-head-portrait"]],hostAttrs:[1,"npc-head-portrait"],inputs:{portraitName:[1,"portraitName"],npcKey:[1,"npcKey"]},decls:1,vars:5,consts:[["alt","","loading","lazy","onerror","this.onerror=null;this.src='assets/ui/images/no-head-portrait.webp'",3,"src"]],template:function(i,o){i&1&&d(0,"img",0),i&2&&z("src","assets/",o.environment,"/head-portraits/",o.npcKey(),"/",o.portraitName(),".webp?v=",o.version,"",U)},encapsulation:2})}}return e})();var St=e=>["..",e],wt=(e,r)=>({"line-clamp-2":e,"line-clamp-1":r});function kt(e,r){if(e&1&&d(0,"app-ui-icon",11),e&2){let t=l().$implicit,i=l(2);H("matTooltip","",t.characterName," is dateable"),s("uiIcon",i.uiIcon.LOVE)}}function Ft(e,r){if(e&1&&(p(0,"div",12),d(1,"app-ui-icon",15),c(2),y(3,"ingameDate"),a()),e&2){let t=l().$implicit,i=l(2);n(),s("uiIcon",i.uiIcon.BIRTHDAY),n(),h(" ",T(3,2,t.birthday)," ")}}function Dt(e,r){e&1&&(p(0,"div",14),c(1,"unofficial head portrait"),a())}function Pt(e,r){if(e&1&&(p(0,"a",4),d(1,"div",5),p(2,"div",6),d(3,"app-npc-head-portrait",7),a(),p(4,"div",8)(5,"div",9)(6,"span",10),c(7),a(),f(8,kt,1,3,"app-ui-icon",11),a(),f(9,Ft,4,4,"div",12),p(10,"div",13),c(11),a(),f(12,Dt,2,0,"div",14),a()()),e&2){let t=r.$implicit;s("routerLink",be(9,St,t.key)),n(3),s("npcKey",t.key)("portraitName",t.headerPortraitFileName),n(4),x(t.characterName),n(),m(t.isDateable?8:-1),n(),m(t.birthday?9:-1),n(),s("ngClass",Ne(11,wt,!t.customHead,t.customHead)),n(),x(t.description),n(),m(t.customHead?12:-1)}}function Lt(e,r){e&1&&(p(0,"div",2),g(1,Pt,13,14,"a",4,u),a()),e&2&&(n(),C(r))}function Vt(e,r){e&1&&d(0,"mat-spinner",3)}var pt=(()=>{class e{#e;#t;#o;#i;#n;constructor(){this.npcFilter=j(V),this.uiIcon=F,this.#e=D(()=>this.npcFilter()?.searchValueChanges()??""),this.#t=D(()=>this.npcFilter()?.sortValueChanges()??"default"),this.#o=le,this.filteredAndSortedNpcs=D(()=>{let t=this.#i()??[];if(!this.#e||!this.#t)return t;let i=this.#e().toLowerCase(),o=this.#t();return this.#o(t,i,o)}),this.#n=E(X),this.#i=B(this.#n.fetchNPCs$().pipe(Ce(()=>K([]))))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-npc-list"]],viewQuery:function(i,o){i&1&&Q(o.npcFilter,V,5),i&2&&Y()},decls:4,vars:1,consts:[[1,"px-main-hz","py-main-vt"],[1,"z-30","relative"],[1,"grid","npc-list-grid","gap-x-4","gap-y-10"],[1,"mx-auto","text-white"],[1,"flex","bg-[#F5F1E6]","rounded-[30px]","npc-list-entry","group","relative",3,"routerLink"],[1,"frame","absolute","inset-0","rounded-[30px]","z-10","pointer-events-none"],[1,"basis-2/5","aspect-square","bg-[#F1E1CC]","rounded-l-[30px]","group-hover:bg-[#F2DBB7]"],[1,"z-20","flex","h-full","relative","rounded-l-[30px]",3,"npcKey","portraitName"],[1,"basis-3/5","p-2","flex","flex-col"],[1,"inline-flex","gap-2","mt-3","items-center"],[1,"text-black","font-semibold","text-2xl"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2","items-center"],[3,"ngClass"],["clasS","mt-auto"],[1,"!w-5","!h-5",3,"uiIcon"]],template:function(i,o){if(i&1&&(p(0,"div",0),d(1,"app-npc-filter",1),f(2,Lt,3,0,"div",2)(3,Vt,1,0,"mat-spinner",3),a()),i&2){let _;n(2),m((_=o.filteredAndSortedNpcs())?2:3,_)}},dependencies:[Be,V,P,at,O,Se,te,A],styles:[`.npc-list-entry .npc-head-portrait{display:flex;align-items:flex-end}.npc-list-entry .npc-head-portrait img{object-fit:cover;object-position:bottom;border-top-left-radius:30px;border-bottom-left-radius:30px;height:110%;margin-top:-9.0909090909%}.frame{box-shadow:inset 0 0 1px #e4b383;transition:box-shadow .2s ease-out}.npc-list-entry:hover .frame{box-shadow:inset 0 0 1px 10px #e4b383}.npc-list-entry:hover .npc-head-portrait img{height:120%;margin-top:-18.1818181818%}.npc-list-grid{grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}
`],encapsulation:2})}}return e})();function Gt(e,r){if(e&1&&(p(0,"div",3),c(1),a()),e&2){let t=r.$implicit;n(),se("",t.key," : ",t.value?"Has to be seen":"Has to be unseen"," ")}}function Mt(e,r){if(e&1&&(g(0,Gt,2,2,"div",3,u),y(2,"keyvalue")),e&2){let t=r.$implicit;C(T(2,0,t))}}function Ht(e,r){if(e&1&&(p(0,"div"),c(1,"Other cutscenes requirements: "),g(2,Mt,3,2,null,null,u),a()),e&2){let t=l();n(2),C(t.heartEventTrigger().otherCutscenesState)}}function $t(e,r){if(e&1&&(p(0,"div"),c(1,"Only on days: "),p(2,"span",3),c(3),a()()),e&2){let t=l();n(3),x(t.heartEventTrigger().specificDay.join(", "))}}function Bt(e,r){if(e&1&&(p(0,"div"),c(1,"Only in seasons: "),p(2,"span",3),c(3),a()()),e&2){let t=l();n(3),x(t.heartEventTrigger().specificMonth.join(", "))}}function At(e,r){if(e&1&&(p(0,"div"),c(1,"Only with weather: "),p(2,"span",3),c(3),a()()),e&2){let t=l();n(3),x(t.heartEventTrigger().specificWeather.join(", "))}}function Ot(e,r){if(e&1&&d(0,"app-effect",7),e&2){let t=r.$implicit;s("effect",t)}}function qt(e,r){if(e&1&&(p(0,"div",4)(1,"span",5),c(2,"Effects when seen"),a(),p(3,"div",6),g(4,Ot,1,1,"app-effect",7,u),a()()),e&2){let t=l();n(4),C(t.heartEventTrigger().effects)}}function Kt(e,r){if(e&1&&c(0),e&2){l(2);let t=de(0);h(" Unlock requirements (",t.type==="And"?"all":"any"," of them): ")}}function Ut(e,r){e&1&&c(0," Unlock requirement: ")}function jt(e,r){if(e&1&&d(0,"app-requirements",8),e&2){let t=r.$implicit;s("requirement",t)}}function Rt(e,r){if(e&1&&(p(0,"div",4)(1,"span",5),f(2,Kt,1,1)(3,Ut,1,0),a(),p(4,"div",6),g(5,jt,1,1,"app-requirements",8,u),a()()),e&2){l();let t=de(0);n(2),m(t.requirements.length>1?2:-1),n(),m(t.requirements.length<2?3:-1),n(2),C(t.requirements)}}var ct=(()=>{class e{constructor(){this.heartEventTrigger=I.required(),this.heartEventChecklist=E(Ze)}toggleHeartEvent(t){t?this.heartEventChecklist.add(this.heartEventTrigger().cutscene):this.heartEventChecklist.remove(this.heartEventTrigger().cutscene)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-heart-event-trigger"]],inputs:{heartEventTrigger:[1,"heartEventTrigger"]},decls:33,vars:19,consts:[[1,"flex","justify-between","text-black","mb-1"],[1,"flex","flex-col"],[3,"change","checked"],[1,"text-black"],[1,"my-4"],[1,"text-lg","text-black"],[1,"flex","flex-col","text-black"],[3,"effect"],[3,"requirement"]],template:function(i,o){if(i&1){let _=w();Ee(0),p(1,"header",0)(2,"div",1)(3,"h4"),c(4),a(),p(5,"span"),c(6),a()(),p(7,"mat-checkbox",2),S("change",function(k){return b(_),N(o.toggleHeartEvent(k.checked))}),c(8,"Cutscene seen "),a()(),p(9,"div"),c(10,"Enabled: "),p(11,"span",3),c(12),a()(),p(13,"div"),c(14,"Location: "),p(15,"span",3),c(16),a()(),p(17,"div"),c(18,"Day Time of day: "),p(19,"span",3),c(20),y(21,"ingameTime"),y(22,"ingameTime"),a()(),p(23,"div"),c(24,"Can trigger on the same day: "),p(25,"span",3),c(26),a()(),f(27,Ht,4,0,"div")(28,$t,4,1,"div")(29,Bt,4,1,"div")(30,At,4,1,"div")(31,qt,6,0,"div",4)(32,Rt,7,2,"div",4)}if(i&2){let _=Te(o.heartEventTrigger().requirements);n(4),x(o.heartEventTrigger().cutscene),n(2),h("Id: ",o.heartEventTrigger().id," "),n(),s("checked",o.heartEventChecklist.isChecked(o.heartEventTrigger().cutscene)),n(5),x(o.heartEventTrigger().enabled?"Yes":"No"),n(4),x(o.heartEventTrigger().location),n(4),se(" ",T(21,15,o.heartEventTrigger().time.fromTime),"-",T(22,17,o.heartEventTrigger().time.toTime),`
`),n(6),x(o.heartEventTrigger().canTriggerSameDay?"Yes":"No"),n(),m(o.heartEventTrigger().otherCutscenesState.length?27:-1),n(),m(o.heartEventTrigger().specificDay.length?28:-1),n(),m(o.heartEventTrigger().specificMonth.length?29:-1),n(),m(o.heartEventTrigger().specificWeather.length?30:-1),n(),m(o.heartEventTrigger().effects&&o.heartEventTrigger().effects.length?31:-1),n(),m(_&&_.requirements.length?32:-1)}},dependencies:[et,Ye,W,tt,Ge],styles:["[_nghost-%COMP%]{display:block}"]})}}return e})();function zt(e,r){e&1&&d(0,"hr",5)}function Qt(e,r){if(e&1&&(d(0,"app-heart-event-trigger",4),f(1,zt,1,0,"hr",5)),e&2){let t=r.$implicit,i=r.$index,o=r.$count;q("mb-3",i===o-1),s("heartEventTrigger",t),n(),m(i!==o-1?1:-1)}}function Yt(e,r){if(e&1){let t=w();p(0,"app-expandable",1,0)(2,"h3",2),S("click",function(){b(t);let o=$(1);return N(o.toggle())}),c(3),d(4,"i",3),a(),g(5,Qt,2,4,null,null,u),a()}if(e&2){let t=r.$implicit,i=$(1);n(3),h(" ",t.heartLevel," hearts event "),n(),q("down",!i.isOpen())("up",i.isOpen()),n(),C(t.trigger)}}var lt=(()=>{class e{constructor(){this.heartEvents=I.required()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-heart-events"]],inputs:{heartEvents:[1,"heartEvents"]},decls:2,vars:0,consts:[["expandable",""],[1,"bg-amber-50/70","px-4","rounded-lg","mb-3","shadow-sm"],["expandableHeader","",1,"text-xl","text-black","flex","items-center","justify-between","cursor-pointer","py-4",3,"click"],[1,"arrow"],[3,"heartEventTrigger"],[1,"my-3"]],template:function(i,o){i&1&&g(0,Yt,7,5,"app-expandable",1,u),i&2&&C(o.heartEvents())},dependencies:[ct,ae],encapsulation:2})}}return e})();function Wt(e,r){if(e&1&&d(0,"app-offering",3),e&2){let t=r.$implicit;s("details",t)}}function Jt(e,r){if(e&1&&(p(0,"app-item-card-switch",0),f(1,Wt,1,1,"ng-template",2),a()),e&2){let t=l();s("item",t.selectedEntity)}}function Xt(e,r){if(e&1&&d(0,"app-ui-icon",8),e&2){let t=l(2);H("matTooltip","",t.npc.characterName," is dateable"),s("uiIcon",t.uiIcon.LOVE)}}function Zt(e,r){if(e&1&&(p(0,"div",9),d(1,"app-ui-icon",16),c(2),y(3,"ingameDate"),a()),e&2){let t=l(2);n(),s("uiIcon",t.uiIcon.BIRTHDAY),n(),h(" ",T(3,2,t.npc.birthday)," ")}}function ei(e,r){if(e&1&&(p(0,"p",10),c(1),a()),e&2){let t=l(2);n(),x(t.npc.description)}}function ti(e,r){if(e&1){let t=w();p(0,"app-gifting-grid",17),S("itemClicked",function(o){b(t);let _=l(2);return N(_.showDetails(o))}),a()}if(e&2){let t=l(2);s("preferences",t.giftingPreferences)}}function ii(e,r){if(e&1&&(p(0,"p",14),c(1),a()),e&2){let t=l(2);n(),h(" ",t.npc.characterName," has no specialized preferences. ")}}function ni(e,r){if(e&1&&d(0,"app-heart-events",15),e&2){let t=l(2);s("heartEvents",t.heartEvents)}}function oi(e,r){if(e&1&&(p(0,"p",14),c(1),a()),e&2){let t=l(2);n(),h(" ",t.npc.characterName," has no heart events. ")}}function ri(e,r){if(e&1&&(p(0,"h3",18),c(1),a()),e&2){let t=l().$implicit;n(),h(" ",t.appearanceCategory," ")}}function ai(e,r){if(e&1&&(p(0,"div",22)(1,"a",23),d(2,"app-ui-icon",24),a(),d(3,"app-npc-portrait",25),p(4,"span",26),c(5),a()()),e&2){let t=r.$implicit,i=l(6);n(),z("href","assets/",i.environment,"/portraits/",i.npc.key,"/",t.value,".webp?v=",i.version,"",U),n(),s("uiIcon",i.UiIcon.MAGNIFYING_GLASS),n(),s("npcKey",i.npc.key)("portraitName",t.value),n(2),x(t.key)}}function pi(e,r){if(e&1&&(p(0,"div",19)(1,"h4",20),c(2),a(),p(3,"div",21),g(4,ai,6,9,"div",22,u),y(6,"keyvalue"),a()()),e&2){let t=r.$implicit;n(2),x(t.key),n(2),C(T(6,1,t.value))}}function ci(e,r){if(e&1&&g(0,pi,7,3,"div",19,u),e&2){let t=l();C(t)}}function li(e,r){if(e&1&&(p(0,"p",14),c(1),a()),e&2){let t=l(4);n(),h(" ",t.npc.characterName," has no appearances. ")}}function mi(e,r){if(e&1&&f(0,ci,2,0)(1,li,2,1,"p",14),e&2){let t=r;m(t.length?0:-1),n(),m(t.length?-1:1)}}function si(e,r){if(e&1&&(f(0,ri,2,1,"h3",18)(1,mi,2,2),y(2,"keyvalue")),e&2){let t,i=r.$implicit;m(i.appearanceCategory?0:-1),n(),m((t=Ie(2,2,i.appearances,null))?1:-1,t)}}function di(e,r){if(e&1&&(p(0,"app-card")(1,"div",4),d(2,"app-item-icon",5),p(3,"div",6)(4,"div",7),c(5),f(6,Xt,1,3,"app-ui-icon",8),a(),f(7,Zt,4,4,"div",9),a()(),f(8,ei,2,1,"p",10),a(),p(9,"app-card",11)(10,"h2",12),c(11," Gifting "),a(),f(12,ti,1,1,"app-gifting-grid",13)(13,ii,2,1,"p",14),a(),p(14,"app-card",11)(15,"h2",12),c(16," Heart events "),a(),f(17,ni,1,1,"app-heart-events",15)(18,oi,2,1,"p",14),a(),p(19,"app-card",11)(20,"h2",12),c(21," Appearances "),a(),g(22,si,3,5,null,null,u),a()),e&2){let t=l();n(2),s("itemName",t.npc.iconName),n(3),h(" ",t.npc.characterName," "),n(),m(t.npc.isDateable?6:-1),n(),m(t.npc.birthday?7:-1),n(),m(t.npc.description?8:-1),n(4),m(t.giftingPreferences?12:-1),n(),m(t.giftingPreferences?-1:13),n(4),m(t.heartEvents.length?17:-1),n(),m(t.heartEvents.length?-1:18),n(4),C(t.npc.appearances)}}function fi(e,r){e&1&&(p(0,"app-card")(1,"h1",27),c(2," NPC not found. "),a()())}function _i(e,r){e&1&&d(0,"mat-spinner",1)}var mt=(()=>{class e extends oe{constructor(){super(...arguments),this.npcKey=I.required(),this.npc=null,this.heartEvents=[],this.UiIcon=F,this.uiIcon=F,this.environment=E(J).getSettings().useBeta?"beta":"live",this.version=E(ee).value()}ngOnInit(){_e([this._database.fetchNPCs$(),this._database.fetchHeartEvents$(),this._database.fetchGiftingPreferences$()]).subscribe({next:([t,i,o])=>{this.npc=t.find(_=>_.key.toLowerCase()===this.npcKey().toLowerCase()),this.heartEvents=i[this.npcKey().toLowerCase()]??[],this.giftingPreferences=o.find(_=>_.mapKey.toLowerCase()===this.npc?.key.toLowerCase())}})}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=ve(e)))(o||e)}})()}static{this.\u0275cmp=v({type:e,selectors:[["app-npc"]],inputs:{npcKey:[1,"npcKey"]},features:[R],decls:5,vars:2,consts:[["listDetail","",3,"item"],[1,"mx-auto","text-white"],["appDatabaseItemDetails",""],[3,"details"],[1,"text-2xl","text-black","font-semibold","flex","items-center","gifting-portrait"],[1,"h-16","mr-3",3,"itemName"],[1,"flex","flex-col"],[1,"flex","gap-2","items-center"],[1,"!text-gifting","!h-6","!w-6",3,"uiIcon","matTooltip"],[1,"text-lg","flex","gap-2"],[1,"mt-2"],[1,"mt-6"],[1,"mb-4","font-semibold","text-2xl","text-black"],[3,"preferences"],[1,"text-black","text-lg"],[3,"heartEvents"],[1,"!h-6","!w-6",3,"uiIcon"],[3,"itemClicked","preferences"],[1,"mb-4","font-semibold","text-xl","text-black"],[1,"font-semibold","text-black","mb-6"],[1,"text-lg"],[1,"grid","portrait-grid","gap-4"],[1,"flex","flex-col","shadow-lg","p-2","relative","group"],["target","_blank",1,"hidden","group-focus-visible:block","group-hover:block","absolute","top-2.5","right-2.5",3,"href"],[3,"uiIcon"],[1,"h-[400px]","flex","items-end","justify-center",3,"npcKey","portraitName"],[1,""],[1,"mb-4","font-semibold","text-3xl","text-black","flex","items-center","gap-x-4"]],template:function(i,o){i&1&&(p(0,"app-list-detail-container"),f(1,Jt,2,1,"app-item-card-switch",0)(2,di,24,9)(3,fi,3,0,"app-card")(4,_i,1,0,"mat-spinner",1),a()),i&2&&(n(),m(o.selectedEntity?1:-1),n(),m(o.npc?2:o.npc===void 0?3:o.npc===null?4:-1))},dependencies:[ne,ce,pe,re,ie,P,O,me,lt,W,it,te,je,A],styles:[`.gifting-portrait .app-item-icon>img{width:auto;height:100%;aspect-ratio:unset}.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.portrait-grid .npc-portrait img{max-height:400px}@media (min-width: 1280px){.portrait-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
`],encapsulation:2})}}return e})();var No=[{path:"",pathMatch:"full",redirectTo:"overview"},{path:"",component:nt,children:[{path:"gifting",component:rt,title:"Gifting - NPCs"},{path:"overview",component:pt,title:"Overview - NPCs"},{path:":npcKey",component:mt}]}];export{No as routes};
