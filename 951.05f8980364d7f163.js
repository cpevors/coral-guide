"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[951],{4986:(_,u,c)=>{c.d(u,{k:()=>i});var i=(()=>((i=i||{}).OFFERINGS="offerings",i.JOURNAL_FISH="journal_fish",i.JOURNAL_CRITTER="journal_critter",i.JOURNAL_INSECTS="journal_insects",i.JOURNAL_GEMS="journal_gems",i.JOURNAL_FOSSILS="journal_fossils",i.JOURNAL_ARTIFACTS="journal_artifacts",i.COOKING_RECIPES="cooking_recipes",i))()},4371:(_,u,c)=>{c.d(u,{x:()=>f});var i=c(4986),C=c(8337),h=c(8645),e=c(5879),m=c(1063);let f=(()=>{class a{constructor(s){this._settings=s,this.clearTimeout=3e3,this._completedCategory$=new h.x,this.currentChecklistIndex=0,this._checklists=[],this._markedAsCompleted=new C.Ov(!0,[]),this.versionSuffix=this._settings.getSettings().useBeta?"_beta":"_live",this.read(),this._markedAsCompleted.compareWith=(t,n)=>t.category===n.category&&t.item.id===n.item.id}get currentChecklistAmount(){const s=this.getCurrentChecklist();return s.offerings.length+s.journal.critter.length+s.journal.insects.length+s.journal.fish.length+s.journal.artifacts.length+s.journal.gems.length+s.journal.fossils.length+s.cookingRecipes.length+s.uncategorized.length}get currentIsEmpty(){return 0===this.currentChecklistAmount}add(s,t){this.getCategoryList(s).push(t),this.save()}getCurrentChecklist(){let s=this._checklists[this.currentChecklistIndex];return s||(this.currentChecklistIndex=0,s=this._checklists[this.currentChecklistIndex]),s||(this._checklists.push(this._createEmptyChecklist()),s=this._checklists[this.currentChecklistIndex]),s}save(){localStorage.setItem(a._CHECKLIST_STORE_KEY+this.versionSuffix,JSON.stringify(this._checklists))}read(){const s=localStorage.getItem(a._CHECKLIST_STORE_KEY+this.versionSuffix);s?this._checklists=JSON.parse(s):(this._checklists.push(this._createEmptyChecklist()),this.save())}updateStatus(s,t,n,r=!1){const l={category:s,item:t};n?this._markedAsCompleted.select(l):this._markedAsCompleted.deselect(l),r?this._completeEntries():this._resetClearTimer()}resetLiveChecklist(){localStorage.setItem(a._CHECKLIST_STORE_KEY+"_live",JSON.stringify([this._createEmptyChecklist()])),this.read()}resetBetaChecklist(){localStorage.setItem(a._CHECKLIST_STORE_KEY+"_beta",JSON.stringify([this._createEmptyChecklist()])),this.read()}alreadyInList(s,t){const n=this.getCategoryList(s);if(0===n.length)return!1;const r="item"in t?t.item.id:t.id;return"item"in n[0]?!!n.find(l=>l.item.id===r):!!n.find(l=>l.id===r)}getCategoryList(s){switch(s){case i.k.OFFERINGS:return this.getCurrentChecklist().offerings;case i.k.COOKING_RECIPES:return this.getCurrentChecklist().cookingRecipes;case i.k.JOURNAL_CRITTER:return this.getCurrentChecklist().journal.critter;case i.k.JOURNAL_INSECTS:return this.getCurrentChecklist().journal.insects;case i.k.JOURNAL_ARTIFACTS:return this.getCurrentChecklist().journal.artifacts;case i.k.JOURNAL_FOSSILS:return this.getCurrentChecklist().journal.fossils;case i.k.JOURNAL_GEMS:return this.getCurrentChecklist().journal.gems;case i.k.JOURNAL_FISH:return this.getCurrentChecklist().journal.fish;default:return this.getCurrentChecklist().uncategorized}}categoryCompleted$(){return this._completedCategory$.asObservable()}completeCategory(s){this._completedCategory$.next(s)}_resetClearTimer(){clearTimeout(this.clearTimer),this.clearTimer=setTimeout(()=>{this._completeEntries()},this.clearTimeout)}_createEmptyChecklist(){return{version:a._CURRENT_CHECKLIST_VERSION,offerings:[],cookingRecipes:[],journal:{critter:[],fish:[],gems:[],artifacts:[],fossils:[],insects:[]},uncategorized:[]}}_completeEntries(){const s=this._markedAsCompleted.selected;this._markedAsCompleted.clear();let t=-1;s.forEach(n=>{switch(n.category){case i.k.OFFERINGS:t=this.getCurrentChecklist().offerings.findIndex(r=>r.item.id===n.item.id),t>=0&&this.getCurrentChecklist().offerings.splice(t,1);break;case i.k.JOURNAL_CRITTER:t=this.getCurrentChecklist().journal.critter.findIndex(r=>r.item.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.critter.splice(t,1);break;case i.k.JOURNAL_FISH:t=this.getCurrentChecklist().journal.fish.findIndex(r=>r.item.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.fish.splice(t,1);break;case i.k.JOURNAL_INSECTS:t=this.getCurrentChecklist().journal.insects.findIndex(r=>r.item.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.insects.splice(t,1);break;case i.k.JOURNAL_GEMS:t=this.getCurrentChecklist().journal.gems.findIndex(r=>r.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.gems.splice(t,1);break;case i.k.JOURNAL_FOSSILS:t=this.getCurrentChecklist().journal.fossils.findIndex(r=>r.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.fossils.splice(t,1);break;case i.k.JOURNAL_ARTIFACTS:t=this.getCurrentChecklist().journal.artifacts.findIndex(r=>r.id===n.item.id),t>=0&&this.getCurrentChecklist().journal.artifacts.splice(t,1);break;case i.k.COOKING_RECIPES:t=this.getCurrentChecklist().cookingRecipes.findIndex(r=>r.item.id===n.item.id),t>=0&&this.getCurrentChecklist().cookingRecipes.splice(t,1)}}),this.save()}}return a._CURRENT_CHECKLIST_VERSION=1,a._CHECKLIST_STORE_KEY="checklist",a.\u0275fac=function(s){return new(s||a)(e.LFG(m.g))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},2951:(_,u,c)=>{c.r(u),c.d(u,{SettingsModule:()=>r});var i=c(6814),C=c(5612),h=c(95),e=c(5879),m=c(1063),f=c(4371),a=c(4984);function p(l,d){1&l&&(e.TgZ(0,"p",18),e._uU(1,"Changes that require a reload were made. Saving will reload automatically."),e.qZA())}let s=(()=>{class l{constructor(o,g){this._settingsService=o,this._checkList=g,this.reloadRequired=!1,this.settingsForm=new h.cw({useBeta:new h.NI(!1,{nonNullable:!0}),resetLiveChecklist:new h.NI(!1,{nonNullable:!0}),resetBetaChecklist:new h.NI(!1,{nonNullable:!0})});const k=this._settingsService.getSettings();this.settingsForm.patchValue(k),this.settingsForm.valueChanges.subscribe({next:S=>{this.reloadRequired=k.useBeta!==S.useBeta}})}saveSettings(){const o={...this.settingsForm.value};o.resetLiveChecklist&&this._checkList.resetLiveChecklist(),o.resetBetaChecklist&&this._checkList.resetBetaChecklist(),delete o.resetBetaChecklist,delete o.resetLiveChecklist,this._settingsService.saveSettings(o),this.reloadRequired&&location.reload()}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(m.g),e.Y36(f.x))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-settings"]],decls:44,vars:2,consts:[[1,"text-black","container","block","mx-auto","my-10"],[3,"formGroup","click"],[1,"grid","md:grid-cols-3","pb-12","gap-y-10","gap-x-8","border-b","border-accent/50","mb-8"],[1,"leading-7","font-bold","text-lg"],[1,"bg-amber-50/70","md:col-span-2","px-4","py-6","sm:p-8","sm:rounded-lg"],[1,"flex","gap-x-3"],[1,"flex","h-6","items-center"],["formControlName","useBeta","id","useBeta","name","useBeta","type","checkbox"],["for","useBeta",1,"font-bold","leading-6"],[1,"leading-6"],[1,"bg-amber-50/70","md:col-span-2","px-4","py-6","sm:p-8","sm:rounded-lg","flex","flex-col","gap-6"],["formControlName","resetLiveChecklist","id","resetLiveChecklist","name","resetLiveChecklist","type","checkbox"],["for","resetLiveChecklist",1,"font-bold","leading-6"],["formControlName","resetBetaChecklist","id","resetBetaChecklist","name","resetBetaChecklist","type","checkbox"],["for","resetBetaChecklist",1,"font-bold","leading-6"],[1,"mt-6","sm:mt-8","flex","justify-between","items-center"],["class","font-bold",4,"ngIf"],["type","submit",1,"btn-amber","ml-auto"],[1,"font-bold"]],template:function(o,g){1&o&&(e.TgZ(0,"app-card",0)(1,"form",1),e.NdJ("click",function(){return g.saveSettings()}),e.TgZ(2,"div",2)(3,"div")(4,"h3",3),e._uU(5,"Beta data"),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Options for latest beta build. Current beta data: Merfolk Update 2023 "),e.qZA()(),e.TgZ(8,"div",4)(9,"div",5)(10,"div",6),e._UZ(11,"input",7),e.qZA(),e.TgZ(12,"div")(13,"label",8),e._uU(14,"Use beta data"),e.qZA(),e.TgZ(15,"p",9),e._uU(16,"Switches app data to beta data. Change requires reload."),e.qZA()()()()(),e.TgZ(17,"div",2)(18,"div")(19,"h3",3),e._uU(20,"Checklists"),e.qZA(),e.TgZ(21,"p"),e._uU(22,"Options for checklists. Reset your checklist data if they behave in unwanted behavior and set defaults for viewing. "),e.qZA()(),e.TgZ(23,"div",10)(24,"div",5)(25,"div",6),e._UZ(26,"input",11),e.qZA(),e.TgZ(27,"div")(28,"label",12),e._uU(29,"Reset live checklists"),e.qZA(),e.TgZ(30,"p",9),e._uU(31,"Reset all checklists which were created while using live data."),e.qZA()()(),e.TgZ(32,"div",5)(33,"div",6),e._UZ(34,"input",13),e.qZA(),e.TgZ(35,"div")(36,"label",14),e._uU(37,"Reset beta checklists"),e.qZA(),e.TgZ(38,"p",9),e._uU(39,"Reset all checklists which were created while using beta data."),e.qZA()()()()(),e.TgZ(40,"div",15),e.YNc(41,p,2,0,"p",16),e.TgZ(42,"button",17),e._uU(43,"Save"),e.qZA()()()()),2&o&&(e.xp6(1),e.Q6J("formGroup",g.settingsForm),e.xp6(40),e.Q6J("ngIf",g.reloadRequired))},dependencies:[i.O5,a.A,h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u],encapsulation:2}),l})();var t=c(4709);const n=[{path:"",component:s}];let r=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[i.ez,C.Bz.forChild(n),t.m,h.UX]}),l})()}}]);