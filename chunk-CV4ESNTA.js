import{a as ne}from"./chunk-WCLEOC2S.js";import{a as ie}from"./chunk-76RDD3X3.js";import"./chunk-HB6QOK6I.js";import{a as ee,b as te}from"./chunk-4ABN5UX5.js";import"./chunk-7R6UEU2W.js";import"./chunk-EKZGRJW6.js";import"./chunk-CXV365G5.js";import{a as U}from"./chunk-62SYQGLQ.js";import"./chunk-WQWM5V3T.js";import"./chunk-FGYBINTK.js";import"./chunk-OBPRYC72.js";import"./chunk-EKOP5NP3.js";import"./chunk-N2KJDITY.js";import"./chunk-NGYDMITL.js";import"./chunk-YQVLGDGS.js";import"./chunk-6Q5ZQTY6.js";import"./chunk-5C6YMBLV.js";import{a as X}from"./chunk-KBJACSGS.js";import"./chunk-VXQBK2DC.js";import"./chunk-XZWLFQMH.js";import"./chunk-XSV5HIP5.js";import{a as Y}from"./chunk-VJUOC7OS.js";import{a as H,c as J}from"./chunk-IN7U4HAH.js";import"./chunk-EIGW5THG.js";import"./chunk-FKRWSLGD.js";import{b as Q}from"./chunk-4RPGNDDY.js";import{a as W}from"./chunk-O3BKA2PM.js";import"./chunk-U7G2FOHA.js";import{b as Z}from"./chunk-EV4S2XUE.js";import"./chunk-BO7LODCH.js";import{g as L,h as M,j as V,l as R,q as K,r as j,w as z}from"./chunk-VA7RNGDO.js";import"./chunk-IIRYQ5NI.js";import"./chunk-HU7WFQWJ.js";import"./chunk-JCTEBOW5.js";import{g as q}from"./chunk-SJRCRC22.js";import"./chunk-JL222CZ7.js";import"./chunk-YRO5LM32.js";import"./chunk-TIIEJEUC.js";import"./chunk-PS3FMX3M.js";import"./chunk-7JOAVXDE.js";import"./chunk-KLZCJ54W.js";import{b as G}from"./chunk-PYPF6S35.js";import"./chunk-FJWSANLQ.js";import{Fa as O,Hc as _,Ic as C,Jb as m,Lb as b,Pb as d,Rb as u,Sb as h,Tb as g,Ub as l,Vb as c,Wb as x,_b as T,ac as F,bc as s,db as r,ea as y,ec as N,fc as p,kd as B,ma as v,na as k,p as w,sb as E,sc as I,tc as P,uc as A,vd as $,wb as D,zb as f}from"./chunk-J7WD3OMO.js";import"./chunk-4CLCTAJ7.js";function ae(i,a){if(i&1&&x(0,"app-offering",3),i&2){let e=a.$implicit;m("details",e)}}function le(i,a){if(i&1&&(l(0,"app-item-card-switch",0),f(1,ae,1,1,"ng-template",2),c()),i&2){let e=s();m("item",e.selectedEntity)}}function ce(i,a){if(i&1){let e=T();l(0,"div",13),_(1,"entityKey"),l(2,"app-item-icon",14),F("click",function(){v(e);let n=s().$implicit,o=s(5);return k(o.showDetails(n))}),c(),l(3,"label",15),x(4,"mat-checkbox",16),c()()}if(i&2){let e,t=a,n=s().$implicit,o=s(5);b("checklist-checked",(e=o.checklistForm.get(t))==null?null:e.value)("selected-icon",o.selectedEntity&&C(1,14,o.selectedEntity)===t),r(2),m("amount",n.amount)("itemName",n.item.iconName)("quality",n.quality),r(),p("for","entry-",t,"-input"),r(),p("id","entry-",t,""),p("name","entry-",t,""),m("formControlName",t)}}function se(i,a){if(i&1&&(f(0,ce,5,16,"div",12),_(1,"entityKey")),i&2){let e,t=a.$implicit;d((e=C(1,1,t.item))?0:-1,e)}}function me(i,a){if(i&1&&(l(0,"div",7)(1,"div",8),x(2,"img",9),l(3,"div",10)(4,"div"),I(5),c(),l(6,"div"),I(7),c()()(),l(8,"div",11),h(9,se,2,3,null,null,u),c()()),i&2){let e=a.$implicit,t=s(4);r(),b("bg-merino-300",(t.activeOffering==null?null:t.activeOffering.title)===e.title),r(),p("alt","",e.title," offering icon"),p("ngSrc","",t.bundleAssetPath()+e.imageName,".webp"),r(3),P(e.title),r(2),A(" ",e.numOfItemRequired===-1?"All":e.numOfItemRequired," required: "),r(2),g(e.requiredItems)}}function pe(i,a){if(i&1&&(l(0,"div",6),h(1,me,11,8,"div",7,u),c()),i&2){let e=s().$implicit;r(),g(e.offerings)}}function fe(i,a){if(i&1&&(l(0,"mat-tab",5),_(1,"addSpacesToPascalCase"),f(2,pe,3,0,"div",6),c()),i&2){let e=a.$implicit,t=s(2);N("label",C(1,2,e.offeringGroupTitle)),r(2),d(t.showTable?-1:2)}}function de(i,a){if(i&1){let e=T();l(0,"mat-tab-group",4),F("selectedTabChange",function(n){v(e);let o=s();return k(o.updateUrl(n))}),h(1,fe,3,4,"mat-tab",5,u),c()}if(i&2){let e=s();m("formGroup",e.checklistForm)("selectedIndex",e.selectedTabIndex()),r(),g(a)}}var Ae=(()=>{class i extends X{constructor(){super(),this.checklistService=y(ne),this.checklistForm=new V({}),this.useBeta=y(G).getSettings().useBeta,this.bundleAssetPath=O(`assets/${this.useBeta?"beta":"live"}/items/icons/`),this._altars=[],this.urlPathFromLabel=e=>{let t=e.toLowerCase().replaceAll(" ",""),n=this._altars.find(o=>o.offeringGroupTitle.toLowerCase().replaceAll(" ","")===t);return n?n.urlPath:e.toLowerCase().replaceAll(" ","")},this.checklistForm.valueChanges.pipe(W()).subscribe({next:e=>{let t=[];Object.keys(e).forEach(n=>{e[n]&&t.push(n)}),this.checklistService.set(t)}}),this.offerings$=this._database.fetchOfferings$().pipe(w(e=>{let t=e.filter(o=>o.offeringType!=="Diving"),n=t.map(o=>o.urlPath);return this._altars=t,t.forEach(o=>{o.offerings.forEach(oe=>{oe.requiredItems.forEach(re=>{let S=q(re.item);this.checklistForm.addControl(S,new R(this.checklistService.isChecked(S),{nonNullable:!0}),{emitEvent:!1})})})}),this.activateTabFromRoute(n),t}))}showDetails(e){this.entryForToDo=e,e&&"amount"in e?super.showDetails(e.item):super.showDetails(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=E({type:i,selectors:[["app-offerings-checklist"]],features:[D],decls:4,vars:4,consts:[["listDetail","","context","offerings",3,"item"],[3,"formGroup","selectedIndex"],["appDatabaseItemDetails",""],[3,"details"],[3,"selectedTabChange","formGroup","selectedIndex"],[3,"label"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"flex","flex-col","gap-y-2"],[1,"rounded-lg","bg-merino","flex","items-center","gap-4","p-4"],["height","64","width","64",3,"alt","ngSrc"],[1,"flex","flex-col","text-lg","font-semibold"],[1,"icon-grid","w-full"],[1,"icon-grid-item","checklist-item","flex","flex-col",3,"checklist-checked","selected-icon"],[1,"icon-grid-item","checklist-item","flex","flex-col"],[3,"click","amount","itemName","quality"],[1,"text-white","flex","justify-center",3,"for"],[1,"flex",3,"formControlName","id","name"]],template:function(t,n){if(t&1&&(l(0,"app-list-detail-container"),f(1,le,2,1,"app-item-card-switch",0)(2,de,3,2,"mat-tab-group",1),_(3,"async"),c()),t&2){let o;r(),d(n.selectedEntity?1:-1),r(),d((o=C(3,2,n.offerings$))?2:-1,o)}},dependencies:[H,Y,z,L,M,K,j,J,te,ee,Q,ie,Z,U,$,B],encapsulation:2})}}return i})();export{Ae as OfferingsChecklistComponent};
