import{a as St,b as bt}from"./chunk-4ABN5UX5.js";import"./chunk-7R6UEU2W.js";import{a as vt,b as Tt}from"./chunk-24FAZNX7.js";import"./chunk-EKZGRJW6.js";import"./chunk-CXV365G5.js";import{a as j}from"./chunk-62SYQGLQ.js";import"./chunk-WQWM5V3T.js";import"./chunk-FGYBINTK.js";import"./chunk-OBPRYC72.js";import"./chunk-EKOP5NP3.js";import"./chunk-N2KJDITY.js";import"./chunk-NGYDMITL.js";import"./chunk-YQVLGDGS.js";import"./chunk-6Q5ZQTY6.js";import{a as ht}from"./chunk-5C6YMBLV.js";import"./chunk-VXQBK2DC.js";import"./chunk-XZWLFQMH.js";import{a as T}from"./chunk-XSV5HIP5.js";import"./chunk-VJUOC7OS.js";import{a as pt}from"./chunk-EIGW5THG.js";import"./chunk-FKRWSLGD.js";import{a as gt,b as Dt}from"./chunk-5YOBLJC2.js";import{b as ft,c as Ct}from"./chunk-4RPGNDDY.js";import{a as B}from"./chunk-O3BKA2PM.js";import"./chunk-U7G2FOHA.js";import{a as _t,b as xt}from"./chunk-EV4S2XUE.js";import{e as yt}from"./chunk-NXARORLY.js";import"./chunk-BO7LODCH.js";import{c as nt,g as at,l as rt,m as lt,p as st,v as ct,w as mt}from"./chunk-VA7RNGDO.js";import"./chunk-IIRYQ5NI.js";import{c as et,d as ot,f as A,h as it}from"./chunk-HU7WFQWJ.js";import"./chunk-JCTEBOW5.js";import"./chunk-SJRCRC22.js";import{a as ut}from"./chunk-JL222CZ7.js";import{S as tt}from"./chunk-YRO5LM32.js";import"./chunk-TIIEJEUC.js";import{h as dt}from"./chunk-PS3FMX3M.js";import{a as Z}from"./chunk-7JOAVXDE.js";import"./chunk-KLZCJ54W.js";import"./chunk-PYPF6S35.js";import"./chunk-FJWSANLQ.js";import{A as V,Aa as I,Ba as _,Fa as z,Jb as m,Lb as S,Pb as p,Rb as b,Sb as E,Tb as k,Ub as n,Vb as a,Vc as Y,Wb as w,Wc as J,Xc as K,Yc as X,_b as D,ac as x,bc as c,cc as L,db as r,dc as O,ea as C,lb as F,ma as y,na as g,oc as U,pc as R,sb as v,sc as l,tc as u,ua as N,uc as Q,vc as $,wb as q,xc as W,yc as H,zb as d,zc as G}from"./chunk-J7WD3OMO.js";import"./chunk-4CLCTAJ7.js";var P=["offerings","journal_fish","journal_critter","journal_insects","journal_gems","journal_fossils","journal_artifacts","journal_crops","journal_animal_produce","journal_scavangables","journal_ocean_produce","cooking_recipes","crafting","artisan","museum","uncategorized","item_mixing","database"],M={offerings:"Offerings",journal_fish:"Fish",journal_critter:"Sea Critter",journal_insects:"Insects",journal_gems:"Gems",journal_fossils:"Fossils",journal_artifacts:"Artifacts",journal_crops:"Crops",journal_animal_produce:"Animal Produce",journal_ocean_produce:"Ocean Produce",journal_scavangables:"Scavangables",cooking_recipes:"Cooking recipes",crafting:"Crafting",artisan:"Artisan",museum:"Museum",uncategorized:"Uncategorized",item_mixing:"Item mixing",database:"Database"};var It=["*"];function jt(e,s){if(e&1&&w(0,"app-rarity-icon",6),e&2){let t=c(2);m("quality",t.quality())}}function Bt(e,s){if(e&1){let t=D();n(0,"div",3),x("click",function(){y(t);let i=c();return g(i.entrySelected.emit(i.item()))}),w(1,"app-item-icon",4),n(2,"span",5),l(3),a(),d(4,jt,1,1,"app-rarity-icon",6),a()}if(e&2){let t=c();r(),m("itemName",t.item().iconName),r(),S("line-through",t.isChecked),r(),u(t.item().displayName),r(),p(t.quality()?4:-1)}}var kt=(()=>{class e{constructor(){this.amount=_(),this.quality=_(),this.item=_.required(),this.category=_.required(),this.entrySelected=I(),this.checkbox=F(j),this.qualities=Z,this.isChecked=!1,this.#t=C(T),this.#e=C(N)}#t;#e;ngOnInit(){this.#t.categoryCompleted$().pipe(B(this.#e),V(t=>t===this.category())).subscribe({next:()=>{this.toggleCompletionStatus(!0);let t=this.checkbox();t&&(t.checked=!0)}})}toggleCompletionStatus(t){this.isChecked=t,this.#t.updateStatus(this.category(),this.item(),t)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-to-do-entry-base"]],viewQuery:function(o,i){o&1&&U(i.checkbox,j,5),o&2&&R()},hostVars:2,hostBindings:function(o,i){o&2&&S("opacity-50",i.isChecked)},inputs:{amount:[1,"amount"],quality:[1,"quality"],item:[1,"item"],category:[1,"category"]},outputs:{entrySelected:"entrySelected"},ngContentSelectors:It,decls:5,vars:2,consts:[[1,"flex","gap-2","items-center","cursor-pointer"],[1,"ml-auto","font-semibold","mr-4"],[3,"change"],[1,"flex","gap-2","items-center","cursor-pointer",3,"click"],[1,"!w-7",3,"itemName"],[1,"ml-1","whitespace-nowrap"],[1,"!w-4",3,"quality"]],template:function(o,i){o&1&&(L(),d(0,Bt,5,5,"div",0),O(1),n(2,"span",1),l(3),a(),n(4,"mat-checkbox",2),x("change",function(h){return i.toggleCompletionStatus(h.checked)}),a()),o&2&&(p(i.item()?0:-1),r(3),u(i.amount()?"x"+i.amount():""))},dependencies:[j,_t,xt],styles:["[_nghost-%COMP%]{display:flex;height:48px;align-items:center;gap:.5rem;border-radius:1rem;background-color:rgb(0 0 0 / var(--tw-bg-opacity));--tw-bg-opacity: .05;padding-left:1rem;padding-right:1rem;font-size:1.125rem;line-height:1.75rem;--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}"]})}}return e})();function Mt(e,s){if(e&1){let t=D();n(0,"app-to-do-entry-base",4),x("entrySelected",function(i){y(t);let f=c(2);return g(f.entrySelected.emit(i))}),a()}if(e&2){let t=s.$implicit,o=c(2);m("amount",t.amount)("category",o.context())("item",t.itemEntry)("quality",t.quality)("@leaveAnimation",void 0)}}function At(e,s){if(e&1){let t=D();n(0,"header",0)(1,"h2",1),l(2),a(),n(3,"button",2),x("click",function(){y(t);let i=c();return g(i.completeList())}),l(4,"complete list"),a()(),n(5,"div"),E(6,Mt,1,5,"app-to-do-entry-base",3,b),a()}if(e&2){let t,o=c();r(2),u(o.context()==="uncategorized"||o.context()===void 0?"Uncategorized":o.ToDoContextDisplayNames[o.context()]),r(3),m("@.disabled",!((t=o.toDoId())!=null&&t.includes(o.context())||o.toDoId()===void 0)),r(),k(o.data)}}var wt=(()=>{class e{constructor(){this.entrySelected=I(),this.context=_.required(),this.toDoId=_(),this.hidden=Y(()=>!this.toDoId()?.includes(this.context())||!this.data.length),this.ToDoContextDisplayNames=M,this.toDoService=C(T)}get data(){return this.toDoService.getCategoryList(this.context()==="uncategorized"?void 0:this.context())}completeList(){this.toDoService.completeCategory(this.context()==="uncategorized"?void 0:this.context())}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-to-do-partial"]],hostVars:2,hostBindings:function(o,i){o&2&&S("hidden",i.hidden())},inputs:{context:[1,"context"],toDoId:[1,"toDoId"]},outputs:{entrySelected:"entrySelected"},decls:1,vars:1,consts:[[1,"flex","justify-between","items-center","mt-5","mb-2"],[1,"font-semibold","text-xl","text-black"],[1,"btn-amber",3,"click"],[1,"mb-2","block",3,"amount","category","item","quality"],[1,"mb-2","block",3,"entrySelected","amount","category","item","quality"]],template:function(o,i){if(o&1&&d(0,At,8,2),o&2){let f;p(i.data.length&&((f=i.toDoId())!=null&&f.includes(i.context()))?0:-1)}},dependencies:[kt],encapsulation:2,data:{animation:[et("leaveAnimation",[it(":leave",[A({height:"*",opacity:1}),ot("200ms ease-in",A({height:0,opacity:0}))])])]}})}}return e})();function Pt(e,s){if(e&1&&w(0,"app-offering",15),e&2){let t=s.$implicit;m("details",t)}}function Vt(e,s){if(e&1&&(n(0,"app-item-card-switch",1),d(1,Pt,1,1,"ng-template",14),a()),e&2){let t=c();m("item",t.selectedEntity)("context",t.selectedContext())}}function Nt(e,s){e&1&&l(0," All ")}function zt(e,s){if(e&1&&(n(0,"span",16),l(1),a()),e&2){let t=c(3);r(),$(" (+",t.toDoCategoryControl.value.length-1," ",t.toDoCategoryControl.value.length===2?"other":"others"," ) ")}}function Ft(e,s){if(e&1&&(l(0),d(1,zt,2,2,"span",16)),e&2){let t=c(2);Q(" ",t.toDoCategoryControl.value[0]!=="all"?t.toDoCategoryControl.value[0]==="uncategorized"?"Uncategorized":t.toDoContextDisplayNames[t.toDoCategoryControl.value[0]]:""," "),r(),p(t.toDoCategoryControl.value.length>1?1:-1)}}function qt(e,s){if(e&1&&d(0,Ft,2,2),e&2){let t=c();p(t.toDoCategoryControl.value.length?0:-1)}}function Lt(e,s){if(e&1&&(n(0,"mat-option",7)(1,"div",2)(2,"span"),l(3),a(),n(4,"span"),l(5),a()()()),e&2){let t=s.$implicit,o=c();m("value",t),r(3),u(o.toDoContextDisplayNames[t]),r(2),u(o.toDoService.getCategoryList(t).length)}}function Ot(e,s){if(e&1){let t=D();n(0,"app-to-do-partial",17),x("entrySelected",function(i){let f=y(t).$implicit,h=c();return g(h.openEntry(i,f))}),a()}if(e&2){let t=s.$implicit,o=c();m("context",t)("toDoId",o.toDoCategoryControl.value)}}function Ut(e,s){e&1&&(n(0,"div",13)(1,"h2",9),l(2,"No entries in to-do list"),a(),n(3,"p",18),l(4," Your current to-do list is empty! Visit the "),n(5,"a",19),l(6,"journal"),a(),l(7,", the "),n(8,"a",20),l(9,"offerings"),a(),l(10," or other places to add entries to your to-do list. "),a()())}function Rt(e,s){e&1&&(n(0,"div",13)(1,"h2",9),l(2,"No entries for selection"),a(),n(3,"p",18),l(4," There are no entries for your current filter settings. "),a()())}var ke=(()=>{class e extends Ct{constructor(){super(),this.toDoContexts=P,this.toDoContextDisplayNames=M,this.toDoCategoryControl=new rt(["all",...P,"uncategorized"],{nonNullable:!0}),this.toDoService=C(T),this.userDataService=C(pt),this.todoText=J(()=>this.userDataService.currentData().todoText),this.selectedContext=z("uncategorized"),this.hadAllBefore=!0,this.toDoCategoryControl.valueChanges.pipe(B()).subscribe({next:t=>{this.hadAllBefore&&!t.includes("all")?(this.toDoCategoryControl.setValue([],{emitEvent:!1}),this.hadAllBefore=!1):!this.hadAllBefore&&t.includes("all")?(this.toDoCategoryControl.setValue(["all",...this.toDoContexts],{emitEvent:!1}),this.hadAllBefore=!0):this.hadAllBefore&&t.length<this.toDoContexts.length+1&&(this.toDoCategoryControl.setValue(t.filter(o=>o!=="all"),{emitEvent:!1}),this.hadAllBefore=!1)}}),X(()=>{let t=this.todoText();K(()=>{this.userDataService.currentData().todoText=t,this.userDataService.save()})})}openEntry(t,o){this.showDetails(t),this.selectedContext.set(o)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-to-do"]],features:[q],decls:33,vars:10,consts:[[3,"removePlaceholder"],["listDetail","",3,"item","context"],[1,"flex","justify-between"],[1,"mb-4","font-semibold","text-2xl","text-black"],[1,"btn","btn-secondary"],["multiple","","placeholder","None",3,"formControl"],["value","all"],[3,"value"],["value","uncategorized"],[1,"mb-2","mt-4","font-semibold","text-xl","text-black"],[1,"btn","btn-secondary","mb-8"],["matInput","","cdkTextareaAutosize","false",1,"field-sizing-content","min-h-18","max-h-60",3,"ngModelChange","ngModel"],[3,"context","toDoId"],[1,"show-when-none-displayed"],["appDatabaseItemDetails",""],[3,"details"],[1,"text-sm","opacity-80"],[3,"entrySelected","context","toDoId"],[1,"text-black"],["routerLink","/journal",1,"underline"],["routerLink","/locations/lake-temple",1,"underline"]],template:function(o,i){o&1&&(n(0,"app-list-detail-container",0),d(1,Vt,2,2,"app-item-card-switch",1),n(2,"app-card")(3,"div",2)(4,"h1",3),l(5,"To-Dos"),a(),n(6,"mat-form-field",4)(7,"mat-select",5)(8,"mat-select-trigger"),d(9,Nt,1,0)(10,qt,1,1),a(),n(11,"mat-option",6)(12,"div",2)(13,"span"),l(14,"All"),a(),n(15,"span"),l(16),a()()(),E(17,Lt,6,3,"mat-option",7,b),n(19,"mat-option",8)(20,"div",2)(21,"span"),l(22,"Uncategorized"),a(),n(23,"span"),l(24),a()()()()()(),n(25,"h2",9),l(26,"Custom to-dos"),a(),n(27,"mat-form-field",10)(28,"textarea",11),G("ngModelChange",function(h){return H(i.todoText,h)||(i.todoText=h),h}),a()(),E(29,Ot,1,2,"app-to-do-partial",12,b),d(31,Ut,11,0,"div",13)(32,Rt,5,0,"div",13),a()()),o&2&&(m("removePlaceholder",i.showTable),r(),p(i.selectedEntity?1:-1),r(6),m("formControl",i.toDoCategoryControl),r(2),p(i.toDoCategoryControl.value.includes("all")?9:-1),r(),p(i.toDoCategoryControl.value.includes("all")?-1:10),r(6),u(i.toDoService.currentToDoAmount),r(),k(i.toDoContexts),r(7),u(i.toDoService.getCategoryList().length),r(4),W("ngModel",i.todoText),r(),k(i.toDoContexts),r(2),p(i.toDoService.currentIsEmpty?31:-1),r(),p(i.toDoService.currentIsEmpty?-1:32))},dependencies:[wt,gt,Dt,yt,ut,bt,St,ft,ht,tt,mt,nt,at,st,Tt,dt,vt,ct,lt],styles:["app-to-do-partial[_ngcontent-%COMP%]:not(.hidden) ~ .show-when-none-displayed[_ngcontent-%COMP%]{display:none}"]})}}return e})();export{ke as ToDoComponent};
