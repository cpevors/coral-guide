"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[286],{3286:(Ft,H,l)=>{l.r(H),l.d(H,{DatabaseModule:()=>Tt});var d=l(6814),S=l(2787),e=l(5879),x=l(1560),Z=l(880),v=l(6223),B=l(9397),J=l(8180),O=l(7398),L=l(5211),j=l(3620),Q=l(7251),N=l(4240),z=l(6091),U=l(7241);let m=(()=>{var a;class i{constructor(){this.database=(0,e.f3M)(U.k)}getGenericItems(t){return this.database.getTagBasedItems().filter(n=>n.tags.some(o=>t.tags?.includes(o)))}}return(a=i).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],inputs:{item:"item"},decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})();var u=l(6079),E=l(3193),q=l(2296);const G=["*"];let h=(()=>{var a;class i{}return(a=i).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-header-button"]],inputs:{templateRef:"templateRef"},ngContentSelectors:G,decls:4,vars:6,consts:[["mat-button","",1,"hover:bg-black/10",3,"click"],[1,"flex","gap-x-2","items-center"],[1,"arrow"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"button",0),e.NdJ("click",function(){return n.templateRef.toggle()}),e.TgZ(1,"div",1),e.Hsn(2),e._UZ(3,"i",2),e.qZA()()),2&t&&(e.xp6(3),e.ekj("down",!n.templateRef.open)("translate-y-[-3px]",n.templateRef.open)("up",n.templateRef.open))},dependencies:[q.lW],encapsulation:2}),i})();const V=function(a){return[a]};function X(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Fishing"),e.qZA()(),e._UZ(5,"app-caught-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",e.VKq(2,V,t.fish))}}let $=(()=>{var a;class i extends m{ngOnInit(){this.item&&(this.fish=this.database.getFish().find(t=>t.item.id===this.item?.id))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-fishing"]],features:[e.qOj],decls:1,vars:1,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&e.YNc(0,X,6,4,"app-expandable",0),2&t&&e.Q6J("ngIf",n.fish)},dependencies:[d.O5,u.I,E.D,h],encapsulation:2}),i})();const K=function(a){return[a]};function W(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Bugs and insects"),e.qZA()(),e._UZ(5,"app-caught-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",e.VKq(2,K,t.critter))}}let ee=(()=>{var a;class i extends m{ngOnInit(){this.item&&(this.critter=this.database.getBugsAndInsects().find(t=>t.item.id===this.item?.id))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-insects"]],features:[e.qOj],decls:1,vars:1,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&e.YNc(0,W,6,4,"app-expandable",0),2&t&&e.Q6J("ngIf",n.critter)},dependencies:[d.O5,u.I,E.D,h],encapsulation:2}),i})();const te=function(a){return[a]};function ae(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Ocean critters"),e.qZA()(),e._UZ(5,"app-caught-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",e.VKq(2,te,t.critter))}}let ne=(()=>{var a;class i extends m{ngOnInit(){this.item&&(this.critter=this.database.getOceanCritters().find(t=>t.item.id===this.item?.id))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-sea-critters"]],features:[e.qOj],decls:1,vars:1,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&e.YNc(0,ae,6,4,"app-expandable",0),2&t&&e.Q6J("ngIf",n.critter)},dependencies:[d.O5,u.I,E.D,h],encapsulation:2}),i})();var se=l(6207);function ie(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Seed for"),e.qZA()(),e._UZ(5,"app-crop-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.comesFromSeed)}}function oe(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"From seed"),e.qZA()(),e._UZ(5,"app-crop-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.isSeedFor)}}let re=(()=>{var a;class i extends m{constructor(){super(...arguments),this.isSeedFor=[],this.comesFromSeed=[]}ngOnInit(){if(!this.item)return;const t=[...this.database.getCrops(),...this.database.getFruitTrees(),...this.database.getFruitPlants()];this.isSeedFor=t.filter(n=>this.item&&this.isIngredient(this.item,n)),this.comesFromSeed=t.filter(n=>n.item?.id===this.item?.id)}isIngredient(t,n){return n.dropData.some(o=>o.item?.id===t?.id)}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-crops"]],features:[e.qOj],decls:2,vars:2,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&(e.YNc(0,ie,6,2,"app-expandable",0),e.YNc(1,oe,6,2,"app-expandable",0)),2&t&&(e.Q6J("ngIf",n.comesFromSeed.length),e.xp6(1),e.Q6J("ngIf",n.isSeedFor.length))},dependencies:[d.O5,u.I,se.D,h],encapsulation:2}),i})();var le=l(7380);function pe(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Usage in processing"),e.qZA()(),e._UZ(5,"app-processor-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.usedIn)}}function ce(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Processing"),e.qZA()(),e._UZ(5,"app-processor-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.craftedFrom)}}let de=(()=>{var a;class i extends m{constructor(){super(...arguments),this.craftedFrom=[],this.usedIn=[]}ngOnInit(){if(!this.item)return;const t=this.database.getItemProcessingRecipes(),n=[],o=[];Object.keys(t).forEach(r=>{n.push(...t[r].filter(p=>p.output.item.id===this.item?.id)),o.push(...t[r].filter(p=>this.item&&this.isIngredient(this.item,p)))}),this.usedIn=o,this.craftedFrom=n}isIngredient(t,n){const o=this.getGenericItems(t);return n.input.item.id===t?.id||n.additionalInput.some(r=>r.item.id===t.id)||!!o.find(r=>r.key===n.genericInput?.genericItem?.key)}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-artisan"]],features:[e.qOj],decls:2,vars:2,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showProcessor","",3,"dataSource"]],template:function(t,n){1&t&&(e.YNc(0,pe,6,2,"app-expandable",0),e.YNc(1,ce,6,2,"app-expandable",0)),2&t&&(e.Q6J("ngIf",n.usedIn.length),e.xp6(1),e.Q6J("ngIf",n.craftedFrom.length))},dependencies:[d.O5,u.I,le.u,h],encapsulation:2}),i})();var me=l(6592);function ue(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Used to craft"),e.qZA()(),e._UZ(5,"app-inventory-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.usedIn)}}function he(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Crafting recipe"),e.qZA()(),e._UZ(5,"app-inventory-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.craftedFrom)}}let fe=(()=>{var a;class i extends m{constructor(){super(...arguments),this.craftedFrom=[],this.usedIn=[]}ngOnInit(){if(!this.item)return;const t=this.database.getCraftingRecipes();this.craftedFrom=t.filter(n=>n.item?.id===this.item?.id),this.usedIn=t.filter(n=>this.item&&this.isIngredient(this.item,n))}isIngredient(t,n){const o=this.getGenericItems(t);return n.ingredients.some(r=>r.item?.id===t?.id)||n.genericIngredients.some(r=>o.find(p=>p.key===r.key))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-crafting"]],features:[e.qOj],decls:2,vars:2,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&(e.YNc(0,ue,6,2,"app-expandable",0),e.YNc(1,he,6,2,"app-expandable",0)),2&t&&(e.Q6J("ngIf",n.usedIn.length),e.xp6(1),e.Q6J("ngIf",n.craftedFrom.length))},dependencies:[d.O5,u.I,me.a,h],encapsulation:2}),i})();var ge=l(20);function _e(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Usage in cooking"),e.qZA()(),e._UZ(5,"app-cooking-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.usedIn)}}function be(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Cooking recipe"),e.qZA()(),e._UZ(5,"app-cooking-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.craftedFrom)}}let xe=(()=>{var a;class i extends m{constructor(){super(...arguments),this.craftedFrom=[],this.usedIn=[]}ngOnInit(){if(!this.item)return;const t=this.database.getCookingRecipes(),n=[],o=[];Object.keys(t).forEach(r=>{n.push(...t[r].filter(p=>p.item?.id===this.item?.id)),o.push(...t[r].filter(p=>this.item&&this.isIngredient(this.item,p)))}),this.usedIn=o,this.craftedFrom=n}isIngredient(t,n){const o=this.getGenericItems(t);return n.ingredients.some(r=>r.item?.id===t?.id)||n.genericIngredients.some(r=>o.find(p=>p.key===r.key))||n.eitherOrIngredients.some(r=>r.some(p=>p.item?.id===t.id))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-cooking"]],features:[e.qOj],decls:2,vars:2,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showUtensil","",3,"dataSource"]],template:function(t,n){1&t&&(e.YNc(0,_e,6,2,"app-expandable",0),e.YNc(1,be,6,2,"app-expandable",0)),2&t&&(e.Q6J("ngIf",n.usedIn.length),e.xp6(1),e.Q6J("ngIf",n.craftedFrom.length))},dependencies:[d.O5,u.I,ge.X,h],encapsulation:2}),i})();var ve=l(2493),Ce=l(3861),ye=l(9819),b=l(5313);function Ie(a,i){if(1&a&&(e.TgZ(0,"td",16),e._UZ(1,"app-ui-icon",17),e.qZA()),2&a){const s=i.$implicit;e.xp6(1),e.Q6J("uiIcon",s.pref.icon)}}function De(a,i){1&a&&(e.TgZ(0,"th",18),e._uU(1,"Preference"),e.qZA()),2&a&&e.uIk("colspan",2)}function Ae(a,i){if(1&a&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&a){const s=i.$implicit;e.xp6(1),e.hij(" ",s.pref.label," ")}}function Te(a,i){1&a&&(e.TgZ(0,"th",18),e._uU(1,"NPCs"),e.qZA())}function Ze(a,i){if(1&a&&(e.TgZ(0,"div",23),e._UZ(1,"app-item-icon",24),e._uU(2),e.qZA()),2&a){const s=i.$implicit;e.ekj("mr-4",!i.last),e.xp6(1),e.Q6J("itemName",s.iconName),e.xp6(1),e.hij(" ",s.characterName," ")}}function Fe(a,i){if(1&a&&(e.TgZ(0,"td",20)(1,"div",21),e.YNc(2,Ze,3,4,"div",22),e.qZA()()),2&a){const s=i.$implicit;e.xp6(2),e.Q6J("ngForOf",s.npcs)}}function Re(a,i){1&a&&e._UZ(0,"tr",25)}function Se(a,i){1&a&&e._UZ(0,"tr",26)}function we(a,i){if(1&a&&(e.TgZ(0,"table",6),e.ynx(1,7),e.YNc(2,Ie,2,1,"td",8),e.BQk(),e.ynx(3,9),e.YNc(4,De,2,1,"th",10),e.YNc(5,Ae,2,1,"td",11),e.BQk(),e.ynx(6,12),e.YNc(7,Te,2,0,"th",10),e.YNc(8,Fe,3,1,"td",13),e.BQk(),e.YNc(9,Re,1,0,"tr",14),e.YNc(10,Se,1,0,"tr",15),e.qZA()),2&a){const s=e.oxw(2);e.Q6J("dataSource",s.dataSource),e.xp6(9),e.Q6J("matHeaderRowDef",s.displayedHeaderColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",s.displayedColumns)}}function Be(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Gifting"),e.qZA()(),e.TgZ(5,"app-responsive-table"),e.YNc(6,we,11,4,"table",5),e.qZA()()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(3),e.Q6J("ngIf",t.dataSource.length)}}let Je=(()=>{var a;class i extends m{constructor(){super(...arguments),this.displayedHeaderColumns=["preference","npcs"],this.displayedColumns=["icon",...this.displayedHeaderColumns],this.favoritePreferences=[],this.lovePreferences=[],this.likePreferences=[],this.neutralPreferences=[],this.dislikePreferences=[],this.hatePreferences=[],this.dataSource=[],this.keys=["favoritePreferences","lovePreferences","likePreferences","neutralPreferences","dislikePreferences","hatePreferences"]}ngOnInit(){const t=this.item;t&&(this.database.getGiftingPreferences().forEach(o=>{this.keys.forEach(r=>{-1!==o[r].findIndex(c=>"item"===c.type&&t.id===c.item.id)&&o.npc&&this[r].push(o.npc)})}),this.keys.forEach(o=>{const r=this[o];r.length&&this.dataSource.push({pref:ve.A.find(p=>p.preferenceField===o),npcs:r})}))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-gifts"]],hostVars:2,hostBindings:function(t,n){2&t&&e.ekj("database-gifts",n.displayedHeaderColumns)},features:[e.qOj],decls:1,vars:1,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["mat-table","",3,"dataSource",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","icon","sticky",""],["class","!pl-2 !pr-0 !pt-3 w-10 text-center icon-col ","mat-cell","",4,"matCellDef"],["matColumnDef","preference"],["class","backdrop-blur-xl","mat-header-cell","",4,"matHeaderCellDef"],["class","text-col !pl-0 whitespace-nowrap","mat-cell","",4,"matCellDef"],["matColumnDef","npcs"],["class","text-col whitespace-nowrap","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"!pl-2","!pr-0","!pt-3","w-10","text-center","icon-col"],[1,"!text-gifting","mr-1","sm:mr-0","!h-6","!w-6",3,"uiIcon"],["mat-header-cell","",1,"backdrop-blur-xl"],["mat-cell","",1,"text-col","!pl-0","whitespace-nowrap"],["mat-cell","",1,"text-col","whitespace-nowrap"],[1,"whitespace-nowrap"],["class","inline-flex shrink-0 items-center",3,"mr-4",4,"ngFor","ngForOf"],[1,"inline-flex","shrink-0","items-center"],[1,"h-12","mr-2","!flex","items-center","shrink-0",3,"itemName"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&e.YNc(0,Be,7,2,"app-expandable",0),2&t&&e.Q6J("ngIf",n.favoritePreferences.length||n.lovePreferences.length||n.likePreferences.length||n.neutralPreferences.length||n.dislikePreferences.length||n.hatePreferences.length)},dependencies:[d.sg,d.O5,Ce.f,Q.D,ye.t,u.I,b.BZ,b.fO,b.as,b.w1,b.Dz,b.nj,b.ge,b.ev,b.XQ,b.Gk,h],styles:[".database-gifts .app-responsive-table .app-item-icon>img{aspect-ratio:unset;width:auto;max-height:3rem}\n"],encapsulation:2}),i})();var Qe=l(895);function Ee(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Required for offering "),e.qZA()(),e._UZ(5,"app-offerings-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.requiredAsOffering)}}function Me(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Offering reward"),e.qZA()(),e._UZ(5,"app-offerings-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.isRewardIn)}}let He=(()=>{var a;class i extends m{constructor(){super(...arguments),this.isRewardIn=[],this.requiredAsOffering=[]}ngOnInit(){if(!this.item)return;const t=this.database.getOfferings();this.database.getTagBasedItems(),this.isRewardIn=t.map(o=>{const r=o.offerings.filter(p=>p.rewards.items.find(c=>c.item.id===this.item?.id)||p.rewards.recipes.find(c=>c.item.id===this.item?.id));return r.length?{...o,offerings:r}:null}).filter(Z.vJ),this.requiredAsOffering=t.map(o=>{const r=o.offerings.filter(p=>p.requiredItems.find(c=>{if("id"in c.item)return c.item.id===this.item?.id;{const f=c.item.key;return this.database.getTagBasedItems().find(_=>f===_.key)?.items?.find(_=>_.id===this.item?.id)}}));return r.length?{...o,offerings:r}:null}).filter(Z.vJ)}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-offerings"]],features:[e.qOj],decls:2,vars:2,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],["showAltar","",3,"dataSource"]],template:function(t,n){1&t&&(e.YNc(0,Ee,6,2,"app-expandable",0),e.YNc(1,Me,6,2,"app-expandable",0)),2&t&&(e.Q6J("ngIf",n.requiredAsOffering.length),e.xp6(1),e.Q6J("ngIf",n.isRewardIn.length))},dependencies:[d.O5,u.I,Qe.Q,h],encapsulation:2}),i})();var Oe=l(8631);function Ne(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Buy at"),e.qZA()(),e._UZ(5,"app-shop-item-data-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.toBuyAt)}}let Ue=(()=>{var a;class i extends m{constructor(){super(...arguments),this.toBuyAt=[]}ngOnInit(){this.item&&(this.toBuyAt=x.vo.map(t=>this.database.getShopData(t).map(n=>({...n,shop:{url:t,displayName:x.ln[t]}}))).flat().filter(t=>this.item?.id===t.item.id))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-shop-data"]],features:[e.qOj],decls:1,vars:1,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&e.YNc(0,Ne,6,2,"app-expandable",0),2&t&&e.Q6J("ngIf",n.toBuyAt.length)},dependencies:[d.O5,u.I,Oe.u,h],encapsulation:2}),i})();var qe=l(6339);function Pe(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Chance as processing result "),e.qZA()(),e._UZ(5,"app-shop-item-process-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.chancetoBeProcessedFrom)}}function ke(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Can be processed at"),e.qZA()(),e._UZ(5,"app-shop-item-process-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.canBeProcessed)}}let Ye=(()=>{var a;class i extends m{constructor(){super(...arguments),this.chancetoBeProcessedFrom=[],this.canBeProcessed=[]}ngOnInit(){if(!this.item)return;const t=x.vo.map(n=>this.database.getShopProcessItems(n).map(o=>({...o,shop:{url:n,displayName:x.ln[n]}}))).flat();this.chancetoBeProcessedFrom=t.map(n=>{const o=n.outputChanges.find(r=>r.item.id===this.item?.id);if(o)return{...n,outputChanges:[o]}}).filter(Z.vJ),this.canBeProcessed=t.filter(n=>n.input.id===this.item?.id)}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-shop-item-process"]],features:[e.qOj],decls:2,vars:2,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&(e.YNc(0,Pe,6,2,"app-expandable",0),e.YNc(1,ke,6,2,"app-expandable",0)),2&t&&(e.Q6J("ngIf",n.chancetoBeProcessedFrom.length),e.xp6(1),e.Q6J("ngIf",n.canBeProcessed.length))},dependencies:[d.O5,u.I,qe.a,h],encapsulation:2}),i})();var Le=l(1167);function je(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Is result of upgrade "),e.qZA()(),e._UZ(5,"app-item-upgrade-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.isTheResult)}}function ze(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Is used as requirement in "),e.qZA()(),e._UZ(5,"app-item-upgrade-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.isRequirement)}}let Ge=(()=>{var a;class i extends m{constructor(){super(...arguments),this.isTheResult=[],this.isRequirement=[]}ngOnInit(){if(!this.item)return;const t=x.vo.map(n=>this.database.getItemUpgradeData(n).map(o=>({...o,shop:{url:n,displayName:x.ln[n]}}))).flat();this.isTheResult=t.filter(n=>n.item.id===this.item?.id).filter(Z.vJ),this.isRequirement=t.filter(n=>n.requirements.some(o=>o.item.id===this.item?.id))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-item-upgrade"]],features:[e.qOj],decls:2,vars:2,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&(e.YNc(0,je,6,2,"app-expandable",0),e.YNc(1,ze,6,2,"app-expandable",0)),2&t&&(e.Q6J("ngIf",n.isTheResult.length),e.xp6(1),e.Q6J("ngIf",n.isRequirement.length))},dependencies:[d.O5,u.I,Le.o,h],encapsulation:2}),i})();var Ve=l(4431);function Xe(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Can be dropped from enemies "),e.qZA()(),e._UZ(5,"app-bestiary-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.enemiesDroppingItem)}}let $e=(()=>{var a;class i extends m{constructor(){super(...arguments),this.enemiesDroppingItem=[]}ngOnInit(){const t=this.item;t&&(this.enemiesDroppingItem=this.database.getBestiary().map(n=>({...n,dropRates:n.dropRates.filter(o=>o.item.id===t.id)})).filter(n=>n.dropRates.length))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-bestiary"]],features:[e.qOj],decls:1,vars:1,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&e.YNc(0,Xe,6,2,"app-expandable",0),2&t&&e.Q6J("ngIf",n.enemiesDroppingItem.length)},dependencies:[d.O5,u.I,Ve.f,h],encapsulation:2}),i})();var Ke=l(1229);function We(a,i){if(1&a&&(e.TgZ(0,"app-expandable",1,2)(2,"h3",3)(3,"app-database-header-button",4),e._uU(4,"Buy at festival"),e.qZA()(),e._UZ(5,"app-festival-shop-item-table",5),e.qZA()),2&a){const s=e.MAs(1),t=e.oxw();e.xp6(3),e.Q6J("templateRef",s),e.xp6(2),e.Q6J("dataSource",t.toBuyAt)}}let et=(()=>{var a;class i extends m{constructor(){super(...arguments),this.toBuyAt=[]}ngOnInit(){this.item&&(this.toBuyAt=x.lB.map(t=>(this.database.getFestivalData(t)?.shops.map(n=>n.shop).flat()??[]).map(n=>({...n,festival:{url:t,displayName:x.vq[t]}}))).flat().filter(t=>this.item?.id===t.item.id))}}return(a=i).\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(a)))(n||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-festival-shop-data"]],features:[e.qOj],decls:1,vars:1,consts:[["open","",4,"ngIf"],["open",""],["expandableComponent",""],["expandableHeader","",1,"database-header"],[3,"templateRef"],[3,"dataSource"]],template:function(t,n){1&t&&e.YNc(0,We,6,2,"app-expandable",0),2&t&&e.Q6J("ngIf",n.toBuyAt.length)},dependencies:[d.O5,u.I,Ke.i,h],encapsulation:2}),i})();function tt(a,i){if(1&a&&(e.TgZ(0,"app-card")(1,"header",1),e._UZ(2,"app-item-icon",2),e.TgZ(3,"div",3)(4,"h2",4),e._uU(5),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.qZA()(),e._UZ(8,"div",5)(9,"app-quality-grid",6),e.qZA(),e.TgZ(10,"p",7),e._uU(11),e.qZA(),e.TgZ(12,"div",8),e._uU(13,"There's currently no data for this item. :("),e.qZA(),e._UZ(14,"app-database-shop-item-process",9)(15,"app-database-shop-data",9)(16,"app-database-offerings",9)(17,"app-database-crops",9)(18,"app-database-fishing",9)(19,"app-database-insects",9)(20,"app-database-sea-critters",9)(21,"app-database-artisan",9)(22,"app-database-cooking",9)(23,"app-database-crafting",9)(24,"app-database-festival-shop-data",9)(25,"app-database-gifts",9)(26,"app-database-item-upgrade",9)(27,"app-database-bestiary",9),e.qZA()),2&a){const s=e.oxw();e.xp6(2),e.Q6J("itemName",s.item.iconName),e.xp6(3),e.Oqu(s.item.displayName),e.xp6(2),e.Oqu(s.item.id),e.xp6(2),e.Q6J("showOnlyBase",!s.item.qualities.bronze)("item",s.item),e.xp6(2),e.Oqu(s.item.description),e.xp6(3),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item),e.xp6(1),e.Q6J("item",s.item)}}let at=(()=>{var a;class i{constructor(){this._classes="col-span-full database-details"}}return(a=i).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database-details"]],hostVars:2,hostBindings:function(t,n){2&t&&e.Tol(n._classes)},inputs:{item:"item"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"flex","items-center","flex-wrap","mb-5"],[1,"mr-3","w-14",3,"itemName"],[1,"flex","flex-col","gap-0.5"],[1,"!my-0","font-semibold","text-xl","text-black"],[1,"h-0","w-full","md:hidden"],["includePrices","",1,"md:ml-auto","mt-4","md:mt-0","quality-grid","inline-block","w-fit",3,"showOnlyBase","item"],[1,"text-lg"],[1,"empty-details","text-black","my-5","text-lg"],[3,"item"]],template:function(t,n){1&t&&e.YNc(0,tt,28,20,"app-card",0),2&t&&e.Q6J("ngIf",n.item)},dependencies:[d.O5,Q.D,N.A,z.r,$,ee,ne,re,de,fe,xe,Je,He,Ue,Ye,Ge,$e,et],styles:[".database-details .empty-details{display:none}.database-details:not(:has(.database-header)) .empty-details{display:block}.database-details .expandable-body{transition:none}.quality-grid .app-item-icon>img{height:3.5rem}.database-header{color:#000;font-weight:600;font-size:1.25em;margin-top:1.2em;line-height:1.6}\n"],encapsulation:2}),i})();var I=l(2495),nt=l(6593),D=l(4170),F=l(2831),st=l(6232),M=l(8645);const P=(0,F.i$)({passive:!0});let it=(()=>{var a;class i{constructor(t,n){this._platform=t,this._ngZone=n,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return st.E;const n=(0,I.fI)(t),o=this._monitoredElements.get(n);if(o)return o.subject;const r=new M.x,p="cdk-text-field-autofilled",c=f=>{"cdk-text-field-autofill-start"!==f.animationName||n.classList.contains(p)?"cdk-text-field-autofill-end"===f.animationName&&n.classList.contains(p)&&(n.classList.remove(p),this._ngZone.run(()=>r.next({target:f.target,isAutofilled:!1}))):(n.classList.add(p),this._ngZone.run(()=>r.next({target:f.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",c,P),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:r,unlisten:()=>{n.removeEventListener("animationstart",c,P)}}),r}stopMonitoring(t){const n=(0,I.fI)(t),o=this._monitoredElements.get(n);o&&(o.unlisten(),o.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((t,n)=>this.stopMonitoring(n))}}return(a=i).\u0275fac=function(t){return new(t||a)(e.LFG(F.t4),e.LFG(e.R0b))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),i})(),ot=(()=>{var a;class i{}return(a=i).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({}),i})();var w=l(3680);const rt=new e.OlP("MAT_INPUT_VALUE_ACCESSOR"),lt=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let pt=0;const ct=(0,w.FD)(class{constructor(a,i,s,t){this._defaultErrorStateMatcher=a,this._parentForm=i,this._parentFormGroup=s,this.ngControl=t,this.stateChanges=new M.x}});let dt=(()=>{var a;class i extends ct{get disabled(){return this._disabled}set disabled(t){this._disabled=(0,I.Ig)(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(v.kI.required)??!1}set required(t){this._required=(0,I.Ig)(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&(0,F.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=(0,I.Ig)(t)}constructor(t,n,o,r,p,c,f,g,_,R){super(c,r,p,o),this._elementRef=t,this._platform=n,this._autofillMonitor=g,this._formField=R,this._uid="mat-input-"+pt++,this.focused=!1,this.stateChanges=new M.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(T=>(0,F.qK)().has(T)),this._iOSKeyupListener=T=>{const C=T.target;!C.value&&0===C.selectionStart&&0===C.selectionEnd&&(C.setSelectionRange(1,1),C.setSelectionRange(0,0))};const y=this._elementRef.nativeElement,A=y.nodeName.toLowerCase();this._inputValueAccessor=f||y,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&_.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===A,this._isTextarea="textarea"===A,this._isInFormField=!!R,this._isNativeSelect&&(this.controlType=y.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const n=this._elementRef.nativeElement;this._previousPlaceholder=t,t?n.setAttribute("placeholder",t):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){lt.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,n=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return(a=i).\u0275fac=function(t){return new(t||a)(e.Y36(e.SBq),e.Y36(F.t4),e.Y36(v.a5,10),e.Y36(v.F,8),e.Y36(v.sg,8),e.Y36(w.rD),e.Y36(rt,10),e.Y36(it),e.Y36(e.R0b),e.Y36(D.G_,8))},a.\u0275dir=e.lG2({type:a,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,n){1&t&&e.NdJ("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&t&&(e.Ikx("id",n.id)("disabled",n.disabled)("required",n.required),e.uIk("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required)("id",n.id),e.ekj("mat-input-server",n._isServer)("mat-mdc-form-field-textarea-control",n._isInFormField&&n._isTextarea)("mat-mdc-form-field-input-control",n._isInFormField)("mdc-text-field__input",n._isInFormField)("mat-mdc-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[e._Bn([{provide:D.Eo,useExisting:a}]),e.qOj,e.TTD]}),i})(),mt=(()=>{var a;class i{}return(a=i).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[w.BQ,D.lN,D.lN,ot,w.BQ]}),i})();var k=l(5940);function ut(a,i){if(1&a){const s=e.EpF();e.TgZ(0,"app-card",3)(1,"div",4)(2,"h2"),e._uU(3,"Important note"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"The item list loads a lot of stuff, this may take a while. The list below shows everything, that got not filtered beforehand. Some of those items will never be obtainable as they only provide a technical purpose. The information shown per item are as complete as the rest of this website. When new features get added, the details in here will expand as well."),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.hideImportantNote())}),e._uU(7,"Got it!"),e.qZA()()()}}function ht(a,i){if(1&a){const s=e.EpF();e.TgZ(0,"app-item-icon",10),e.NdJ("click",function(){const n=e.CHM(s),o=n.$implicit,r=n.index,p=e.oxw(3);return e.KtG(p.showDetails(o,r))}),e.qZA()}if(2&a){const s=i.$implicit,t=e.oxw(3);e.ekj("selected-icon",(null==t.selectedItem?null:t.selectedItem.id)===s.id),e.Q6J("itemName",s.iconName)}}function ft(a,i){1&a&&e.GkF(0)}function gt(a,i){if(1&a&&(e.ynx(0),e.YNc(1,ht,1,3,"app-item-icon",9),e.YNc(2,ft,1,0,"ng-container",2),e.BQk()),2&a){const s=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",s.filteredItems)("ngForTrackBy",s.trackById),e.xp6(1),e.Q6J("ngIf",s.initialItemLoad())}}function _t(a,i){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-form-field",6),e._UZ(2,"input",7),e.qZA(),e.TgZ(3,"div",8),e.YNc(4,gt,3,3,"ng-container",2),e.ALo(5,"async"),e.qZA(),e.BQk()),2&a){const s=e.oxw();e.xp6(2),e.Q6J("formControl",s.searchTermControl),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,2,s.filteredItems$))}}function bt(a,i){1&a&&(e.ynx(0),e._UZ(1,"mat-spinner",11),e.BQk())}const xt=[{path:"",component:(()=>{var a;class i{constructor(t,n,o,r,p,c){this._route=t,this._router=n,this._database=o,this._appRef=r,this._injector=p,this._title=c,this.searchTermControl=new v.NI("",{nonNullable:!0}),this.shouldHideImportantNote=!1,this.filteredItems=[],this.allPrefetched=!1,this._localStorageHideNoteKey="databaseHideImportantNote",this._didInitialLoad=!1,this._database.getDatabaseDetails().pipe((0,B.b)(()=>this.allPrefetched=!0),(0,J.q)(1)).subscribe(),this.shouldHideImportantNote=(0,I.Ig)(localStorage.getItem(this._localStorageHideNoteKey)),this.items=o.getItems().filter(g=>(0,Z.Ed)(g.id)===x.nJ.BASE);const f=(0,O.U)(g=>{const y=/tag:(?<tag>[a-zA-Z.]+)/gm.exec(g)?.groups?.tag.replace("tag:","").toLocaleLowerCase()??"",A=g.replace("tag:"+y,"").toLocaleLowerCase().trim(),T=this.items.filter(C=>{let Y=!0;return y&&(Y=!!C.tags?.some(Zt=>Zt.toLocaleLowerCase().includes(y))),!!Y&&(C.displayName.toLocaleLowerCase().includes(A)||A.startsWith("item_")&&C.id.startsWith(A))});return this.filteredItems=T,T});this.filteredItems$=(0,L.z)(this._route.queryParams.pipe((0,O.U)(g=>{const _=g.q??"";return this.searchTermControl.setValue(_,{emitEvent:!1}),_}),f,(0,J.q)(1)),this.searchTermControl.valueChanges.pipe((0,j.b)(300),(0,B.b)(g=>{this.updateQueryParam(g),document.getElementById("database-details")?.remove()}),f))}showDetails(t,n,o=!1){this.updateRouteParam(t.id),this.selectedItem=void 0,document.getElementById("database-details")?.remove();const r=document.getElementById("grid");if(!r)return;const c=window.getComputedStyle(r).getPropertyValue("grid-template-columns").split(" ").length,f=Math.floor(n/c),g=Math.min(this.filteredItems.length,(f+1)*c),_=document.querySelector(`#grid app-item-icon:nth-of-type(${g})`);if(!_)return;let R=this.createComponent(t);this.insertAfter(R,_),this.selectedItem=t,o&&setTimeout(()=>document.getElementById("database-details")?.scrollIntoView(!0),0)}insertAfter(t,n){n.parentNode?.insertBefore(t.location.nativeElement,n.nextSibling),this._appRef.attachView(t.hostView)}createComponent(t){const n=(0,e.LMc)(at,{environmentInjector:this._injector});return n.setInput("item",t),n.location.nativeElement.id="database-details",n}hideImportantNote(){this.shouldHideImportantNote=!0,localStorage.setItem(this._localStorageHideNoteKey,"true")}updateQueryParam(t){this._router.navigate([],{relativeTo:this._route,queryParams:{q:t},queryParamsHandling:"merge",replaceUrl:!0})}updateRouteParam(t){this._router.navigate(["..",t],{relativeTo:this._route,replaceUrl:!0,queryParamsHandling:"preserve"}).then(()=>!!this.selectedItem&&this.updateTitle(this.selectedItem.displayName))}initialItemLoad(){this._didInitialLoad||this._route.params.pipe((0,B.b)(t=>{const n=t.itemId;if(this._didInitialLoad=!0,!n)return;const o=this.filteredItems.findIndex(r=>r.id===n);if(o>-1)this.showDetails(this.filteredItems[o],o,!0);else if(0===this.filteredItems.length){const r=this.items.findIndex(p=>p.id===n);r>-1&&this._setGridContent(this.items[r])}}),(0,J.q)(1)).subscribe()}_setGridContent(t){const n=this.createComponent(t);document.getElementById("grid")?.appendChild(n.location.nativeElement),this._appRef.attachView(n.hostView),this.selectedItem=t}trackById(t,n){return n.id}updateTitle(t){const n=this._title.getTitle();n&&this._title.setTitle(`${t} - ${n}`)}}return(a=i).\u0275fac=function(t){return new(t||a)(e.Y36(S.gz),e.Y36(S.F0),e.Y36(U.k),e.Y36(e.z2F),e.Y36(e.lqb),e.Y36(nt.Dx))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-database"]],decls:4,vars:3,consts:[[1,"container","mx-auto","pb-6","database-grid","px-2"],["class","my-3",4,"ngIf"],[4,"ngIf"],[1,"my-3"],[1,"prose","lg:prose-xl"],[1,"btn","btn-secondary",3,"click"],[1,"btn","my-3"],["matInput","","placeholder","Search term",1,"placeholder:text-white",3,"formControl"],["id","grid",1,"grid","gap-4","icon-grid"],["class","icon-grid-item",3,"selected-icon","itemName","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"icon-grid-item",3,"itemName","click"],[1,"text-white","mx-auto","my-5"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ut,8,0,"app-card",1),e.YNc(2,_t,6,4,"ng-container",2),e.YNc(3,bt,2,0,"ng-container",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.shouldHideImportantNote),e.xp6(1),e.Q6J("ngIf",n.allPrefetched),e.xp6(1),e.Q6J("ngIf",!n.allPrefetched))},dependencies:[d.sg,d.O5,Q.D,N.A,D.KE,dt,v.Fj,v.JJ,v.oH,k.Ou,d.Ov],encapsulation:2}),i})(),title:"Database"}];let vt=(()=>{var a;class i{}return(a=i).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[S.Bz.forChild(xt),S.Bz]}),i})();var Ct=l(8440),yt=l(4379),It=l(8325),Dt=l(1573),At=l(3566);let Tt=(()=>{var a;class i{}return(a=i).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,vt,Ct.m,D.lN,mt,v.UX,k.Cq,yt.JournalModule,It.CraftingModule,Dt.LocationsModule,q.ot,At.JX,b.p0]}),i})()}}]);